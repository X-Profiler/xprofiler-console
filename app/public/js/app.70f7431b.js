(function(e){function t(t){for(var a,o,s=t[0],c=t[1],l=t[2],d=0,p=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&p.push(n[o][0]),n[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(p.length)p.shift()();return i.push.apply(i,l||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],a=!0,s=1;s<r.length;s++){var c=r[s];0!==n[c]&&(a=!1)}a&&(i.splice(t--,1),e=o(o.s=r[0]))}return e}var a={},n={app:0},i=[];function o(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=a,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(r,a,function(t){return e[t]}.bind(null,a));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/public/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"00f7":function(e,t,r){"use strict";var a=r("7f39"),n=r.n(a);n.a},"01e4":function(e,t,r){},"034f":function(e,t,r){"use strict";var a=r("85ec"),n=r.n(a);n.a},"0367":function(e,t,r){},"056f":function(e,t,r){},"0570":function(e,t,r){},"08ee":function(e,t,r){"use strict";var a=r("f568"),n=r.n(a);n.a},"090a":function(e,t,r){},"09a8":function(e,t,r){},"11fa":function(e,t,r){},"123e":function(e,t,r){"use strict";var a=r("7eea"),n=r.n(a);n.a},"12bb":function(e,t,r){"use strict";var a=r("ebc1"),n=r.n(a);n.a},"13ae":function(e,t,r){},"153f":function(e,t,r){},1574:function(e,t,r){"use strict";var a=r("9554"),n=r.n(a);n.a},"176e":function(e,t,r){"use strict";var a=r("64ee"),n=r.n(a);n.a},"1a0c":function(e,t,r){},"1b38":function(e,t,r){"use strict";var a=r("cec2"),n=r.n(a);n.a},"1ba1":function(e,t,r){},"1ccf":function(e,t,r){},"1e10":function(e,t,r){},"1ecf":function(e,t,r){"use strict";var a=r("de46"),n=r.n(a);n.a},"1ee9":function(e,t,r){},2082:function(e,t,r){},"227c":function(e,t,r){},"25a9":function(e,t,r){},"26db":function(e,t,r){"use strict";var a=r("a0ae"),n=r.n(a);n.a},"2ac1":function(e,t,r){"use strict";var a=r("bf21"),n=r.n(a);n.a},"2cfc":function(e,t,r){"use strict";var a=r("9da7"),n=r.n(a);n.a},"2d01":function(e,t,r){"use strict";var a=r("383e"),n=r.n(a);n.a},"2dc3":function(e,t,r){"use strict";var a=r("507b"),n=r.n(a);n.a},"2ea7":function(e,t,r){},3200:function(e,t,r){"use strict";var a=r("11fa"),n=r.n(a);n.a},3304:function(e,t,r){"use strict";var a=r("1ee9"),n=r.n(a);n.a},"350f":function(e,t,r){"use strict";var a=r("56df"),n=r.n(a);n.a},3585:function(e,t,r){"use strict";var a=r("ec97"),n=r.n(a);n.a},"35df":function(e,t,r){},"36c2":function(e,t,r){},"36e0":function(e,t,r){},"37eb":function(e,t,r){},"383e":function(e,t,r){},"3bf0":function(e,t,r){},"3c08":function(e,t,r){},"3c4e":function(e,t,r){"use strict";var a=r("e6ca"),n=r.n(a);n.a},"3dc7":function(e,t,r){"use strict";var a=r("01e4"),n=r.n(a);n.a},"42cd":function(e,t,r){"use strict";var a=r("c5ff"),n=r.n(a);n.a},"42f2":function(e,t,r){"use strict";var a=r("bf70"),n=r.n(a);n.a},4433:function(e,t,r){},"44c2":function(e,t,r){"use strict";var a=r("5540"),n=r.n(a);n.a},4524:function(e,t,r){"use strict";var a=r("13ae"),n=r.n(a);n.a},4678:function(e,t,r){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(e){var t=i(e);return r(t)}function i(e){if(!r.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}n.keys=function(){return Object.keys(a)},n.resolve=i,e.exports=n,n.id="4678"},4996:function(e,t,r){},"4ace":function(e,t,r){"use strict";var a=r("6b98"),n=r.n(a);n.a},"507b":function(e,t,r){},"51e2":function(e,t,r){},5269:function(e,t,r){"use strict";var a=r("6384"),n=r.n(a);n.a},5381:function(e,t,r){},"54ec":function(e,t,r){"use strict";var a=r("9d30"),n=r.n(a);n.a},5540:function(e,t,r){},"55fc":function(e,t,r){},5665:function(e,t,r){"use strict";var a=r("37eb"),n=r.n(a);n.a},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),n=r("2f62"),i=r("8c4f"),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("transition",{attrs:{name:"slide-router"}},[r("router-view")],1)],1)},s=[],c={},l=c,u=(r("034f"),r("2877")),d=Object(u["a"])(l,o,s,!1,null,null,null),p=d.exports,f=(r("a4d3"),r("4de4"),r("4160"),r("e439"),r("dbb4"),r("b64b"),r("159b"),r("96cf"),r("1da1")),h=r("ade3"),v=r("bc3a"),b=r.n(v),g="ch";function y(e){return e[g]}function m(e){return Object(n["a"])(e)}r("99af"),r("a9e3"),r("b680"),r("e01a"),r("d81d"),r("bc01"),r("d3b7"),r("ac1f"),r("5319"),r("1276"),r("498a");var O=r("3835");function w(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,a=Symbol("TIMER_KEY");return Object(h["a"])({},e,(function(){for(var e=this,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];this[a]&&(clearTimeout(this[a]),this[a]=null),this[a]=setTimeout((function(){e[a]=null,t.call.apply(t,[e].concat(i))}),r)}))}function _(e){return!0!==e&&!1!==e&&Boolean(0===e||e&&!isNaN(e))}function j(e){return"true"===e||"false"===e}function x(e){return"true"===e}function P(){for(var e=document.cookie.split(";").map((function(e){return e.split("=").map((function(e){return e.trim()}))})),t=e.length,r=0;r<t;r++){var a=Object(O["a"])(e[r],2),n=a[0],i=a[1];if("csrfToken"===n)return i}}function k(e){return e?String(e).replace(/[<>"&]/g,(function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case'"':return"&quot;"}})):""}function D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i=e===Math.abs(e);e=Math.abs(e);var o="";return e=+e,o=e/1024<1?"".concat(a?e.toFixed(t):Number(e.toFixed(t))).concat(n,"Bytes"):e/1024/1024<1?"".concat(a?(e/1024).toFixed(t):Number((e/1024).toFixed(t))).concat(n,"KB"):e/1024/1024/1024<1?"".concat(a?(e/1024/1024).toFixed(t):Number((e/1024/1024).toFixed(t))).concat(n,"MB"):"".concat(a?(e/1024/1024/1024).toFixed(t):Number(e/1024/1024/1024).toFixed(t)).concat(n,"GB"),e?"".concat(i?"".concat(r?"+".concat(o):o):"-".concat(o)):o}function S(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;e=_(e)&&e||0;var n="";if(e=Number(e),e<1e3)n="".concat(Number(e.toFixed(a))).concat(t?"毫秒":"ms");else if(e<6e4)n="".concat(Number((e/1e3).toFixed(a))).concat(t?"秒":"s");else if(e<36e5)n="".concat(Number((e/6e4).toFixed(a))).concat(t?"分钟":r?"m":"min");else if(e<864e5){var i=parseInt(e/36e5),o=e-1e3*i*60*60;n="".concat(i).concat(t?"小时":"h").concat(o?":".concat(S(o,t,r,a)):"")}else{var s=parseInt(e/864e5),c=e-1e3*s*60*60*24;n="".concat(s).concat(t?"天":"d").concat(c?":".concat(S(c,t,r,a)):"")}return n}var T=b.a.CancelToken;function C(){return T.source()}function A(e){e.cancel("Operation canceled by the user.")}r("d28b"),r("caad"),r("2532"),r("3ca3"),r("ddb0");function M(e,t,r){var a=this;r?(this[e]=null,setTimeout((function(){return a[e]=t}),0)):this[e]=t}function E(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=this.valueWhiteList&&this.valueWhiteList[e],i=!t||!Array.isArray(n)||n.includes(t);return i?r||(t?_(t)?M.call(this,e,Number(t),a):j(t)?M.call(this,e,x(t),a):M.call(this,e,t,a):Array.isArray(n)&&M.call(this,e,n[0],a)):(r||this.$Message.error("不合法的参数：".concat(t)),Array.isArray(n)&&M.call(this,e,n[0],a)),i}function I(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=e[0].query[t];E.call(this,r,n,!1,a)}function N(e,t,r){var a=Object(O["a"])(r,2),n=a[0],i=a[1];if(E.call(this,t,n)){var o=this.nessaryQueryArgs||[],s=this.$route.query;if(!(s[e]==n||j(s[e])&&x(s[e])===n)){var c=Object(h["a"])({},e,n),l=!0,u=!1,d=void 0;try{for(var p,f=o[Symbol.iterator]();!(l=(p=f.next()).done);l=!0){var v=p.value;v!==e&&(c[v]=s[v])}}catch(g){u=!0,d=g}finally{try{l||null==f.return||f.return()}finally{if(u)throw d}}var b=void 0===i||!E.call(this,t,i,!0);if(!b)return this.$router.push({path:this.$route.path,query:c}),!0;this.$router.replace({path:this.$route.path,query:c})}}}var R={},L={array:function(e){return Array.isArray(e)}};function F(e,t){var r,a,n="".concat(e,"_loading"),i="".concat(e,"_load_error"),o="".concat(e,"_data"),s="set_".concat(n,"_status"),c="set_".concat(i),l="set_".concat(e);return{state:(r={},Object(h["a"])(r,n,!1),Object(h["a"])(r,i,void 0),Object(h["a"])(r,o,t),r),mutations:(a={},Object(h["a"])(a,s,(function(e,t){e[n]=t})),Object(h["a"])(a,c,(function(e,t){e[i]=t})),Object(h["a"])(a,l,(function(e,t){e[o]=t})),a),handle:function(e,r,a,n){var i=e.dispatch,o=e.commit;return Object(f["a"])(regeneratorRuntime.mark((function e(){var u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return R[s]?R[s]++:R[s]=1,o(s,!0),o(c,void 0),o(l,t),e.prev=4,e.next=7,i("request",r,{root:!0});case 7:u=e.sent,a&&(u=u[a]),n&&"function"===typeof L[n]?L[n](u)&&o(l,u):o(l,u),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](4),o(c,e.t0.message);case 15:R[s]--,R[s]||o(s,!1);case 17:case"end":return e.stop()}}),e,null,[[4,12]])})))()}}}var $={};function z(e,t){for(var r="YES",a=arguments.length,n=new Array(a>2?a-2:0),i=2;i<a;i++)n[i-2]=arguments[i];var o=n[0],s=n[1],c=n[2],l=n[3],u=n[4],d=n[5],p=n[6],f=n[7],v=void 0===f?[]:f;return{handleMounted:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t?this[e](this.$route.query,r):this[l]({status:!1})},mapMethods:function(a){return Object(h["a"])({},a,(function(a,n){var i=this.$refs[c],s=a[this[o]];if(s===r){var f={status:!0};if(u)try{f[u]=JSON.parse(a[u])}catch(_){}if(n&&(f[n]=a),this[l](f),i[e](),d){var h={},b=!0,g=!1,y=void 0;try{for(var m,O=v[Symbol.iterator]();!(b=(m=O.next()).done);b=!0){var w=m.value;h[w]=this[w]}}catch(j){g=!0,y=j}finally{try{b||null==O.return||O.return()}finally{if(g)throw y}}this[d](Object.assign({cancelToken:this.cancelToken.token},h))}}else this[l]({status:!1}),i[t](),p&&this[p]&&(A(this.cancelToken),this.cancelToken=C())}))},mapWatch:Object(h["a"])({},s,(function(){var e=this[o];if(this[s]){var t,a=this.$route;if(a.query[e]===r)return;var n=Object.assign({},a.query,(t={},Object(h["a"])(t,e,r),Object(h["a"])(t,u,JSON.stringify(this[u])),t));this.$router.push({path:a.path,query:n}),$[e]=!0}else{var i=this.$route;if(i.query[e]===r)if(!$[e]&&this.$store.state.first||this.forceGoBack){this.$store.commit("first",!1);var c={};if(Array.isArray(this.whiteQueryKeys)){var l=!0,d=!1,p=void 0;try{for(var f,v=this.whiteQueryKeys[Symbol.iterator]();!(l=(f=v.next()).done);l=!0){var b=f.value;c[b]=i.query[b]}}catch(x){d=!0,p=x}finally{try{l||null==v.return||v.return()}finally{if(d)throw p}}c[e]=void 0,c[u]=void 0}else if(Array.isArray(this.blackQueryKeys)){var g=!0,y=!1,m=void 0;try{for(var O,w=this.blackQueryKeys[Symbol.iterator]();!(g=(O=w.next()).done);g=!0){var _=O.value;c[_]=void 0}}catch(x){y=!0,m=x}finally{try{g||null==w.return||w.return()}finally{if(y)throw m}}c[e]=void 0,c[u]=void 0}else{var j;Object.assign(c,i.query,(j={},Object(h["a"])(j,e,void 0),Object(h["a"])(j,u,void 0),j))}this.$router.push({path:i.path,query:c})}else this.$router.go(-1),$[e]=!1}}))}}function B(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return z.apply(void 0,["open","close"].concat(t))}function U(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return z.apply(void 0,["showModal","cancelModal"].concat(t))}function G(e){return e%2===0?e/2:(e-1)/2}function H(e,t){var r=e.length,a=e[0],n=e[e.length-1],i=G(r);while(r>0)t>=e[i]?(e[i]>a&&(a=e[i]),r=G(r,!1),i=i+G(r)+1):(e[i]<n&&(n=e[i]),r=G(r,!0),i-=r-G(r));return[a,n]}var W={url:{user:"/xapi/user",app:"/xapi/app",apps:"/xapi/apps",overviewMetrics:"/xapi/overview_metrics",mainMetrics:"/xapi/main_metrics",agents:"/xapi/agents",agentInfo:"/xapi/agent",agentXprofilerProcesses:"/xapi/xprofiler_processes",agentNodeProcesses:"/xapi/node_processes",xprofilerStatus:"/xapi/xprofiler_status",processTrend:"/xapi/process_trend",action:"/xapi/action",overview:"/xapi/system_overview",systemTrend:"/xapi/system_trend",errorFiles:"/xapi/error_files",errorLogs:"/xapi/error_logs",moduleFiles:"/xapi/module_files",module:"/xapi/module",uploadFile:"/xapi/upload_file",fileList:"/xapi/files",fileFavor:"/xapi/file_favor",fileTransfer:"/xapi/file_transfer",fileDeletion:"/xapi/file_deletion",fileStatus:"/xapi/file_status",downloadFile:"/file/download",members:"/xapi/team_members",member:"/xapi/team_member",ownership:"/xapi/team_ownership",leaveTeam:"/xapi/leave_team",invitation:"/xapi/invitation",strategies:"/xapi/alarm_strategies",strategy:"/xapi/alarm_strategy",strategyStatus:"/xapi/alarm_strategy_status",strategyContacts:"/xapi/alarm_strategy_contacts",strategyContact:"/xapi/alarm_strategy_contact",strategyHistory:"/xapi/alarm_strategy_history",settings:"/xapi/settings",settingsAppName:"/xapi/settings_app_name",settingsApp:"/xapi/settings_app"}},X={i18n:{}};function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Y=F("user",{}),V=Y.state,Q=Y.mutations,Z=Y.handle,J={namespaced:!0,state:K({},V),mutations:K({},Q),actions:{getUserInfo:function(e,t){var r=t.cancelToken;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.rootState,n={cancelToken:r,url:a.url.user},t.next=4,Z(e,n);case 4:case"end":return t.stop()}}),t)})))()}}};function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var re=F("new_app",void 0),ae=re.state,ne=re.mutations,ie=re.handle,oe=F("app_list",[]),se=oe.state,ce=oe.mutations,le=oe.handle,ue={namespaced:!0,state:te({},ae,{},se,{newAppModal:void 0}),mutations:te({},ne,{},ce,{setNewAppModal:function(e,t){var r=t.status;!1!==r&&!0!==r||(e.newAppModal=r)}}),actions:{createNewApp:function(e,t){var r=t.cancelToken,a=t.newAppName;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.rootState,i={cancelToken:r,method:"POST",url:n.url.app,data:{newAppName:a}},t.next=4,ie(e,i);case 4:case"end":return t.stop()}}),t)})))()},getApps:function(e,t){var r=t.cancelToken,a=t.type;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.rootState,a){t.next=3;break}return t.abrupt("return");case 3:return i={cancelToken:r,url:n.url.apps,data:{type:a}},t.next=6,le(e,i);case 6:case"end":return t.stop()}}),t)})))()},getOverviewMetrics:function(e,t){var r=t.cancelToken,a=t.appId;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.rootState,i=e.dispatch,a){t.next=3;break}return t.abrupt("return",{});case 3:return o={cancelToken:r,url:n.url.overviewMetrics,data:{appId:a}},t.abrupt("return",i("request",o,{root:!0}));case 5:case"end":return t.stop()}}),t)})))()},getMainMetrics:function(e,t){var r=t.cancelToken,a=t.urlKey,n=t.appId;return Object(f["a"])(regeneratorRuntime.mark((function t(){var i,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=e.rootState,o=e.dispatch,n){t.next=3;break}return t.abrupt("return");case 3:return s={cancelToken:r,url:i.url.mainMetrics,data:{appId:n,type:a}},t.abrupt("return",o("request",s,{root:!0}));case 5:case"end":return t.stop()}}),t)})))()}}};function de(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?de(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):de(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var fe=F("app",{}),he=fe.state,ve=fe.mutations,be=fe.handle,ge={namespaced:!0,state:pe({},he,{appId:void 0}),mutations:pe({},ve,{setAppId:function(e,t){e.appId=t}}),actions:{getAppInfo:function(e,t){return Object(f["a"])(regeneratorRuntime.mark((function r(){var a,n,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.state,n=e.rootState,i={cancelToken:t,url:n.url.app,data:{appId:a.appId}},r.next=4,be(e,i);case 4:case"end":return r.stop()}}),r)})))()}}};function ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ye(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Oe=F("agents",[]),we=Oe.state,_e=Oe.mutations,je=Oe.handle,xe=F("agent",[]),Pe=xe.state,ke=xe.mutations,De=xe.handle,Se={namespaced:!0,state:me({},we,{},Pe,{agentId:void 0,agentModal:void 0}),mutations:me({},_e,{},ke,{setAgentId:function(e,t){e.agentId=t},setAgentModal:function(e,t){var r=t.status;!0!==r&&!1!==r||(e.agentModal=r)}}),actions:{getAgents:function(e,t){return Object(f["a"])(regeneratorRuntime.mark((function r(){var a,n,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.rootState,n=e.rootGetters,i={cancelToken:t,url:a.url.agents,data:{appId:n.appId}},r.next=4,je(e,i,"list","array");case 4:case"end":return r.stop()}}),r)})))()},getAgentInfo:function(e,t){var r=t.cancelToken;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,n,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.state,n=e.rootState,i=e.rootGetters,o={cancelToken:r,url:n.url.agentInfo,data:{appId:i.appId,agentId:a.agentId}},t.next=4,De(e,o,"list","array");case 4:case"end":return t.stop()}}),t)})))()}}};function Te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ae=F("processes",[]),Me=Ae.state,Ee=Ae.mutations,Ie=Ae.handle,Ne=F("xprofiler_processes",{}),Re=Ne.state,Le=Ne.mutations,Fe=Ne.handle,$e=F("xprofiler_status",void 0),ze=$e.state,Be=$e.mutations,Ue=$e.handle,Ge=F("save_trend",void 0),He=Ge.state,We=Ge.mutations,Xe=Ge.handle,qe=F("take_action",void 0),Ke=qe.state,Ye=qe.mutations,Ve=qe.handle,Qe={namespaced:!0,state:Ce({},Me,{},Re,{},ze,{},He,{},Ke,{xprofilerStatusModal:void 0,xprofilerCheckPid:void 0,processTrendDrawer:void 0,processTrendData:{},processesDrawer:void 0,saveTrendModal:void 0,saveTrendData:{},takeActionModal:void 0,takeActionData:{},colors:["rgb(42, 125, 194)","rgb(106, 90, 205)","rgb(19, 141, 117)","rgb(215, 124, 0)","rgb(186, 74, 0)","rgb(46, 134, 193)","rgb(136, 78, 160)","rgb(41, 145, 65)","rgb(34, 153, 84)"],diedProcessColor:"rgb(193, 197, 206)"}),mutations:Ce({},Ee,{},Le,{},Be,{},We,{},Ye,{setXprofilerStatusModal:function(e,t){var r=t.status,a=t.pid;!1!==r&&!0!==r||(e.xprofilerStatusModal=r),_(a)&&(e.xprofilerCheckPid=a)},setSaveTrendModal:function(e,t){var r=t.status,a=t.processData;!1!==r&&!0!==r||(e.saveTrendModal=r),a&&(e.saveTrendData=a)},setTakeActionModal:function(e,t){var r=t.status,a=t.actionData;!1!==r&&!0!==r||(e.takeActionModal=r),a&&(e.takeActionData=a)},setProcessTrendDrawer:function(e,t){var r=t.status,a=t.processData;!1!==r&&!0!==r||(e.processTrendDrawer=r),a&&(e.processTrendData=a)},setProcessesDrawer:function(e,t){var r=t.status;!1!==r&&!0!==r||(e.processesDrawer=r)}}),getters:{processCount:function(e){return e.processes_data.length}},actions:{getNodeProcesses:function(e,t){return Object(f["a"])(regeneratorRuntime.mark((function r(){var a,n,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.rootState,n=e.rootGetters,i={cancelToken:t,url:a.url.agentNodeProcesses,data:{appId:n.appId,agentId:n.agentId}},r.next=4,Ie(e,i,"list","array");case 4:case"end":return r.stop()}}),r)})))()},getXprofilerProcesses:function(e,t){return Object(f["a"])(regeneratorRuntime.mark((function r(){var a,n,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.rootState,n=e.rootGetters,i={cancelToken:t,url:a.url.agentXprofilerProcesses,data:{appId:n.appId,agentId:n.agentId}},r.next=4,Fe(e,i);case 4:case"end":return r.stop()}}),r)})))()},getXprofilerStatus:function(e,t){var r=t.cancelToken,a=t.pid;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.rootState,i=e.rootGetters,o={cancelToken:r,url:n.url.xprofilerStatus,data:{appId:i.appId,agentId:i.agentId,pid:a}},t.next=4,Ue(e,o);case 4:case"end":return t.stop()}}),t)})))()},getProcessTrend:function(e,t){var r=t.cancelToken,a=t.trendType,n=t.duration;return Object(f["a"])(regeneratorRuntime.mark((function t(){var i,o,s,c,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.state,o=e.dispatch,s=e.rootState,c=e.rootGetters,l={cancelToken:r,url:s.url.processTrend,data:{appId:c.appId,agentId:c.agentId,pid:i.processTrendData.pid,trendType:a,duration:n}},t.abrupt("return",o("request",l,{root:!0}));case 3:case"end":return t.stop()}}),t)})))()},saveProcessTrend:function(e,t){var r=t.cancelToken;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,n,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.state,n=e.rootState,i=e.rootGetters,o={cancelToken:r,method:"POST",url:n.url.processTrend,data:{appId:i.appId,agentId:i.agentId,pid:a.saveTrendData.pid}},t.next=4,Xe(e,o,"file");case 4:case"end":return t.stop()}}),t)})))()},takeAction:function(e,t){var r=t.cancelToken,a=t.status;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,i,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.state,i=e.rootState,o=e.rootGetters,s={cancelToken:r,method:"POST",url:i.url.action,data:{appId:o.appId,agentId:o.agentId,pid:n.takeActionData.pid,action:n.takeActionData.action,status:a}},t.next=4,Ve(e,s,"file");case 4:case"end":return t.stop()}}),t)})))()}}};function Ze(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Je(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ze(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var et=F("overview",{}),tt=et.state,rt=et.mutations,at=et.handle,nt={namespaced:!0,state:Je({},tt),mutations:Je({},rt),actions:{getSystemOverview:function(e,t){var r=t.cancelToken;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.rootGetters,n=e.rootState,i={cancelToken:r,url:n.url.overview,data:{appId:a.appId,agentId:a.agentId}},t.next=4,at(e,i);case 4:case"end":return t.stop()}}),t)})))()},getSystemTrend:function(e,t){var r=t.cancelToken,a=t.trendType,n=t.duration;return Object(f["a"])(regeneratorRuntime.mark((function t(){var i,o,s,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.dispatch,o=e.rootState,s=e.rootGetters,c={cancelToken:r,url:o.url.systemTrend,data:{appId:s.appId,agentId:s.agentId,trendType:a,duration:n}},t.abrupt("return",i("request",c,{root:!0}));case 3:case"end":return t.stop()}}),t)})))()}}};function it(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ot(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?it(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):it(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var st=F("files",[]),ct=st.state,lt=st.mutations,ut=st.handle,dt=F("logs",{list:[],count:0}),pt=dt.state,ft=dt.mutations,ht=dt.handle,vt={namespaced:!0,state:ot({},ct,{},pt,{errorFile:void 0}),mutations:ot({},lt,{},ft,{setErrorFile:function(e,t){e.errorFile=t}}),actions:{getErrorFiles:function(e,t){var r=t.cancelToken;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.rootState,n=e.rootGetters,i={cancelToken:r,url:a.url.errorFiles,data:{appId:n.appId,agentId:n.agentId}},t.next=4,ut(e,i,"list","array");case 4:case"end":return t.stop()}}),t)})))()},getErrorLogs:function(e,t){var r=t.cancelToken,a=t.currentPage,n=t.pageSize;return Object(f["a"])(regeneratorRuntime.mark((function t(){var i,o,s,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.state,o=e.rootState,s=e.rootGetters,c={cancelToken:r,url:o.url.errorLogs,data:{appId:s.appId,agentId:s.agentId,errorFile:i.errorFile,currentPage:a,pageSize:n}},t.next=4,ht(e,c);case 4:case"end":return t.stop()}}),t)})))()}}};function bt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function gt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var yt=F("files",[]),mt=yt.state,Ot=yt.mutations,wt=yt.handle,_t=F("module",{}),jt=_t.state,xt=_t.mutations,Pt=_t.handle,kt={namespaced:!0,state:gt({},mt,{},jt,{moduleFile:void 0,riskModules:void 0,showDependencies:void 0,riskDetailModal:void 0,riskModalData:{}}),mutations:gt({},Ot,{},xt,{setModuleFile:function(e,t){e.moduleFile=t},setShowDependencies:function(e,t){!0!==t&&!1!==t||(e.showDependencies=t)},setRiskModules:function(e,t){e.riskModules=t},setRiskDetailModal:function(e,t){var r=t.status,a=t.riskModalData;!1!==r&&!0!==r||(e.riskDetailModal=r),a&&(e.riskModalData=a)}}),actions:{getModuleFiles:function(e,t){var r=t.cancelToken;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.rootState,n=e.rootGetters,i={cancelToken:r,url:a.url.moduleFiles,data:{appId:n.appId,agentId:n.agentId}},t.next=4,wt(e,i,"list","array");case 4:case"end":return t.stop()}}),t)})))()},getModule:function(e,t){var r=t.cancelToken;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,n,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.state,n=e.rootState,i=e.rootGetters,o={cancelToken:r,url:n.url.module,data:{appId:i.appId,agentId:i.agentId,moduleFile:a.moduleFile}},t.next=4,Pt(e,o);case 4:case"end":return t.stop()}}),t)})))()}}};function Dt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function St(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Dt(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Tt=F("upload",void 0),Ct=Tt.state,At=Tt.mutations,Mt=Tt.handle,Et=F("files",{list:[],count:0}),It=Et.state,Nt=Et.mutations,Rt=Et.handle,Lt={namespaced:!0,state:St({},Ct,{},It,{fileTypes:[{label:"CPU Profile",value:"cpuprofile",icon:"ios-stopwatch"},{label:"Heap Profile",value:"heapprofile",icon:"ios-timer"},{label:"GC 追踪",value:"gcprofile",icon:"ios-locate"},{label:"堆快照",value:"heapsnapshot",icon:"md-camera"},{label:"诊断报告",value:"diag",icon:"md-medkit"},{label:"核心转储",value:"core",icon:"md-list-box"},{label:"进程趋势",value:"trend",icon:"ios-podium"}],nessaryQueryArgs:["filterType"],uploadModal:void 0,filterType:void 0,errorModal:void 0,errorModalData:{},fileDeletionModal:void 0,deletionData:{}}),getters:{normalValidTypes:function(e){return e.fileTypes.map((function(e){return e.value})).filter((function(e){return"core"!==e}))},filterTypes:function(e){var t=e.fileTypes.map((function(e){return e}));return t.unshift({label:"全部",value:"all"}),t.push({label:"收藏",value:"favor"}),t},getIconByType:function(e){return function(t){var r=e.fileTypes,a="",n=!0,i=!1,o=void 0;try{for(var s,c=r[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){var l=s.value;l.value===t&&l.icon&&(a=l.icon)}}catch(u){i=!0,o=u}finally{try{n||null==c.return||c.return()}finally{if(i)throw o}}return a}},getLabelByType:function(e){return function(t){var r=e.fileTypes,a="Unknown",n=!0,i=!1,o=void 0;try{for(var s,c=r[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){var l=s.value;l.value===t&&(a=l.label)}}catch(u){i=!0,o=u}finally{try{n||null==c.return||c.return()}finally{if(i)throw o}}return a}}},mutations:St({},At,{},Nt,{setUploadModal:function(e,t){var r=t.status;!1!==r&&!0!==r||(e.uploadModal=r)},setErrorModal:function(e,t){var r=t.status,a=t.error;!1!==r&&!0!==r||(e.errorModal=r),!1!==r||a||setTimeout((function(){return e.errorModalData={}}),10),a&&(e.errorModalData=a)},setDeletionModal:function(e,t){var r=t.status,a=t.data;!1!==r&&!0!==r||(e.fileDeletionModal=r),!1!==r||a||setTimeout((function(){return e.deletionData={}}),10),a&&(e.deletionData=a)},setFilterType:function(e,t){e.filterType=t}}),actions:{uploadFile:function(e,t){var r=t.cancelToken,a=t.formData,n=t.fileType;return Object(f["a"])(regeneratorRuntime.mark((function t(){var i,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.rootState,o=e.rootGetters,s={cancelToken:r,method:"POST",url:"".concat(i.url.uploadFile,"?appId=").concat(o.appId,"&fileType=").concat(n),data:a},t.next=4,Mt(e,s,"file");case 4:case"end":return t.stop()}}),t)})))()},getFiles:function(e,t){var r=t.cancelToken,a=t.filterType,n=t.currentPage,i=t.pageSize;return Object(f["a"])(regeneratorRuntime.mark((function t(){var o,s,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=e.rootState,s=e.rootGetters,c={cancelToken:r,url:o.url.fileList,data:{appId:s.appId,filterType:a,currentPage:n,pageSize:i}},t.next=4,Rt(e,c);case 4:case"end":return t.stop()}}),t)})))()},doFavor:function(e,t){var r=t.cancelToken,a=t.fileId,n=t.fileType,i=t.favor;return Object(f["a"])(regeneratorRuntime.mark((function t(){var o,s,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=e.dispatch,s=e.rootState,c={cancelToken:r,method:"POST",url:s.url.fileFavor,data:{fileId:a,fileType:n,favor:i}},t.abrupt("return",o("request",c,{root:!0}));case 3:case"end":return t.stop()}}),t)})))()},doTransfer:function(e,t){var r=t.cancelToken,a=t.fileId,n=t.fileType;return Object(f["a"])(regeneratorRuntime.mark((function t(){var i,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.dispatch,o=e.rootState,s={cancelToken:r,method:"POST",url:o.url.fileTransfer,data:{fileId:a,fileType:n}},t.abrupt("return",i("request",s,{root:!0}));case 3:case"end":return t.stop()}}),t)})))()},deleteFile:function(e,t){var r=t.cancelToken,a=t.fileId,n=t.fileType;return Object(f["a"])(regeneratorRuntime.mark((function t(){var i,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.dispatch,o=e.rootState,s={cancelToken:r,method:"DELETE",url:o.url.fileDeletion,data:{fileId:a,fileType:n}},t.abrupt("return",i("request",s,{root:!0}));case 3:case"end":return t.stop()}}),t)})))()},checkFileStatus:function(e,t){var r=t.cancelToken,a=t.files;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.dispatch,i=e.rootState,o={cancelToken:r,method:"POST",url:i.url.fileStatus,data:{files:a}},t.abrupt("return",n("request",o,{root:!0}));case 3:case"end":return t.stop()}}),t)})))()}}},Ft={namespaced:!0,state:{diagDrawer:void 0,diagData:{},gcDrawer:void 0,gcData:{},trendDrawer:void 0,trendData:{},flamegraphDrawer:void 0,flamegraphData:{},snapshotDrawer:void 0,snapshotData:{}},mutations:{setDiagDrawer:function(e,t){var r=t.status,a=t.diagData;!1!==r&&!0!==r||(e.diagDrawer=r),a&&(e.diagData=a)},setGcDrawer:function(e,t){var r=t.status,a=t.gcData;!1!==r&&!0!==r||(e.gcDrawer=r),a&&(e.gcData=a)},setTrendDrawer:function(e,t){var r=t.status,a=t.trendData;!1!==r&&!0!==r||(e.trendDrawer=r),a&&(e.trendData=a)},setFlamegraphDrawer:function(e,t){var r=t.status,a=t.flamegraphData;!1!==r&&!0!==r||(e.flamegraphDrawer=r),a&&(e.flamegraphData=a)},setSnapshotDrawer:function(e,t){var r=t.status,a=t.snapshotData;!1!==r&&!0!==r||(e.snapshotDrawer=r),a&&(e.snapshotData=a)}}};function $t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function zt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$t(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Bt=F("file",void 0),Ut=Bt.state,Gt=Bt.mutations,Ht=Bt.handle,Wt={namespaced:!0,state:zt({},Ut),mutations:zt({},Gt),actions:{downloadFile:function(e,t){var r=t.cancelToken,a=t.fileId,n=t.fileType;return Object(f["a"])(regeneratorRuntime.mark((function t(){var i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.rootState,o={cancelToken:r,rawData:!0,headers:{"accept-encoding":"gzip"},url:i.url.downloadFile,data:{fileId:a,fileType:n}},t.next=4,Ht(e,o);case 4:case"end":return t.stop()}}),t)})))()}}},Xt={namespaced:!0,state:{diagTab:void 0,uvType:void 0},mutations:{setDiagTab:function(e,t){e.diagTab=t},setUvType:function(e,t){e.uvType=t}}},qt={namespaced:!0,state:{snapshotTab:void 0},mutations:{setSnapshotTab:function(e,t){e.snapshotTab=t}}},Kt=(r("a623"),r("b0c0"),{namespaced:!0,state:{gcFile:void 0},mutations:{setGcFileData:function(e,t){e.gcFile=t}},getters:{startTime:function(e){var t=e.gcFile.startTime,r=void 0===t?0:t;return 1e3*r},stopTime:function(e){var t=e.gcFile.stopTime,r=void 0===t?0:t;return 1e3*r},gcList:function(e){var t=e.gcFile.gc;return Array.isArray(t)?t:[]},pauseTime:function(e){var t=e.gcFile.gc,r=[],a=!0,n=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(a=(o=s.next()).done);a=!0){var c=o.value;r.push(+(c.end-c.start))}}catch(l){n=!0,i=l}finally{try{a||null==s.return||s.return()}finally{if(n)throw i}}return r},pauseTimeWithStart:function(e,t){for(var r=e.gcFile.gc,a=[],n=0;n<r.length;n++){var i=r[n],o=Number(((t.calculateSize(i.after)-t.calculateSize(i.before))/1024/1024).toFixed(2));a.push({pause:+(i.end-i.start),timeFromStart:1e3*i.timeFromStart,type:i.type,change:o,changeLabel:o>=0?"+".concat(o):"-".concat(Math.abs(o)),changeAbs:Math.abs(o),positive:o>0,index:n+1})}return a},memoryChange:function(e,t){var r=e.gcFile.gc;return r.map((function(e){var r=t.calculateSize(e.after)-t.calculateSize(e.before);return r/1024/1024}))},heapTrendWithStart:function(e,t){var r=e.gcFile.gc;return r.map((function(e,r){return{timeFromStart:1e3*e.timeFromStart,heap_size:Number((t.calculateSize(e.after)/1024/1024).toFixed(2)),type:e.type,index:r+1}}))},spaceTrendWithStart:function(e,t){var r,a=e.gcFile.gc,n=a.map((function(e,a){var n=e.type,i=e.before,o=e.after,s=e.timeFromStart,c=t.getSpacesMap(i),l=t.getSpacesMap(o);r||(r=Object.keys(c));var u={type:n,index:a+1,timeFromStart:1e3*s},d=0,p=0,f=!0,h=!1,v=void 0;try{for(var b,g=r[Symbol.iterator]();!(f=(b=g.next()).done);f=!0){var y=b.value,m=(l[y]-c[y])/1024/1024;d+=m,p+=Math.abs(m),u[y]=Math.abs(m),u["".concat(y,"_positive")]=m>0}}catch(O){h=!0,v=O}finally{try{f||null==g.return||g.return()}finally{if(h)throw v}}return u["all_spaces"]=Math.abs(d),u["all_spaces_positive"]=d>0,u["all_size_abs"]=p,u}));return r.push("all_spaces"),r=r.filter((function(e){return!n.every((function(t){return 0===t[e]}))})),r=r.map((function(e){var t=e;return"new_large_object_space"===t&&(t="new_lo_space"),"large_object_space"===t&&(t="lo_space"),"code_large_object_space"===t&&(t="code_lo_space"),{label:t,value:e}})),{spaces:r,list:n}},calculateSize:function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"space_used_size",r=0,a=!0,n=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done);a=!0){var c=o.value;r+=c[t]}}catch(l){n=!0,i=l}finally{try{a||null==s.return||s.return()}finally{if(n)throw i}}return r}},getSpacesMap:function(){return function(e){var t={},r=!0,a=!1,n=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var s=i.value,c=s.name,l=s.space_used_size;t[c]=l}}catch(u){a=!0,n=u}finally{try{r||null==o.return||o.return()}finally{if(a)throw n}}return t}}}});function Yt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Vt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yt(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Qt=F("members",[]),Zt=Qt.state,Jt=Qt.mutations,er=Qt.handle,tr={namespaced:!0,state:Vt({},Zt,{confirmModal:void 0,confirmData:{}}),getters:{createConfirmData:function(){return function(e,t,r,a){return{type:e,title:t,content:r,success:!1,loading:!1,error:void 0,data:a}}}},mutations:Vt({},Jt,{setConfirmModal:function(e,t){var r=t.status,a=t.data;!1!==r&&!0!==r||(e.confirmModal=r),a&&(e.confirmData=a)}}),actions:{getTeamMembers:function(e,t){var r=t.cancelToken;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.rootState,n=e.rootGetters,i={cancelToken:r,url:a.url.members,data:{appId:n.appId}},t.next=4,er(e,i);case 4:case"end":return t.stop()}}),t)})))()},updateInviationStatus:function(e,t){var r=t.cancelToken,a=t.appId,n=t.status;return Object(f["a"])(regeneratorRuntime.mark((function t(){var i,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.rootState,o=e.dispatch,s={cancelToken:r,method:"PUT",url:i.url.invitation,data:{appId:a,status:n}},t.next=4,o("request",s,{root:!0});case 4:case"end":return t.stop()}}),t)})))()},commonAction:function(e,t){return Object(f["a"])(regeneratorRuntime.mark((function r(){var a,n,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.dispatch,n=e.commit,i=e.state,i.confirmData.loading=!0,r.prev=2,r.next=5,a("request",t,{root:!0});case 5:i.confirmData.success=!0,n("setConfirmModal",{status:!1}),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](2),i.confirmData.error=r.t0.message;case 12:i.confirmData.loading=!1;case 13:case"end":return r.stop()}}),r,null,[[2,9]])})))()},inviteMember:function(e,t){var r=t.cancelToken,a=t.userId;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,i,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.rootState,i=e.rootGetters,o=e.dispatch,s={cancelToken:r,method:"POST",url:n.url.member,data:{appId:i.appId,userId:a}},t.next=4,o("commonAction",s);case 4:case"end":return t.stop()}}),t)})))()},deleteMember:function(e,t){var r=t.cancelToken,a=t.userId;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,i,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.rootState,i=e.rootGetters,o=e.dispatch,s={cancelToken:r,method:"DELETE",url:n.url.member,data:{appId:i.appId,userId:a}},t.next=4,o("commonAction",s);case 4:case"end":return t.stop()}}),t)})))()},transferOwnership:function(e,t){var r=t.cancelToken,a=t.userId;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,i,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.rootState,i=e.rootGetters,o=e.dispatch,s={cancelToken:r,method:"POST",url:n.url.ownership,data:{appId:i.appId,userId:a}},t.next=4,o("commonAction",s);case 4:case"end":return t.stop()}}),t)})))()},leaveTeam:function(e,t){var r=t.cancelToken;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,n,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.rootState,n=e.rootGetters,i=e.dispatch,o={cancelToken:r,method:"DELETE",url:a.url.leaveTeam,data:{appId:n.appId}},t.next=4,i("commonAction",o);case 4:case"end":return t.stop()}}),t)})))()}}};function rr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ar(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rr(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var nr=F("rules",[]),ir=nr.state,or=nr.mutations,sr=nr.handle,cr={namespaced:!0,state:ar({},ir,{tipModal:void 0,tipData:{},contactsModal:void 0,contactsData:{},historyDrawer:void 0,historyData:{},editModel:!1,editData:{}}),getters:{formatContextType:function(){return function(e){var t="";switch(e){case"xprofiler_log":t="X-Profiler 插件日志";break;case"xtransit_notification":t="X-Transit 通知信息";break;case"system_log":t="操作系统指标日志";break;case"error_log":t="Node 应用错误日志";break;default:break}return t}}},mutations:ar({},or,{resetState:function(e){e.tipModal=void 0,e.tipData={},e.editModel=!1,e.editData={}},setTipModal:function(e,t){var r=t.status,a=t.data;!1!==r&&!0!==r||(e.tipModal=r),a&&(e.tipData=a)},setContactsModal:function(e,t){var r=t.status,a=t.data;!1!==r&&!0!==r||(e.contactsModal=r),a&&(e.contactsData=a)},setHistoryDrawer:function(e,t){var r=t.status,a=t.historyData;!1!==r&&!0!==r||(e.historyDrawer=r),a&&(e.historyData=a)},setEditModel:function(e,t){var r=t.status,a=t.data;!1!==r&&!0!==r||(e.editModel=r),a&&(e.editData=a)}}),actions:{getRules:function(e,t){var r=t.cancelToken;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.rootState,n=e.rootGetters,i={cancelToken:r,url:a.url.strategies,data:{appId:n.appId}},t.next=4,sr(e,i,"list","array");case 4:case"end":return t.stop()}}),t)})))()},postRule:function(e,t){var r=t.cancelToken,a=t.data;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,i,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.rootState,i=e.rootGetters,o=e.dispatch,s={cancelToken:r,method:"POST",url:n.url.strategy,data:ar({appId:i.appId},a)},t.next=4,o("request",s,{root:!0});case 4:case"end":return t.stop()}}),t)})))()},putRule:function(e,t){var r=t.cancelToken,a=t.data;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.rootState,i=e.dispatch,o={cancelToken:r,method:"PUT",url:n.url.strategy,data:a},t.next=4,i("request",o,{root:!0});case 4:case"end":return t.stop()}}),t)})))()},deleteRule:function(e,t){var r=t.cancelToken,a=t.data;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.rootState,i=e.dispatch,o={cancelToken:r,method:"DELETE",url:n.url.strategy,data:a},t.next=4,i("request",o,{root:!0});case 4:case"end":return t.stop()}}),t)})))()},putRuleStatus:function(e,t){var r=t.cancelToken,a=t.data;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.rootState,i=e.dispatch,o={cancelToken:r,method:"PUT",url:n.url.strategyStatus,data:a},t.next=4,i("request",o,{root:!0});case 4:case"end":return t.stop()}}),t)})))()}}};function lr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ur(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lr(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var dr=F("contacts",{remainMembers:[],contacts:[]}),pr=dr.state,fr=dr.mutations,hr=dr.handle,vr={namespaced:!0,state:ur({},pr),mutations:ur({},fr),actions:{getContacts:function(e,t){var r=t.cancelToken,a=t.strategyId;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.rootState,i={cancelToken:r,url:n.url.strategyContacts,data:{strategyId:a}},t.next=4,hr(e,i);case 4:case"end":return t.stop()}}),t)})))()},removeContact:function(e,t){var r=t.cancelToken,a=t.data;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.rootState,i=e.dispatch,o={cancelToken:r,method:"DELETE",url:n.url.strategyContact,data:a},t.next=4,i("request",o,{root:!0});case 4:case"end":return t.stop()}}),t)})))()},addContact:function(e,t){var r=t.cancelToken,a=t.data;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.rootState,i=e.dispatch,o={cancelToken:r,method:"POST",url:n.url.strategyContact,data:a},t.next=4,i("request",o,{root:!0});case 4:case"end":return t.stop()}}),t)})))()}}};function br(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function gr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?br(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):br(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var yr=F("history",{count:0,list:[]}),mr=yr.state,Or=yr.mutations,wr=yr.handle,_r={namespaced:!0,state:gr({},mr),mutations:gr({},Or),actions:{getAlarmHistory:function(e,t){var r=t.cancelToken,a=t.data;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.rootState,i={cancelToken:r,url:n.url.strategyHistory,data:a},t.next=4,wr(e,i);case 4:case"end":return t.stop()}}),t)})))()}}};function jr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function xr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jr(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Pr=F("settings",{}),kr=Pr.state,Dr=Pr.mutations,Sr=Pr.handle,Tr={namespaced:!0,state:xr({},kr,{modifyModal:void 0,deleteModal:void 0}),mutations:xr({},Dr,{setModifyModal:function(e,t){var r=t.status;!1!==r&&!0!==r||(e.modifyModal=r)},setDeleteModal:function(e,t){var r=t.status;!1!==r&&!0!==r||(e.deleteModal=r)},updateSettingsAppName:function(e,t){e.settings_data.name=t}}),actions:{getSettingsInfo:function(e,t){var r=t.cancelToken;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.rootState,n=e.rootGetters,i={cancelToken:r,url:a.url.settings,data:{appId:n.appId}},t.next=4,Sr(e,i);case 4:case"end":return t.stop()}}),t)})))()},putNewAppName:function(e,t){var r=t.cancelToken,a=t.newAppName;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,i,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.rootState,i=e.rootGetters,o=e.dispatch,s={cancelToken:r,method:"PUT",url:n.url.settingsAppName,data:{appId:i.appId,newAppName:a}},t.next=4,o("request",s,{root:!0});case 4:case"end":return t.stop()}}),t)})))()},deleteApp:function(e,t){var r=t.cancelToken;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,n,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.rootState,n=e.rootGetters,i=e.dispatch,o={cancelToken:r,method:"DELETE",url:a.url.settingsApp,data:{appId:n.appId}},t.next=4,i("request",o,{root:!0});case 4:case"end":return t.stop()}}),t)})))()}}};function Cr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Ar(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Cr(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Mr={state:Ar({},W,{},X,{globalError:void 0,first:!0}),getters:{appId:function(e){return e.dashboard.appId},agentId:function(e){return e.dashboard.instance.agentId}},mutations:{updateGlobalError:function(e,t){e.globalError=t},first:function(e,t){e.first=t}},actions:{request:function(e,t){var r=e.commit,a=t.url,n=t.method,i=void 0===n?"GET":n,o=t.cancelToken,s=t.data,c=void 0===s?{}:s,l=t.globalError,u=void 0!==l&&l,d=t.rawData,p=void 0!==d&&d;return Object(f["a"])(regeneratorRuntime.mark((function e(){var t,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o){e.next=2;break}throw new Error("cancel token should be passed in!");case 2:return t={},"GET"===i?t.params=c:t.data=c,"GET"!==i&&(t.headers={"x-csrf-token":P()}),e.prev=5,e.next=8,b()(Object.assign({url:a,method:i,cancelToken:o},t));case 8:if(n=e.sent,s=n.data,!p){e.next=12;break}return e.abrupt("return",s);case 12:if(s.ok){e.next=14;break}throw new Error(s.message||"unknown inner server error");case 14:return e.abrupt("return",s.data||{});case 17:if(e.prev=17,e.t0=e["catch"](5),!b.a.isCancel(e.t0)){e.next=21;break}return e.abrupt("return",{});case 21:if(!u){e.next=25;break}r("updateGlobalError",e.t0),e.next=26;break;case 25:throw e.t0;case 26:case"end":return e.stop()}}),e,null,[[5,17]])})))()}},modules:{user:Ar({},J),consoler:Ar({},ue),dashboard:Ar({},ge,{modules:{instance:Ar({},Se,{modules:{process:Ar({},Qe),system:Ar({},nt),errors:Ar({},vt),modules:Ar({},kt)}}),file:Ar({},Lt,{modules:{wrapper:Ar({},Ft)}}),team:Ar({},tr),alarm:Ar({},cr,{modules:{contact:Ar({},vr),history:Ar({},_r)}}),settings:Ar({},Tr),analytics:Ar({},Wt,{modules:{diag:Ar({},Xt),snapshot:Ar({},qt),gc:Ar({},Kt)}})}})}},Er=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Layout",[r("x-header",{attrs:{active:"console",owner:"myApps"===e.selectedType}}),r("Content",{staticClass:"content"},[r("transition",{attrs:{name:"slide-button"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:"myApps"===e.selectedType,expression:"selectedType === 'myApps'"}],staticClass:"create-new-app"},[r("Button",{attrs:{type:"primary",ghost:""},on:{click:e.showNewAppCreation}},[r("Icon",{staticClass:"new-app-icon",attrs:{type:"md-person-add"}}),e._v(" "+e._s(e.newAppCreationTag)+" ")],1)],1)]),r("Tabs",{staticClass:"app-tab",model:{value:e.selectedType,callback:function(t){e.selectedType=t},expression:"selectedType"}},[r("TabPane",{attrs:{label:e.myApps,name:"myApps"}}),r("TabPane",{attrs:{label:e.joinedApps,name:"joinedApps"}})],1),r("x-apps",{ref:"appList",attrs:{type:e.selectedType}})],1),r("Footer",{staticClass:"footer"},[e._v(" 2020 © "),r("a",{attrs:{href:"https://github.com/hyj1991/easy-monitor",target:"_blank"}},[e._v("Easy-Monitor")]),e._v(" 3.0 Powered by "),r("a",{attrs:{href:"https://eggjs.org/",target:"_blank"}},[r("x-egg-logo",{staticClass:"egg-logo"})],1)])],1),r("x-modal",{ref:"newApp",attrs:{title:e.newAppCreationTag,padding:0,"hide-footer":""},on:{canceled:e.closeNewAppModal}},[r("x-create-app",{attrs:{slot:"content"},on:{refresh:e.refreshApps},slot:"content"})],1)],1)},Ir=[],Nr={docs:{ch:"使用指南",en:"Document"},console:{ch:"控制台",en:"Console"},lang:{ch:"切换英文",en:"Chinese"},myApps:{ch:"我的应用",en:"My Apps"},joinedApps:{ch:"加入的应用",en:"Joined Apps"},illegalType:{ch:"不合法的参数：",en:"Illegal query type:"},newAppCreation:{ch:"创建新应用",en:"New Application"},newAppName:{ch:"应用名称",en:"App Name"},newAppNamePlaceholder:{ch:"请输入您的应用名称",en:"Input your new application name"},newAppNameAttention:{ch:"注意",en:"Attention"},newAppNameAttentionDetail:{ch:"应用名称最大长度不能超过 30 个字符",en:"Length of the application name cannot exceed 30 characters."},submit:{ch:"提交",en:"Submit"},submitting:{ch:"提交中...",en:"submitting..."},close:{ch:"关闭",en:"Close"},instance:{ch:"实例",en:"agent"},file:{ch:"文件",en:"file"},team:{ch:"团队",en:"team"},alarm:{ch:"告警",en:"alarm"},settings:{ch:"设置",en:"setting"},instanceCount:{ch:"实例个数",en:"agents"},alarmCount:{ch:"24h 告警数",en:"alarms (24h)"},rsikCount:{ch:"依赖风险数",en:"risk modules"},processCpuUsage:{ch:"Node.js 进程 CPU 负载",en:"cpu status"},processMemoryUsage:{ch:"Node.js 进程堆内存状态",en:"heap memory status"},systemCpuUsage:{ch:"系统整体 CPU 负载",en:"system cpu status"},systemMemoryUsage:{ch:"系统整体可用内存状态",en:"system memory status"},diskUsage:{ch:"磁盘使用率",en:"disk usage"},noAppTipOnMyAccount:{ch:"您的账号下暂无应用，点击右上角【创建新应用】按钮可以创建新应用",en:"There is no application on your account, click the [New Application] button at the upper right corner to create."},noAppTipOnJoinedAccount:{ch:"您暂时没有加入任何应用",en:"You haven't added to any applications yet."},nameUnknown:{ch:"未知应用",en:"Unknown Application"},instanceTitle:{ch:"实例详情",en:"Agents"},fileTitle:{ch:"性能文件",en:"Files"},teamTitle:{ch:"团队协作",en:"Collaborators"},alarmTitle:{ch:"阈值告警",en:"Alerts"},settingTitle:{ch:"系统设置",en:"Settings"},checkAgent:{ch:"查看实例",en:"CHECK"},processTrend:{ch:"进程数据",en:"Process Data"},systemData:{ch:"系统监控",en:"System Info"},errorLog:{ch:"异常日志",en:"Error Log"},moduleRisk:{ch:"模块风险",en:"Security Risk"},choseInstance:{ch:"请选择实例 ID",en:"Chose agent"},noAgent:{ch:"没有相关实例 ID",en:"No agent"},lineTitle:{ch:"进程存活时间线",en:"Process Running Status"},cmd:{ch:"启动命令",en:"Command"},startTime:{ch:"启动时间",en:"Created Time"},updateTime:{ch:"更新时间",en:"Updated Time"},checkProcesses:{ch:"查看运行中的 Node.js 进程",en:"CHECK PROCESSES"},processList:{ch:"进程列表",en:"PROCESS"},cpuUsage:{ch:"CPU 使用率",en:"CPU"},heapMemory:{ch:"堆内存使用率",en:"HEAP"},gcUsage:{ch:"GC 占比",en:"GC"},rssUsage:{ch:"常驻内存占用",en:"RSS"},uvHandles:{ch:"UV 活跃句柄",en:"Active Handles"},timers:{ch:"定时器数量",en:"Timers"},tcpHandles:{ch:"TCP 句柄数",en:"TCP Handles"},udpHandles:{ch:"UDP 句柄数",en:"UDP Handles"},processDetail:{ch:"进程详细信息",en:"DETAIL"},checkXprofiler:{ch:"查看 X-Profiler 插件状态",en:"Check X-Profiler Status"},processDataTrend:{ch:"数据趋势",en:"Insights"},saveProcessData:{ch:"保存数据",en:"Save"},actions:{ch:"抓取性能数据",en:"ACTIONS"},cpuprofile:{ch:"CPU Profile",en:"CPU Profile"},heapsnapshot:{ch:"堆快照",en:"Heapsnapshot"},heapprofile:{ch:"Heap Profile",en:"Heap Profile"},gcprofile:{ch:"GC 追踪",en:"GC Trace"},diag:{ch:"实时诊断",en:"Trigger Node Report"},coredump:{ch:"Coredump",en:"Coredump"}};function Rr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Lr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rr(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Fr=m("consoler"),$r=Fr.mapState,zr=Fr.mapMutations,Br=Fr.mapActions,Ur=U("modalQueryKey","newAppModal","newApp","setNewAppModal"),Gr=Ur.mapMethods,Hr=Ur.mapWatch,Wr=Ur.handleMounted,Xr={created:function(){var e=this.$route.query;this.selectedType=e.type||"myApps",this.cancelToken=C()},mounted:function(){this.appList=this.$refs.appList,Wr.call(this,"handleNewAppModal")},beforeDestroy:function(){A(this.cancelToken)},methods:Lr({},Br(["createNewApp"]),{},zr(["setNewAppModal"]),{},Gr("handleNewAppModal"),{showNewAppCreation:function(){this.setNewAppModal({status:!0})},closeNewAppModal:function(){this.setNewAppModal({status:!1})},refreshApps:function(){this.appList.refreshApps()}}),computed:Lr({},$r(["newAppModal"]),{myApps:function(){return y(Nr.myApps)},joinedApps:function(){return y(Nr.joinedApps)},newAppCreationTag:function(){return y(Nr.newAppCreation)}}),watch:Lr({},Hr,{$route:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];I.call(this,t,"type","selectedType"),this.handleNewAppModal(t[0].query)},selectedType:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];N.call(this,"type","selectedType",t)}})},qr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Header",{staticClass:"header",style:e.headerStyle},[r("a",{staticClass:"logo",attrs:{href:"https://github.com/hyj1991/easy-monitor",target:"_blank"}},[r("Icon",{staticClass:"icon",attrs:{type:"md-desktop"}}),e._v("EZM 3.0 ")],1),e._l(e.navActions,(function(t,a){return r("span",{key:a,class:"nav-selection"+(t.active?" active":""),style:"text-align: center;"+("docs"!==t.value?"min-width: 100px;":""),on:{click:function(r){return e.activeNav(t)},mouseover:function(r){return e.mouseover(t)},mouseout:function(r){return e.mouseout(t)}}},["user"!==t.label?r("span",[e._v(e._s(t.label))]):r("x-dropdown",{staticClass:"panel-title-dropdown",attrs:{fontSize:14,paddingBottom:0,rawTop:35,minWidth:60,contentTop:10,contentBottom:10,"not-show-arrow":"",title:e.user.name}},[r("template",{slot:"content"},e._l(e.showInfo,(function(t,a){return r("div",{key:a,staticClass:"show-info x-dropdown-li"},[r("div",{staticClass:"info-key"},[e._v(e._s(t.key))]),r("div",{staticClass:"info-split"}),r("div",{staticClass:"info-value"},[e._v(e._s(t.value))])])})),0)],2)],1)}))],2)],1)},Kr=[];function Yr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Vr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yr(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Qr=m("user"),Zr=Qr.mapState,Jr=Qr.mapActions,ea={user:{name:"",id:null}},ta="MAIN_FLAG",ra={created:function(){this.cancelToken=C();var e=!0,t=!1,r=void 0;try{for(var a,n=this.navActions[Symbol.iterator]();!(e=(a=n.next()).done);e=!0){var i=a.value;i.value===this.active&&(i.active=!0)}}catch(o){t=!0,r=o}finally{try{e||null==n.return||n.return()}finally{if(t)throw r}}ea.user.name?(this.user.name=ea.user.name,this.user.id=ea.user.id):this.getUserInfo({cancelToken:this.cancelToken.token})},beforeDestroy:function(){A(this.cancelToken)},methods:Vr({},Jr(["getUserInfo"]),{resetActiveNav:function(){var e=!0,t=!1,r=void 0;try{for(var a,n=this.navActions[Symbol.iterator]();!(e=(a=n.next()).done);e=!0){var i=a.value;i.active=!1}}catch(o){t=!0,r=o}finally{try{e||null==n.return||n.return()}finally{if(t)throw r}}},activeNav:function(e){if(["console"].includes(e.value)){this.resetActiveNav(),e.active=!0;var t="/".concat(e.value);if(this.$route.path!==t){var r={};"console"===e.value&&(this.owner?r.type="myApps":r.type="joinedApps"),this.$router.push({path:t,query:r})}}else if("docs"===e.value)window.open("https://www.yuque.com/hyj1991/easy-monitor","_blank");else if(e.href){var a=this.$router.resolve({path:e.href}),n=a.href;window.open(n,"_blank")}},mouseover:function(e){e.active?e[ta]=!0:e.active=!0},mouseout:function(e){e[ta]?delete e[ta]:e.active=!1}}),computed:Vr({},Zr(["user_data"]),{headerStyle:function(){var e="";return this.color&&(e+="background-color: ".concat(this.color,";")),e},showInfo:function(){var e=this.user;return[{key:"工号",value:e.id}]}}),watch:{"user.name":function(){ea.user.name=this.user.name,ea.user.id=this.user.id},user_data:function(){var e=this.user_data||{};this.user.name=e.name||"Unknown",this.user.id=e.id||"Unknown"}}};function aa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function na(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?aa(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aa(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ia=na({props:{active:String,owner:Boolean,color:String},data:function(){return{user:{name:"",id:null},navActions:[{active:!1,label:y(Nr.docs),value:"docs",href:""},{active:!1,label:y(Nr.console),value:"console"},{active:!1,label:"user",value:"user",href:""}]}}},ra),oa=ia,sa=(r("ae92"),Object(u["a"])(oa,qr,Kr,!1,null,"4d1fff28",null)),ca=sa.exports,la=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("x-loading",{attrs:{top:"35vh",loading:e.app_list_loading,type:"dot"}}),"myApps"!==e.type||e.app_list_loading||e.app_list_load_error||!e.invitations.length?e._e():r("x-invitations",{staticClass:"invitations",attrs:{invitations:e.invitations},on:{refreshApps:e.refreshApps}}),r("x-error-message",{directives:[{name:"show",rawName:"v-show",value:e.app_list_load_error,expression:"app_list_load_error"}],attrs:{message:e.app_list_load_error,top:"calc(35vh - 20px)"}}),r("transition",{attrs:{name:"slide"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:!e.app_list_loading&&!e.app_list_load_error,expression:"!app_list_loading && !app_list_load_error"}]},[r("x-error-message",{directives:[{name:"show",rawName:"v-show",value:0===e.apps.length,expression:"apps.length === 0"}],attrs:{message:e.noAppTip,top:"calc(35vh - 20px)"}}),e._l(e.apps,(function(t,a){return r("div",{key:a,staticClass:"app",style:a===e.apps.length-1?"margin-bottom: 80px":""},[r("div",{staticClass:"app-border background-image-china-style",style:"background-color: "+e.randomColor(a)}),r("div",{staticClass:"app-content"},[r("div",{staticClass:"app-content-title"},[r("div",{staticClass:"app-content-title-name background-image-china-style",style:"background-color: "+e.randomColor(a)},[r("p",[e._v(e._s(t.name))]),r("div",{staticStyle:{display:"flex"}},e._l(e.functions,(function(a,n){return r("div",{key:n,staticClass:"app-title-content-metric",style:0!==n?"margin-left: 10px;":""},[a.disabled&&a.disabled===e.type?e._e():r("div",[r("p",{staticStyle:{"font-size":"11px"}},[e._v(e._s(a.label))]),r("Icon",{staticClass:"app-content-select",attrs:{type:a.icon},on:{click:function(r){return e.goToFunction(t.appId,a.value)}}})],1)])})),0)]),r("div",{staticClass:"app-content-title-metric"},e._l(e.metrics,(function(a,n){return r("div",{key:n},[r("p",{staticClass:"app-content-title-metric-key"},[e._v(e._s(a.label))]),r("x-loading",{attrs:{loading:t[a.value+"Loading"],size:"small"}}),r("transition",{attrs:{name:"slide-noward"}},[r("p",{directives:[{name:"show",rawName:"v-show",value:!t[a.value+"Loading"],expression:"!app[`${metric.value}Loading`]"}],staticClass:"app-content-title-metric-value app-content-select",on:{click:function(r){return e.goToFunction2(t.appId,a.value,t[a.value+"AgentId"])}}},[e._v(e._s(e.formatCount(t[a.value])))])])],1)})),0)]),r("div",{staticClass:"app-content-metrics"},[r("div",{staticStyle:{display:"flex",height:"100%","padding-bottom":"10px"}},e._l(e.mainMetrics,(function(a,n){return r("div",{key:n,staticClass:"app-content-metric"},[r("div",[e._v(e._s(a.label))]),r("x-loading",{attrs:{top:30,loading:t[a.value+"Loading"],size:"small",type:"dot"}}),r("transition",{attrs:{name:"slide-noward"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:!t[a.value+"Loading"]&&t[a.value]&&0===t[a.value].length,expression:"!app[`${metric.value}Loading`] && app[metric.value] && app[metric.value].length === 0"}],staticClass:"no-data"},[e._v("-")])]),r("transition",{attrs:{name:"slide-noward"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:!t[a.value+"Loading"]&&t[a.value]&&0!==t[a.value].length,expression:"!app[`${metric.value}Loading`] && app[metric.value] && app[metric.value].length !== 0"}]},[r("div",{staticClass:"instances"},e._l(t[a.value],(function(n,i){return r("Icon",{key:i,staticClass:"instance-ico",style:e.getInstanceStyle(n),attrs:{type:"md-egg",title:n.title},on:{click:function(r){return e.goToAgent(t.appId,a.value,n.agentId,n.pid)}}})})),1)])])],1)})),0)])])])}))],2)])],1)},ua=[];function da(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function pa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?da(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):da(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var fa=m("consoler"),ha=fa.mapState,va=fa.mapActions,ba="instanceCount",ga="alarmCount",ya="riskCount",ma="processCpuUsage",Oa="processMemoryUsage",wa="systemCpuUsage",_a="systemMemoryUsage",ja="diskUsage",xa={created:function(){this.cancelToken=C(),this.getApps({cancelToken:this.cancelToken.token,type:this.type})},beforeDestroy:function(){A(this.cancelToken)},methods:pa({},va(["getApps","getOverviewMetrics","getMainMetrics"]),{formatCount:function(e){if(!_(e))return e;var t=e;return e>9999&&(t=(t/1e3).toFixed(1)+"K"),t},randomColor:function(e){var t=this.colors.length,r=this.colors[e%t];return r},getInstanceStyle:function(e){var t="color: ";return 0===e.status?t+="#c5c8ce":1===e.status?t+="#2a9446":2==e.status?t+="#f89501":t+="#e33900",t},handleApps:function(e){var t=[],r=[],a=!0,n=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done);a=!0){var c=o.value,l=Object.assign({},c);r.push(l),t.push(l.appId),l[ba]=0,l["".concat(ba,"Loading")]=!0,l[ga]=0,l["".concat(ga,"Loading")]=!0,l[ya]=0,l["".concat(ya,"Loading")]=!0,l[ma]=[],l["".concat(ma,"Loading")]=!0,l[Oa]=[],l["".concat(Oa,"Loading")]=!0,l[wa]=[],l["".concat(wa,"Loading")]=!0,l[_a]=[],l["".concat(_a,"Loading")]=!0,l[ja]=[],l["".concat(ja,"Loading")]=!0,this.getOverviewMetricData([ba,ga,ya],l.appId),this.getMainMetricData(ma,l.appId),this.getMainMetricData(Oa,l.appId),this.getMainMetricData(wa,l.appId),this.getMainMetricData(_a,l.appId),this.getMainMetricData(ja,l.appId)}}catch(u){n=!0,i=u}finally{try{a||null==s.return||s.return()}finally{if(n)throw i}}return r},handleInvitations:function(e){return e.map((function(e){var t=Object.assign({},e,{rejectLoading:!1,confirmLoading:!1});return t}))},getAppByAppId:function(e){var t=this.apps.filter((function(t){return t.appId===e}));return t[0]},setDataToApps:function(e,t,r){var a=this.getAppByAppId(e);if(a){var n=!0,i=!1,o=void 0;try{for(var s,c=t[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){var l=s.value,u=r[l];_(u)?a[l]=u:a[l]="-";var d="".concat(l,"AgentId");r[d]&&(a[d]=r[d]),a["".concat(l,"Loading")]=!1}}catch(p){i=!0,o=p}finally{try{n||null==c.return||c.return()}finally{if(i)throw o}}}},setMainMetricDataToApp:function(e,t,r){var a=this.getAppByAppId(e);a&&(a[t]=r,a["".concat(t,"Loading")]=!1)},getOverviewMetricData:function(e,t){var r=this;this.getOverviewMetrics({cancelToken:this.cancelToken.token,appId:t}).then((function(a){return r.setDataToApps(t,e,a)})).catch((function(){return r.setDataToApps(t,e,{})}))},getMainMetricData:function(e,t){var r=this;this.getMainMetrics({cancelToken:this.cancelToken.token,urlKey:e,appId:t}).then((function(a){return r.setMainMetricDataToApp(t,e,a.list)})).catch((function(){return r.setMainMetricDataToApp(t,e,[])}))},goToFunction:function(e,t){this.$router.push({path:"/app/".concat(e,"/").concat(t)})},goToFunction2:function(e,t,r){var a="",n={};"instanceCount"===t?a="instance":"alarmCount"===t?a="alarm":"riskCount"===t&&(a="instance",n.tab="module_risk",n.agentId=r),this.$router.push({path:"/app/".concat(e,"/").concat(a),query:n})},goToAgent:function(e,t,r,a){var n={};"processCpuUsage"===t||"processMemoryUsage"===t?(n.tab="process",n.agentId=r,n.pid=a):(n.tab="system",n.agentId=r),this.$router.push({path:"/app/".concat(e,"/instance"),query:n})},refreshApps:function(){A(this.cancelToken),this.cancelToken=C(),this.getApps({cancelToken:this.cancelToken.token,type:this.type})}}),computed:pa({},ha(["app_list_loading","app_list_load_error","app_list_data"]),{noAppTip:function(){var e="";return e="myApps"===this.type?y(Nr.noAppTipOnMyAccount):y(Nr.noAppTipOnJoinedAccount),e}}),watch:{type:function(){this.refreshApps()},app_list_data:function(){var e=this.app_list_data,t=e.list,r=e.invitations;Array.isArray(t)&&(this.apps=this.handleApps(t)),Array.isArray(r)&&(this.invitations=this.handleInvitations(r))}}},Pa=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",e._l(e.invitations,(function(t,a){return r("div",{key:a,style:0!==a?"margin-top: 13px":""},[r("div",{staticClass:"invitation"},[r("div",{staticClass:"button-group"},[r("Button",{staticClass:"button",attrs:{type:"info",ghost:"",loading:t.rejectLoading,disabled:t.confirmLoading},on:{click:function(r){return e.rejectInvitation(t)}}},[e._v("谢绝邀请")]),r("Button",{staticClass:"button",staticStyle:{"margin-left":"8px"},attrs:{type:"info",loading:t.confirmLoading,disabled:t.rejectLoading},on:{click:function(r){return e.confirmInvitation(t)}}},[e._v("加入应用")])],1),r("div",{staticClass:"title"},[e._v("您收到了来自应用 "+e._s(t.appName)+" (Owner: "+e._s(t.ownerInfo)+") 的邀请！")]),r("div",{staticClass:"sub-title"},[e._v("加入应用后您可以查看应用完整的监控数据、访问和分析性能文件以协助定位 Node.js 应用故障")])])])})),0)},ka=[];function Da(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Sa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Da(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Da(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ta=m("dashboard/team"),Ca=Ta.mapActions,Aa={created:function(){this.cancelToken=C()},beforeDestroy:function(){A(this.cancelToken)},methods:Sa({},Ca(["updateInviationStatus"]),{updateStatus:function(e,t,r){var a=this,n=e.appId;e[t]=!0,this.updateInviationStatus({cancelToken:this.cancelToken.token,appId:n,status:r}).then((function(){return a.$emit("refreshApps")})).catch((function(e){return a.$Message.error(e.message)})).then((function(){return e[t]=!1}))},rejectInvitation:function(e){this.updateStatus(e,"rejectLoading",0)},confirmInvitation:function(e){this.updateStatus(e,"confirmLoading",1)}})};function Ma(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Ea(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ma(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ma(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ia=Ea({props:{invitations:Array}},Aa),Na=Ia,Ra=(r("4ace"),Object(u["a"])(Na,Pa,ka,!1,null,"19d69d00",null)),La=Ra.exports;function Fa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function $a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fa(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fa(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var za=$a({props:{type:String},components:{"x-invitations":La},data:function(){return{colors:["#2d8cf0","#2db7f5","#19be6b","#5cadff","#f89501","#2b85e4","#ed4014","#c5c8ce"],functions:[{label:y(Nr.instance),value:"instance",icon:"md-cloud"},{label:y(Nr.file),value:"file",icon:"md-folder"},{label:y(Nr.team),value:"team",icon:"md-people"},{label:y(Nr.alarm),value:"alarm",icon:"ios-alarm"},{label:y(Nr.settings),value:"setting",icon:"md-settings",disabled:"joinedApps"}],metrics:[{label:y(Nr.instanceCount),value:"instanceCount"},{label:y(Nr.rsikCount),value:"riskCount"},{label:y(Nr.alarmCount),value:"alarmCount"}],mainMetrics:[{label:y(Nr.processCpuUsage),value:"processCpuUsage"},{label:y(Nr.processMemoryUsage),value:"processMemoryUsage"},{label:y(Nr.systemCpuUsage),value:"systemCpuUsage"},{label:y(Nr.systemMemoryUsage),value:"systemMemoryUsage"},{label:y(Nr.diskUsage),value:"diskUsage"}],apps:[],invitations:[]}}},xa),Ba=za,Ua=(r("42f2"),Object(u["a"])(Ba,la,ua,!1,null,"484c9847",null)),Ga=Ua.exports,Ha=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"35px",viewBox:"0 0 89 28",version:"1.1"}},[r("title",[e._v("Logo")]),r("desc",[e._v("Created with Sketch Beta.")]),r("defs"),r("g",{attrs:{id:"Page-1",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[r("g",{attrs:{id:"Developer-Copy-3",transform:"translate(-207.000000, -14.000000)",fill:"#494949"}},[r("g",{attrs:{id:"logo"}},[r("g",{attrs:{id:"Logo",transform:"translate(207.000000, 14.000000)"}},[r("g",{attrs:{id:"Group-10",transform:"translate(44.000000, 5.000000)"}},[r("path",{attrs:{d:"M29.1177382,0.3234375 L28.8110889,2.9390625 C27.3614671,2.9390625 26.4554671,3.14999789 26.0930617,3.571875 L26.0930617,3.7546875 C26.6413161,4.45781602 26.9154392,5.24530814 26.9154392,6.1171875 C26.9154392,7.4578192 26.4252699,8.60155777 25.4449167,9.5484375 C24.4645635,10.4953172 23.0033481,10.96875 21.0612266,10.96875 C20.113397,10.96875 19.3374893,10.8937507 18.7334802,10.74375 C18.2409805,10.9687511 17.9947343,11.2640607 17.9947343,11.6296875 C17.9947343,12.2015654 18.2897651,12.6023426 18.8798355,12.8320312 C19.4699059,13.0617199 20.8428444,13.1765625 22.9986922,13.1765625 C26.7249636,13.1765625 28.5880713,14.4562372 28.5880713,17.015625 C28.5880713,18.815634 27.8121636,20.2453072 26.2603249,21.3046875 C24.7084862,22.3640678 22.8221477,22.89375 20.6012528,22.89375 C16.2523874,22.89375 14.0779873,21.5156388 14.0779873,18.759375 C14.0779873,17.9062457 14.3219104,17.1820342 14.8097639,16.5867187 C15.2976174,15.9914033 15.8621251,15.6281257 16.503304,15.496875 L16.503304,15.2859375 C15.7227384,14.78906 15.3324615,14.0296926 15.3324615,13.0078125 C15.3324615,11.9765573 15.8667692,11.114066 16.9354006,10.4203125 L16.9354006,10.2234375 C15.4300241,9.4640587 14.6773472,8.27813306 14.6773472,6.665625 C14.6773472,5.28749311 15.1953934,4.13437964 16.2315012,3.20625 C17.2676091,2.27812036 18.8682092,1.8140625 21.0333494,1.8140625 C22.5108485,1.8140625 23.7095562,2.09530969 24.6295085,2.6578125 L24.824649,2.6578125 C25.0941299,0.885928641 25.9954838,0 27.5287376,0 C28.1327467,0 28.6624082,0.107811422 29.1177382,0.3234375 L29.1177382,0.3234375 Z M25.1452368,18.05625 C25.1452368,17.3624965 24.8827291,16.860939 24.3577058,16.5515625 C23.8326825,16.242186 22.9290056,16.0875 21.6466479,16.0875 C20.6058938,16.0875 19.555863,16.0406255 18.496524,15.946875 C17.6787886,16.4343774 17.269927,17.1609327 17.269927,18.1265625 C17.269927,19.9265715 18.4593425,20.8265625 20.838209,20.8265625 C22.1670289,20.8265625 23.2170597,20.57344 23.9883329,20.0671875 C24.759606,19.560935 25.1452368,18.8906292 25.1452368,18.05625 L25.1452368,18.05625 Z M23.5004818,6.4828125 C23.5004818,5.63905828 23.2310049,4.9968772 22.692043,4.55625 C22.153081,4.1156228 21.5351425,3.8953125 20.838209,3.8953125 C20.1412754,3.8953125 19.5303062,4.10859162 19.0052829,4.53515625 C18.4802596,4.96172088 18.2177519,5.58749587 18.2177519,6.4125 C18.2177519,7.24687917 18.4872289,7.87968534 19.0261908,8.3109375 C19.5651527,8.74218966 20.1923835,8.9578125 20.907902,8.9578125 C21.5862506,8.9578125 22.1879276,8.74922084 22.7129509,8.33203125 C23.2379741,7.91484166 23.5004818,7.29844158 23.5004818,6.4828125 L23.5004818,6.4828125 Z",id:"egg"}}),r("path",{attrs:{d:"M12.6980658,7.509375 C12.6980658,7.98750239 12.6701889,8.61093366 12.6144342,9.3796875 L3.63797494,9.534375 C3.76806921,10.5937553 4.21874614,11.4749965 4.99001927,12.178125 C5.7612924,12.8812535 6.77415397,13.2328125 8.02863436,13.2328125 C9.42250146,13.2328125 10.9046246,13.0218771 12.4750482,12.6 L12.1962762,15.328125 C10.9139184,15.7968773 9.32493376,16.03125 7.4292745,16.03125 C5.03182309,16.03125 3.19426919,15.3515693 1.91655768,13.9921875 C0.638846172,12.6328057 0,10.9968846 0,9.084375 C0,7.08749002 0.606323094,5.35547609 1.81898747,3.88828125 C3.03165185,2.42108641 4.71588267,1.6875 6.87173045,1.6875 C8.84172929,1.6875 10.3052678,2.22655711 11.2623899,3.3046875 C12.2195119,4.38281789 12.6980658,5.78436638 12.6980658,7.509375 Z M9.43643309,7.3828125 C9.43643309,5.22655172 8.52578691,4.1484375 6.70446724,4.1484375 C4.96677958,4.1484375 3.9353334,5.26405134 3.61009774,7.4953125 L9.43643309,7.3828125 Z",id:"Combined-Shape"}}),r("path",{attrs:{d:"M44.8404805,0.3234375 L44.5338312,2.9390625 C43.0842094,2.9390625 42.1782094,3.14999789 41.815804,3.571875 L41.815804,3.7546875 C42.3640584,4.45781602 42.6381814,5.24530814 42.6381814,6.1171875 C42.6381814,7.4578192 42.1480122,8.60155777 41.167659,9.5484375 C40.1873058,10.4953172 38.7260904,10.96875 36.7839689,10.96875 C35.8361393,10.96875 35.0602315,10.8937507 34.4562225,10.74375 C33.9637228,10.9687511 33.7174766,11.2640607 33.7174766,11.6296875 C33.7174766,12.2015654 34.0125074,12.6023426 34.6025778,12.8320312 C35.1926482,13.0617199 36.5655867,13.1765625 38.7214345,13.1765625 C42.4477059,13.1765625 44.3108136,14.4562372 44.3108136,17.015625 C44.3108136,18.815634 43.5349059,20.2453072 41.9830672,21.3046875 C40.4312285,22.3640678 38.54489,22.89375 36.323995,22.89375 C31.9751297,22.89375 29.8007296,21.5156388 29.8007296,18.759375 C29.8007296,17.9062457 30.0446527,17.1820342 30.5325062,16.5867187 C31.0203597,15.9914033 31.5848674,15.6281257 32.2260463,15.496875 L32.2260463,15.2859375 C31.4454807,14.78906 31.0552037,14.0296926 31.0552037,13.0078125 C31.0552037,11.9765573 31.5895115,11.114066 32.6581429,10.4203125 L32.6581429,10.2234375 C31.1527664,9.4640587 30.4000895,8.27813306 30.4000895,6.665625 C30.4000895,5.28749311 30.9181357,4.13437964 31.9542435,3.20625 C32.9903514,2.27812036 34.5909515,1.8140625 36.7560917,1.8140625 C38.2335908,1.8140625 39.4322985,2.09530969 40.3522508,2.6578125 L40.5473912,2.6578125 C40.8168722,0.885928641 41.7182261,0 43.2514799,0 C43.855489,0 44.3851505,0.107811422 44.8404805,0.3234375 Z M39.2232241,6.4828125 C39.2232241,5.63905828 38.9537472,4.9968772 38.4147852,4.55625 C37.8758233,4.1156228 37.2578848,3.8953125 36.5609513,3.8953125 C35.8640177,3.8953125 35.2530485,4.10859162 34.7280252,4.53515625 C34.2030019,4.96172088 33.9404942,5.58749587 33.9404942,6.4125 C33.9404942,7.24687917 34.2099711,7.87968534 34.7489331,8.3109375 C35.287895,8.74218966 35.9151258,8.9578125 36.6306443,8.9578125 C37.3089929,8.9578125 37.9106699,8.74922084 38.4356931,8.33203125 C38.9607164,7.91484166 39.2232241,7.29844158 39.2232241,6.4828125 Z M40.8679791,18.05625 C40.8679791,17.3624965 40.6054714,16.860939 40.0804481,16.5515625 C39.5554248,16.242186 38.6517479,16.0875 37.3693901,16.0875 C36.328636,16.0875 35.2786052,16.0406255 34.2192662,15.946875 C33.4015309,16.4343774 32.9926693,17.1609327 32.9926693,18.1265625 C32.9926693,19.9265715 34.1820847,20.8265625 36.5609513,20.8265625 C37.8897712,20.8265625 38.939802,20.57344 39.7110752,20.0671875 C40.4823483,19.560935 40.8679791,18.8906292 40.8679791,18.05625 Z",id:"Combined-Shape"}})]),r("g",{attrs:{id:"Page-1"}},[r("path",{attrs:{d:"M7.2,15.1726335 L8,13.7933032 L12,20.6899548 L4,20.6899548 L7.2,15.1726335 L4,20.6900609 L0,13.7932766 L4,6.89662504 L8.00004,5.30920061e-05 L15.9999067,5.30920061e-05 L14.39996,2.75871372 L15.99996,5.30920061e-05 L20.0000933,6.89670468 L12,6.89670468 L4.00004619,6.89670468 L8,13.7932766 L7.2,15.1726335 Z M18.1236406,23.9257798 L16,27.5879867 L12,20.6900078 L20,20.6900078 L18.1236406,23.9257798 L20.0000933,20.6899548 L23.99996,27.5879336 L15.99996,27.5879336 L18.1236406,23.9257798 Z M24,13.7932766 L28,6.89662504 L32,13.7932766 L24,13.7932766 Z M12,6.89665158 L8,13.7933032 L4,6.89665158 L12,6.89665158 Z M15.99996,5.30920061e-05 L23.99996,5.30920061e-05 L27.99996,6.89670468 L20.0000933,6.89670468 L15.99996,5.30920061e-05 Z M28,6.89665158 L24,13.7933032 L20,6.89665158 L28,6.89665158 Z M3.99996,20.6900078 L11.99996,20.6900078 L15.99996,27.5879867 L8.00009333,27.5879867 L3.99996,20.6900078 Z",id:"Combined-Shape"}}),r("polygon",{attrs:{id:"Fill-12",points:"14.23244 17.2417219 12.23244 13.7932633 14.23244 10.3448048 18.23244 10.3448048 20.23244 13.7932633 18.23244 17.2417219"}})])])])])])])])},Wa=[],Xa={},qa=Xa,Ka=Object(u["a"])(qa,Ha,Wa,!1,null,null,null),Ya=Ka.exports,Va=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"x-modal-content",staticStyle:{"min-height":"120px"}},[r("x-loading",{attrs:{loading:e.new_app_loading,type:"dot",size:"middle",top:30}}),r("x-error-message",{directives:[{name:"show",rawName:"v-show",value:e.new_app_load_error,expression:"new_app_load_error"}],attrs:{message:e.new_app_load_error,top:10}}),e.new_app_loading||e.new_app_load_error||e.new_app_data?e._e():r("div",{staticClass:"x-modal-results new-app"},[r("Input",{attrs:{placeholder:"请输入您的应用名称"},model:{value:e.newAppName,callback:function(t){e.newAppName=t},expression:"newAppName"}},[r("span",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("应用名称")])]),e._m(0)],1),e.new_app_loading||e.new_app_load_error||!e.new_app_data?e._e():r("div",{staticClass:"x-modal-results"},e._l(e.newAppInfo,(function(t,a){return r("div",{key:a,staticClass:"new-app-group",style:0!==a?"margin-top: 13px":""},[r("div",{staticClass:"app-label"},[e._v(e._s(t.label)+" :")]),r("div",{staticClass:"app-value"},[e._v(e._s(t.value))])])})),0)],1),r("div",{staticClass:"x-modal-footer"},[e.new_app_loading?e._e():r("Button",{staticStyle:{"margin-right":"2px"},attrs:{type:"primary",ghost:""},on:{click:e.closeNewAppModal}},[e._v("关闭")]),e.new_app_loading||e.new_app_load_error||e.new_app_data?e._e():r("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary"},on:{click:e.submitNewAppCreation}},[e._v("提交")]),e.new_app_loading||e.new_app_load_error||!e.new_app_data?e._e():r("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary",to:{path:"/app/"+e.new_app_data.appId+"/instance"}}},[e._v("打开新应用")])],1)])},Qa=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("p",{staticClass:"modal-attention"},[r("strong",[e._v("注意:")]),r("span",{staticStyle:{"margin-left":"10px"}},[e._v("应用名称最大长度不能超过 30 个字符")])])}];function Za(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Ja(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Za(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Za(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var en=m("consoler"),tn=en.mapState,rn=en.mapMutations,an=en.mapActions,nn={created:function(){this.cancelToken=C(),this.set_new_app_load_error(void 0),this.set_new_app(void 0)},beforeDestroy:function(){A(this.cancelToken)},methods:Ja({},rn(["setNewAppModal","set_new_app_load_error","set_new_app"]),{},an(["createNewApp"]),{closeNewAppModal:function(){this.setNewAppModal({status:!1}),this.new_app_data&&this.$emit("refresh")},submitNewAppCreation:function(){var e=this.newAppName.trim();e?e.length>30?this.$Message.error("应用名称不能超过 30 个字符！"):this.createNewApp({cancelToken:this.cancelToken.token,newAppName:e}):this.$Message.error("应用名称不能为空！")}}),computed:Ja({},tn(["new_app_loading","new_app_load_error","new_app_data"]),{newAppInfo:function(){var e=this.new_app_data;if(!e)return[];var t=[],r=e.appName,a=e.appId,n=e.appSecret;return r&&t.push({label:"应用名称",value:r}),a&&t.push({label:"应用 ID",value:a}),n&&t.push({label:"应用 Secret",value:n}),t}})};function on(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function sn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?on(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):on(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var cn=sn({data:function(){return{newAppName:""}}},nn),ln=cn,un=(r("9ba8"),Object(u["a"])(ln,Va,Qa,!1,null,"b764c376",null)),dn=un.exports;function pn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function fn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pn(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var hn=fn({components:{"x-header":ca,"x-apps":Ga,"x-egg-logo":Ya,"x-create-app":dn},data:function(){return{selectedType:void 0,valueWhiteList:{selectedType:["myApps","joinedApps"]},nessaryQueryArgs:["type"],modalQueryKey:"new-app"}}},Xr),vn=hn,bn=(r("b0c4"),Object(u["a"])(vn,Er,Ir,!1,null,"153e1c88",null)),gn=bn.exports,yn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:"19yjh91"===this.appName?"mirror":""},[r("x-header",{attrs:{active:"console",owner:e.currentUserIsOwner}}),r("div",{staticClass:"x-body"},[r("x-sider",{attrs:{active:e.menuTab,owner:e.currentUserIsOwner},on:{menuChanged:e.menuChanged}}),r("Content",[r("x-loading",{attrs:{loading:e.app_loading,top:"40vh",type:"dot"}}),e.app_load_error?r("x-error-message",{attrs:{message:e.app_load_error,top:"calc(40vh - 20px)"}}):e._e(),r("transition",{attrs:{name:"slide"}},[e.app_loading||e.app_load_error||!e.activeContent?e._e():r(e.activeContent.component,{tag:"component",attrs:{appName:e.appName,title:e.activeContent.title,currentUserIsOwner:e.currentUserIsOwner}})],1)],1)],1)],1)},mn=[];function On(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function wn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?On(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):On(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _n=m("dashboard"),jn=_n.mapState,xn=_n.mapMutations,Pn=_n.mapActions,kn={created:function(){this.cancelToken=C(),this.setAppId(Number(this.$route.params.appId)),this.menuTab=this.$route.params.menuTab},beforeDestroy:function(){A(this.cancelToken),this.setAppId(Number(void 0))},methods:wn({},xn(["setAppId"]),{},Pn(["getAppInfo"]),{menuChanged:function(e){this.menuTab=e,this.$route.params.menuTab!==e&&this.$router.push({path:e})}}),computed:wn({},jn(["appId","app_loading","app_load_error","app_data"])),watch:{$route:function(e){this.menuTab=e.params.menuTab,this.setAppId(Number(e.params.appId))},appId:function(){this.getAppInfo(this.cancelToken.token)},menuTab:function(){var e=!0,t=!1,r=void 0;try{for(var a,n=this.contentGroup[Symbol.iterator]();!(e=(a=n.next()).done);e=!0){var i=a.value;i.value===this.menuTab&&(this.activeContent=i)}}catch(o){t=!0,r=o}finally{try{e||null==n.return||n.return()}finally{if(t)throw r}}},app_data:function(){var e=this.app_data||{};e.appName&&(this.appName=e.appName,this.currentUserIsOwner=e.currentUserIsOwner)}}},Dn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Sider",{staticClass:"sider",attrs:{width:60}},e._l(e.menuGroup,(function(t,a){return r("div",{key:a,class:"menu"+(e.checkAuth(t)&&t.active?" active":""),on:{click:function(r){return e.changeMenu(t)},mouseover:function(r){return e.mouseover(t)},mouseout:function(r){return e.mouseout(t)}}},[r("transition",{attrs:{name:"slide-noward"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.checkAuth(t),expression:"checkAuth(menu)"}]},[r("Icon",{staticClass:"menu-icon",attrs:{type:t.icon}}),r("p",{staticClass:"menu-name"},[e._v(e._s(t.label))])],1)])],1)})),0)],1)},Sn=[],Tn="MAIN_FLAG",Cn={created:function(){this.activeMenuGroup(this.active)},methods:{activeMenuGroup:function(e){var t=!0,r=!1,a=void 0;try{for(var n,i=this.menuGroup[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var o=n.value;o.value===e&&(o.active=!0)}}catch(s){r=!0,a=s}finally{try{t||null==i.return||i.return()}finally{if(r)throw a}}},resetMenuGroup:function(){var e=!0,t=!1,r=void 0;try{for(var a,n=this.menuGroup[Symbol.iterator]();!(e=(a=n.next()).done);e=!0){var i=a.value;i.active=!1}}catch(o){t=!0,r=o}finally{try{e||null==n.return||n.return()}finally{if(t)throw r}}},changeMenu:function(e){e.value!==this.active&&(e[Tn]=!0,this.$emit("menuChanged",e.value))},checkAuth:function(e){return"setting"!==e.value||this.owner},mouseover:function(e){e.active?e[Tn]=!0:e.active=!0},mouseout:function(e){e[Tn]?delete e[Tn]:e.active=!1}},watch:{active:function(){this.resetMenuGroup(),this.activeMenuGroup(this.active)}}};function An(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Mn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?An(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):An(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var En=Mn({props:{active:String,owner:Boolean},data:function(){return{menuGroup:[{label:y(Nr.instance),value:"instance",icon:"md-cloud",active:!1},{label:y(Nr.file),value:"file",icon:"md-folder",active:!1},{label:y(Nr.team),value:"team",icon:"md-people",active:!1},{label:y(Nr.alarm),value:"alarm",icon:"ios-alarm",active:!1},{label:y(Nr.settings),value:"setting",icon:"md-settings",active:!1}]}}},Cn),In=En,Nn=(r("c165"),Object(u["a"])(In,Dn,Sn,!1,null,"3ae851c8",null)),Rn=Nn.exports,Ln=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"detail-content"},[r("x-dashboard-title",{attrs:{appName:e.appName,dashboardTitle:e.title,owner:e.currentUserIsOwner,jump:""}},[r("template",{slot:"extra"},[r("x-loading",{style:e.agents_loading?"margin-left: 25px":"",attrs:{loading:e.agents_loading,top:5,size:"small"}}),r("transition",{attrs:{name:"slide"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.agents.length,expression:"agents.length"}]},[r("Select",{staticClass:"agent-selector",attrs:{size:"small",placeholder:e.placeholder,"not-found-text":e.notFoundText},model:{value:e.selectedAgentId,callback:function(t){e.selectedAgentId=t},expression:"selectedAgentId"}},e._l(e.agents,(function(t,a){return r("Option",{key:a,attrs:{value:t.value}},[e._v(e._s(t.label))])})),1),r("Button",{staticClass:"agent-button",attrs:{type:"info",size:"small"},on:{click:e.checkAgent}},[e._v(e._s(e.checkAgentTip))])],1)])],1)],2),e.agents_load_error?r("x-error-message",{attrs:{message:e.agents_load_error,top:"calc(40vh - 55px)"}}):e._e(),e.agents_loading||e.agents_load_error?e._e():r("div",[e.agents.length?r("div",[r("transition",{attrs:{name:"slide-downward"}},[r("Tabs",{staticClass:"instance-tab",model:{value:e.selectedTab,callback:function(t){e.selectedTab=t},expression:"selectedTab"}},e._l(e.instanceTabs,(function(e,t){return r("TabPane",{key:t,attrs:{label:e.label,icon:e.icon,name:e.value}})})),1)],1),r("transition",{attrs:{name:"slide"}},[e.selectedAgentId?r(e.activeComponent,{tag:"component",attrs:{appId:e.appId}}):e._e()],1)],1):r("x-error-message",{attrs:{message:"您的应用下尚未连接任何实例，请参照文档进行部署",top:"calc(40vh - 55px)"}})],1),r("x-check-agent")],1)},Fn=[];function $n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function zn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$n(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Bn=m("dashboard"),Un=Bn.mapState,Gn=m("dashboard/instance"),Hn=Gn.mapState,Wn=Gn.mapMutations,Xn=Gn.mapActions,qn={created:function(){this.cancelToken=C();var e=this.$route.query;this.selectedTab=e.tab||"process",this.selectedAgentId=e.agentId,this.getAgents(this.cancelToken.token)},beforeDestroy:function(){A(this.cancelToken)},methods:zn({},Wn(["setAgentId","setAgentModal"]),{},Xn(["getAgents"]),{formatAgents:function(e){return e.map((function(e){var t=e.agentId;return{label:t,value:t}}))},setDefaultAgent:function(){var e=this.agents.map((function(e){return e.value}));!(e.length>0)||this.selectedAgentId&&e.includes(this.selectedAgentId)||(this.selectedAgentId=e[0]),this.valueWhiteList.selectedAgentId=e},checkAgent:function(){this.setAgentModal({status:!0})}}),computed:zn({},Un(["appId"]),{},Hn(["agents_loading","agents_load_error","agents_data"]),{checkAgentTip:function(){return y(Nr.checkAgent)},activeComponent:function(){var e="";switch(this.selectedTab){case"process":e="x-process";break;case"system":e="x-system";break;case"error_log":e="x-error-log";break;case"module_risk":e="x-module-risk";break;default:break}return e}}),watch:{$route:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];I.call(this,t,"tab","selectedTab"),I.call(this,t,"agentId","selectedAgentId")},selectedTab:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];N.call(this,"tab","selectedTab",t)},selectedAgentId:function(){this.setAgentId(this.selectedAgentId);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];N.call(this,"agentId","selectedAgentId",t)},agents_data:function(){var e=this.agents_data;Array.isArray(e)&&(this.agents=this.formatAgents(e),this.setDefaultAgent())}}},Kn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("x-loading",{attrs:{loading:e.xprofiler_processes_loading,top:"30vh",size:"middle",type:"dot"}}),r("x-error-message",{directives:[{name:"show",rawName:"v-show",value:e.globalProcessTip||e.xprofiler_processes_load_error,expression:"globalProcessTip || xprofiler_processes_load_error"}],attrs:{message:e.globalProcessTip||e.xprofiler_processes_load_error,top:"calc(30vh -  21px)"}}),e.display&&e.nodeProcesses.length?r("div",[r("Alert",{staticClass:"x-alert tip",attrs:{type:"info"}},[r("div",{staticClass:"alert-group"},[r("Icon",{staticStyle:{color:"#2376b7"},attrs:{type:"ios-alert-outline"}}),r("div",{staticClass:"alert-desc"},[r("span",[e._v("暂无监控数据，可以点击")]),r("span",{staticClass:"tip-status"},[e._v(" 插件状态 ")]),r("span",[e._v("查看对应进程插件日志目录是否和 xtransit 配置采集目录一致，如提示日志目录已正确配置请等待约 1 ~ 2min 以处理第一次上报进程数据")])])],1)]),r("x-node",{attrs:{processes:e.nodeProcesses}})],1):e._e(),r("div",{directives:[{name:"show",rawName:"v-show",value:e.display&&!e.nodeProcesses.length,expression:"display && !nodeProcesses.length"}],staticClass:"content"},[r("div",{staticClass:"panel"},[r("transition",{attrs:{name:"slide"}},[r("x-panel",{directives:[{name:"show",rawName:"v-show",value:e.display,expression:"display"}],ref:"panel",staticStyle:{height:"100%"},attrs:{processes:e.showedProcesses},on:{selectPid:e.selectPid}})],1)],1),r("div",{staticClass:"data"},[r("div",{staticClass:"process-line-body"},[r("div",{staticClass:"section-title-group"},[r("div",{staticClass:"section-title"},[e._v(e._s(e.lineTitle))]),r("Checkbox",{staticStyle:{"margin-left":"7px"},model:{value:e.onlyAlived,callback:function(t){e.onlyAlived=t},expression:"onlyAlived"}},[r("span")])],1),r("transition",{attrs:{name:"slide-rightward"}},[r("x-line",{directives:[{name:"show",rawName:"v-show",value:e.display,expression:"display"}],ref:"line",attrs:{processes:e.showedProcesses},on:{selectPid:e.selectPid}})],1)],1),r("div",{staticClass:"process-catalogue-body"},[r("transition",{attrs:{name:"slide-rightward"}},[r("x-catalogue",{directives:[{name:"show",rawName:"v-show",value:e.display,expression:"display"}],ref:"catalogue",attrs:{processes:e.showedProcesses},on:{selectPid:e.selectPid}})],1)],1),r("div",{staticClass:"process-chart-body"},[r("div",{staticClass:"section-title"},[e._v("指标分布状况")]),r("div",{staticStyle:{"margin-top":"10px"}},[r("x-scatter",{ref:"scatter",attrs:{display:e.display,processes:e.showedProcesses},on:{selectPid:e.selectPid}})],1)])])])],1)},Yn=[],Vn=(r("a630"),r("c975"),r("6062"),r("c1df")),Qn=r.n(Vn);function Zn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Jn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zn(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ei=m("dashboard"),ti=ei.mapState,ri=m("dashboard/instance"),ai=ri.mapState,ni=m("dashboard/instance/process"),ii=ni.mapState,oi=ni.mapActions,si={created:function(){this.cancelToken=C(),this.getXprofilerProcesses(this.cancelToken.token)},mounted:function(){this.line=this.$refs.line,this.panel=this.$refs.panel,this.catalogue=this.$refs.catalogue,this.scatter=this.$refs.scatter},beforeDestroy:function(){A(this.cancelToken)},methods:Jn({},oi(["getXprofilerProcesses"]),{resetXprocesses:function(){this.globalProcessTip=void 0,this.selectedPid=void 0,this.xProcesses=[],this.onlyAlived=!0},formatXprocesses:function(e){var t=this,r=Array.from(new Set(e.map((function(e){return e.cmd}))));return e.map((function(e){e=Object.assign({},e);var a=t.colors,n=r.indexOf(e.cmd);return e.color=e.cmd?a[n%a.length]:t.diedProcessColor,e.selected=!1,e.historical=!e.cmd,e.cmd=e.cmd||"unknown command",e.startTimeFmt=Vn(e.startTime).format("YYYY-MM-DD HH:mm:ss"),e.updateTimeFmt=Vn(e.updateTime).format("YYYY-MM-DD HH:mm:ss"),e.cpuUsageFmt=e.cpuUsage+"%",e.heapUsageFmt=e.heapUsage+"%",e.gcUsageFmt=e.gcUsage+"%",e.rssFmt=D(e.rss,1),t.line.setLineData(e),t.scatter.setScatterData(e),e}))},setDefaultPid:function(){var e=this.$route.query,t=_(e.pid)&&Number(e.pid),r=this.showedProcesses.map((function(e){return Number(e.pid)}));t&&r.includes(t)?this.selectedPid=t:this.showedProcesses.length>0&&(this.selectedPid=this.showedProcesses[0].pid)},selectPid:function(e){var t=this.showedProcesses[e];this.selectedPid=t.pid},dispatchProc:function(){var e,t=!0,r=!1,a=void 0;try{for(var n,i=this.showedProcesses[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var o=n.value;o.pid==this.selectedPid&&(e=o)}}catch(s){r=!0,a=s}finally{try{t||null==i.return||i.return()}finally{if(r)throw a}}e&&(this.line.updateSelectedProcess(e),this.panel.updateSelectedProcess(e),this.catalogue.updateSelectedProcess(e))}}),computed:Jn({},ti(["appId"]),{},ai(["agentId"]),{},ii(["colors","diedProcessColor","xprofiler_processes_loading","xprofiler_processes_load_error","xprofiler_processes_data"]),{lineTitle:function(){return y(Nr.lineTitle)},globalProcessTip:function(){if(!this.xprofiler_processes_loading&&!this.xprofiler_processes_load_error){var e=this.showedProcesses,t=this.nodeProcesses;return 0===e.length&&0===t.length?"无法连接到此实例，请确认此实例上的应用已安装并启动了 xtransit，且已正确配置 appid 和 secret":void 0}},display:function(){return!this.xprofiler_processes_loading&&!this.xprofiler_processes_load_error&&!this.globalProcessTip},showedProcesses:function(){return this.onlyAlived?this.xProcesses.filter((function(e){return!e.historical})):this.xProcesses}}),watch:{$route:function(){if(this.selectedPid){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];I.call(this,t,"pid","selectedPid")}},selectedPid:function(){if(this.selectedPid){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];N.call(this,"pid","selectedPid",t),this.dispatchProc()}},agentId:function(){this.resetXprocesses(),this.getXprofilerProcesses(this.cancelToken.token)},xprofiler_processes_data:function(){this.nodeProcesses=[];var e=this.xprofiler_processes_data,t=e.list,r=e.nodes;Array.isArray(r)&&r.length?this.nodeProcesses=r:Array.isArray(t)&&t.length&&(this.xProcesses=this.formatXprocesses(t),this.setDefaultPid())}}},ci=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{ref:"line"},[r("div",{staticClass:"process-line-group"},e._l(e.processes,(function(t,a){return r("div",{key:a,staticStyle:{"background-color":"#e8eaec",width:"100%"}},[r("div",{staticClass:"process-line",style:e.getProcessLineStyle(a)+t.selectedStyle,on:{mouseover:function(r){return e.mouseover(t,r)},mousemove:function(r){return e.mousemove(t,r)},mouseout:function(t){return e.mouseout()},click:function(t){return e.selectPid(a)}}})])})),0),r("div",{staticClass:"process-line-label-group"},e._l(e.times,(function(t,a){return r("div",{key:a,staticClass:"process-line-label"},[r("div",[e._v(e._s(t.value))]),r("div",[e._v(e._s(t.label))])])})),0),r("x-tip",{ref:"tip"})],1)},li=[],ui=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("x-tooltip",{ref:"tooltip"},[r("template",{slot:"header"},[r("div",{staticClass:"tooltip-header",style:"background-color: "+(e.activeXProcess?e.activeXProcess.color:"#f8f8f9")},[r("div",[e._v("PID: "+e._s(e.activeXProcess.pid))])])]),r("template",{slot:"content"},[r("div",{staticClass:"tooltip-content"},e._l(e.tooltipContent,(function(t,a){return r("div",{key:a,staticClass:"tooltip-content-group"},[r("div",{staticClass:"tooltip-content-group-key"},[e._v(e._s(t.key)+":")]),r("div",{staticClass:"tooltip-content-group-value"},[e._v(e._s(e.activeXProcess[t.value]))])])})),0)])],2)},di=[],pi={mounted:function(){this.tooltip=this.$refs.tooltip},methods:{show:function(e,t,r){this.processData=e,this.tooltip.showToolTip(t,r)},remove:function(){this.tooltip.removeToolTip()}},computed:{activeXProcess:function(){var e=this.processData;return e||{pid:"未知",cmd:"未知"}}}};function fi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function hi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fi(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var vi=hi({data:function(){return{processData:void 0,tooltipContent:[{key:y(Nr.cmd),value:"cmd"},{key:y(Nr.startTime),value:"startTimeFmt"},{key:y(Nr.updateTime),value:"updateTimeFmt"}]}}},pi),bi=vi,gi=(r("71d5"),Object(u["a"])(bi,ui,di,!1,null,"4de22307",null)),yi=gi.exports,mi=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Oi={created:function(){this.setLastTime()},mounted:function(){this.tip=this.$refs.tip},methods:{setLineData:function(e){e.selectedStyle=""},setLastTime:function(){for(var e=[],t=Vn().day(),r=t,a=0;a<24;a+=2){var n=Vn().subtract(a,"hours"),i=n.hours();n.day()!==r?(r=n.day(),e.push({label:n.format("MM.DD"),value:mi[n.day()]})):e.push({label:i<12?"AM":"PM",value:i})}this.times=e},getProcessLineStyle:function(e){var t=864e5,r=Date.now()-t,a=Date.now(),n=this.processes[e],i=n.startTime,o=n.updateTime;if(o<i||o<=r)return"";var s="background-color: "+n.color+";";return i>r&&(s+="margin-left:"+(i-r)/t*100+"%;"),a>o+18e4&&(s+="margin-right:"+(a-o)/t*100+"%;"),s},selectPid:function(e){this.$emit("selectPid",e)},resetSelectedStyle:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!0,r=!1,a=void 0;try{for(var n,i=this.processes[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var o=n.value;e&&o.selected||(o.selected=!1,o.selectedStyle="")}}catch(s){r=!0,a=s}finally{try{t||null==i.return||i.return()}finally{if(r)throw a}}},setBoxShadow:function(e){var t=1.3;e.selectedStyle="box-shadow: 0 0 0 2px ".concat(e.color.replace(")",", 0.4)"),";")+"-webkit-transform: scaleY(".concat(t,");transform: scaleY(").concat(t,");")+"transition: box-shadow .1s"},updateSelectedProcess:function(e){this.resetSelectedStyle(),e.selected=!0,this.setBoxShadow(e)},getLineWidth:function(){var e=window.getComputedStyle(this.$refs.line).width;return parseInt(e,10)+80},mouseover:function(e,t){this.resetSelectedStyle(!0),this.setBoxShadow(e),this.tip.show(e,this.getLineWidth(),t)},mousemove:function(e,t){this.tip.show(e,this.getLineWidth(),t)},mouseout:function(){this.resetSelectedStyle(!0),this.tip.remove()}}};function wi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function _i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wi(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ji=_i({props:{processes:Array},components:{"x-tip":yi},data:function(){return{times:[]}}},Oi),xi=ji,Pi=(r("a350"),Object(u["a"])(xi,ci,li,!1,null,"64d5705a",null)),ki=Pi.exports,Di=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticStyle:{"text-align":"right"}},[r("Button",{staticClass:"check-button",attrs:{type:"info",size:"small"},on:{click:function(t){return e.openDrawer()}}},[r("Icon",{staticClass:"check-button-icon",attrs:{type:"md-apps"}}),e._v(" "+e._s(e.checkProcessesTag)+" ")],1)],1),r("div",{staticClass:"panel"},[r("div",{staticClass:"panel-title",style:e.panelStyle},[r("div",{staticClass:"panel-title-line"},[r("div",{staticClass:"panel-title-pid"},[e._v("PID: "+e._s(e.processData.pid))]),r("x-dropdown",{staticClass:"panel-title-dropdown",attrs:{title:e.processListTag}},[r("template",{slot:"content"},e._l(e.processes,(function(t,a){return r("div",{key:a,class:"x-dropdown-li"+(t.pid===e.processData.pid?" selected":""),on:{click:function(t){return e.selectPid(a)}}},[r("div",{staticClass:"panel-title-dropdown-dot",style:"background-color: "+t.color}),r("div",{staticClass:"panel-title-dropdown-pid"},[e._v(e._s(t.pid))]),r("div",{staticClass:"panel-title-dropdown-cmd",attrs:{title:t.cmd}},[e._v(e._s(t.cmd))])])})),0)],2)],1),r("div",{staticClass:"panel-title-cmd",attrs:{title:e.processData.cmd}},[e._v(e._s(e.processData.cmd))])]),r("div",{staticClass:"panel-content"},[r("div",{staticClass:"panel-content-metric"},[e._l(e.metrics,(function(t,a){return r("div",{key:a,staticClass:"panel-content-metric-group"},[r("div",{staticClass:"panel-content-metric-key"},[e._v(e._s(t.label))]),t.time?r("div",{staticClass:"panel-content-metric-value"},[r("p",[e._v(e._s(e.splitTime(e.processData[t.value])[1]||"-"))]),r("p",[e._v(e._s(e.splitTime(e.processData[t.value])[0]))])]):r("div",{staticClass:"panel-content-metric-value"},[e._v(e._s(e.showMetricValue(e.processData[t.value])))])])})),r("div",{staticClass:"panel-chapter"},[e._v(e._s(e.processDetailTag))]),r("div",{staticClass:"panel-long-button"},[r("Button",{attrs:{size:"small",type:"primary",ghost:"",long:"",disabled:e.processData.historical},on:{click:e.checkXprofiler}},[r("div",{staticClass:"panel-button-value"},[e._v(e._s(e.checkXprofilerTag))])])],1),r("div",{staticClass:"panel-button"},e._l(e.detailButtons,(function(t,a){return r("div",{key:a,staticClass:"panel-normal-button"},[r("Button",{attrs:{size:"small",type:e.processData.historical?"primary":"info",long:"",ghost:e.processData.historical},on:{click:function(r){return e.actDetail(t.value)}}},[r("div",{staticClass:"panel-button-value"},[e._v(e._s(t.label))])])],1)})),0),r("div",{staticClass:"panel-chapter"},[e._v(e._s(e.actionsTag))]),r("div",{staticClass:"panel-button"},e._l(e.actionButtons,(function(t,a){return r("div",{key:a,staticClass:"panel-normal-button",style:a===e.actionButtons.length-1&&a%2===0?"width: 100%":""},[r("Button",{attrs:{size:"small",type:"info",long:"",disabled:e.processData.historical},on:{click:function(r){return e.takeAction(t.value)}}},[r("div",{staticClass:"panel-button-value"},[e._v(e._s(t.label))])])],1)})),0)],2)])]),r("x-check-xprofiler"),r("x-modal",{ref:"saveTrend",attrs:{title:"保存数据趋势",padding:0,"hide-footer":""},on:{canceled:e.closeSaveTrendModal}},[r("x-save-trend",{attrs:{slot:"content"},slot:"content"})],1),r("x-modal",{ref:"takeAction",attrs:{title:"抓取性能数据",padding:0,"hide-footer":""},on:{canceled:e.closeTakeActionModal}},[r("x-take-action",{attrs:{slot:"content"},slot:"content"})],1),r("x-drawer",{ref:"trend",on:{close:function(t){return e.closeTrendDrawer()}}},[r("template",{slot:"header"},[r("div",{staticClass:"processes-header"},[e._v("进程 "+e._s(e.processTrendData.pid)+" 数据趋势")])]),r("template",{slot:"content"},[r("div",{staticClass:"trend-content"},[r("x-trend")],1)])],2),r("x-drawer",{ref:"processes",on:{close:function(t){return e.closeDrawer()}}},[r("template",{slot:"header"},[r("div",{staticClass:"processes-header"},[e._v("实例 "+e._s(e.agentId)+" 存在以下 "+e._s(e.processCount)+" 个 Node.js 进程（不一定接入 Xprofiler 插件）")])]),r("template",{slot:"content"},[r("div",{staticClass:"process-content"},[r("x-node")],1)])],2)],1)},Si=[];function Ti(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Ci(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ti(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ti(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ai=m("dashboard/instance"),Mi=Ai.mapState,Ei=m("dashboard/instance/process"),Ii=Ei.mapState,Ni=Ei.mapGetters,Ri=Ei.mapMutations,Li=B("drawerQueryKey","processTrendDrawer","trend","setProcessTrendDrawer"),Fi=Li.mapMethods,$i=Li.mapWatch,zi=Li.handleMounted,Bi=B("drawerQueryKeyProcesses","processesDrawer","processes","setProcessesDrawer"),Ui=Bi.mapMethods,Gi=Bi.mapWatch,Hi=Bi.handleMounted,Wi=U("modalQueryKeySaveTrend","saveTrendModal","saveTrend","setSaveTrendModal"),Xi=Wi.mapMethods,qi=Wi.mapWatch,Ki=Wi.handleMounted,Yi=U("modalQueryKeyActions","takeActionModal","takeAction","setTakeActionModal"),Vi=Yi.mapMethods,Qi=Yi.mapWatch,Zi=Yi.handleMounted,Ji={mounted:function(){zi.call(this,"handleProcessTrendDrawer",!0,"processData"),Hi.call(this,"handleProcessesDrawer",!0),Ki.call(this,"handleSaveTrendModal"),Zi.call(this,"handleActionModal")},methods:Ci({},Fi("handleProcessTrendDrawer"),{},Ui("handleProcessesDrawer"),{},Xi("handleSaveTrendModal"),{},Vi("handleActionModal"),{},Ri(["setXprofilerStatusModal","setSaveTrendModal","setTakeActionModal","setProcessTrendDrawer","setProcessesDrawer"]),{showMetricValue:function(e){return e||(_(e)?e:"-")},updateSelectedProcess:function(e){this.processData=e},splitTime:function(e){return e?e.split(" "):["",""]},selectPid:function(e){this.$emit("selectPid",e)},checkXprofiler:function(){this.setXprofilerStatusModal({status:!0,pid:this.processData.pid})},openDrawer:function(){this.setProcessesDrawer({status:!0})},closeDrawer:function(){this.setProcessesDrawer({status:!1})},actDetail:function(e){"processTrend"===e&&this.setProcessTrendDrawer({status:!0,processData:this.processData}),"saveProcessData"===e&&this.setSaveTrendModal({status:!0,processData:this.processData})},takeAction:function(e){this.setTakeActionModal({status:!0,actionData:{pid:this.processData.pid,action:e}})},closeTrendDrawer:function(){this.setProcessTrendDrawer({status:!1})},closeSaveTrendModal:function(){this.setSaveTrendModal({status:!1})},closeTakeActionModal:function(){this.setTakeActionModal({status:!1})}}),computed:Ci({},Mi(["agentId"]),{},Ii(["processTrendDrawer","processTrendData","processesDrawer","saveTrendModal","takeActionModal"]),{},Ni(["processCount"]),{panelStyle:function(){var e=this.processData,t="";return e.color&&(t+="background-color: "+e.color+";"),t},checkProcessesTag:function(){return y(Nr.checkProcesses)},processListTag:function(){return y(Nr.processList)},processDetailTag:function(){return y(Nr.processDetail)},checkXprofilerTag:function(){return y(Nr.checkXprofiler)},actionsTag:function(){return y(Nr.actions)}}),watch:Ci({},$i,{},Gi,{},qi,{},Qi,{$route:function(e){this.handleProcessTrendDrawer(e.query),this.handleProcessesDrawer(e.query),this.handleSaveTrendModal(e.query),this.handleActionModal(e.query)}})},eo=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"processes"},[r("x-loading",{attrs:{loading:e.processes_loading,top:"40vh",type:"dot",size:"large"}}),r("transition",{attrs:{name:"slide-noward"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:!e.processes_loading,expression:"!processes_loading"}]},[r("x-error-message",{directives:[{name:"show",rawName:"v-show",value:e.processes_load_error,expression:"processes_load_error"}],attrs:{message:e.processes_load_error,top:"40vh"}}),r("x-table",{directives:[{name:"show",rawName:"v-show",value:!e.processes_load_error,expression:"!processes_load_error"}],attrs:{columns:e.processColumns,data:e.processList,fontSize:"14","no-data-head":"",noDataText:"没有在该实例上查找到任何 Node.js 进程",stribe:""},scopedSlots:e._u([{key:"command",fn:function(t){var a=t.row;return[r("div",{staticClass:"process-command"},[e._v(e._s(a.command))])]}},{key:"options",fn:function(t){var a=t.row;return[r("Button",{attrs:{type:"info",size:"small"},on:{click:function(t){return e.checkXprofiler(a)}}},[r("div",{staticClass:"process-check"},[e._v("插件状态")])])]}}])})],1)])],1)},to=[];function ro(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ao(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ro(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ro(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var no=m("dashboard/instance/process"),io=no.mapState,oo=no.mapMutations,so=no.mapActions,co={created:function(){this.cancelToken=C(),Array.isArray(this.processes)&&this.processes.length||this.getNodeProcesses(this.cancelToken.token)},beforeDestroy:function(){A(this.cancelToken)},methods:ao({},oo(["setXprofilerStatusModal"]),{},so(["getNodeProcesses"]),{checkXprofiler:function(e){this.setXprofilerStatusModal({status:!0,pid:e.pid})}}),computed:ao({},io(["processes_loading","processes_load_error","processes_data"]),{processList:function(){return this.processes||this.processes_data}})};function lo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function uo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lo(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var po=uo({props:{processes:{required:!1,type:Array}},data:function(){return{processColumns:[{title:"PID",value:"pid",width:"90"},{title:"进程启动命令",value:"command"},{title:"操作",value:"options",width:"110",align:"center"}]}}},co),fo=po,ho=(r("9ad4"),Object(u["a"])(fo,eo,to,!1,null,"c4354332",null)),vo=ho.exports,bo=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("x-modal",{ref:"checkXprofiler",attrs:{title:"X-Profiler 插件状态",width:530},on:{canceled:e.closeXprofilerCheck}},[r("template",{slot:"content"},[r("div",{staticClass:"container"},[r("x-loading",{attrs:{loading:e.xprofiler_status_loading,type:"dot",size:"middle"}}),r("x-error-message",{directives:[{name:"show",rawName:"v-show",value:e.xprofiler_status_load_error,expression:"xprofiler_status_load_error"}],attrs:{message:e.xprofiler_status_load_error}}),r("transition",{attrs:{name:"slide-noward"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:!e.xprofiler_status_loading&&!e.xprofiler_status_load_error,expression:"!xprofiler_status_loading && !xprofiler_status_load_error"}],staticClass:"content"},e._l(e.checkList,(function(t,a){return r("div",{key:a,staticClass:"xprofiler",style:t.style},[r("div",{domProps:{innerHTML:e._s(a+1+". "+t.label)}}),e._l(t.children,(function(t,a){return r("div",{key:a,staticClass:"xprofiler-status-group",style:0!==a?"margin-left: 15px":""},[t.dropdown?r("div",{staticClass:"dropdown"},[r("Icon",{style:t.style,attrs:{type:t.icon}}),r("x-dropdown",{attrs:{transformY:8}},[r("div",{staticClass:"dropdown-title xprofiler-status-label",attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.label))]),r("div",{attrs:{slot:"content"},slot:"content"},e._l(t.children,(function(t,a){return r("div",{key:a,staticClass:"xprofiler-logdir-group x-dropdown-li"},[r("div",{staticClass:"dropdown-dot",style:"background-color: "+t.color+";"}),r("div",{domProps:{innerHTML:e._s(t.label)}})])})),0)])],1):r("div",{staticClass:"xprofiler-status"},[r("Icon",{style:t.style,attrs:{type:t.icon}}),r("div",{staticClass:"xprofiler-status-label"},[e._v(e._s(t.label))])],1)])}))],2)})),0)])],1)]),r("template",{slot:"footer"},[r("div",{directives:[{name:"show",rawName:"v-show",value:!e.xprofiler_status_loading,expression:"!xprofiler_status_loading"}]},[r("Button",{attrs:{type:"primary",ghost:""},on:{click:e.closeXprofilerCheck}},[e._v("关闭")])],1)])],2)],1)},go=[];r("4fad");function yo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function mo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yo(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Oo=m("dashboard/instance/process"),wo=Oo.mapState,_o=Oo.mapMutations,jo=Oo.mapActions,xo=U("modalQueryKey","xprofilerStatusModal","checkXprofiler","setXprofilerStatusModal",void 0,"getXprofilerStatus","xprofiler_status_loading",["pid"]),Po=xo.mapMethods,ko=xo.mapWatch,Do=xo.handleMounted,So={created:function(){this.cancelToken=C()},mounted:function(){Do.call(this,"handleXprofiler")},methods:mo({},_o(["setXprofilerStatusModal"]),{},jo(["getXprofilerStatus"]),{},Po("handleXprofiler"),{closeXprofilerCheck:function(){this.setXprofilerStatusModal({status:!1})},getIconStyle:function(e,t){if(!this.xprofiler_status_data)return{icon:"md-help-circle"};var r=this.xprofiler_status_data[e];return t&&(r=this.xprofiler_status_data[e]&&this.xprofiler_status_data[e]===this.xprofiler_status_data[t]),{icon:r?"md-checkmark-circle":"md-close-circle",style:"color: "+(r?this.healthyColor:this.wrongColor)+";",color:r?this.healthyColor:this.wrongColor,status:r}}}),computed:mo({},wo(["xprofilerStatusModal","xprofilerCheckPid","xprofiler_status_loading","xprofiler_status_load_error","xprofiler_status_data"]),{pid:function(){return this.xprofilerCheckPid},installStatus:function(){return this.getIconStyle("installXprofiler")},enableStatus:function(){return this.getIconStyle("enableXprofiler")},logdirStatus:function(){return this.getIconStyle("xprofilerLogdir","xtransitLogdir")},validXprofiler:function(){var e=this.xprofiler_status_data;return e&&e.installXprofiler&&e.enableXprofiler},config:function(){var e=this.xprofiler_status_data;return e&&e.xprofilerConfig?Object.entries(e.xprofilerConfig).map((function(e){var t=Object(O["a"])(e,2),r=t[0],a=t[1];return{key:r,value:a}})):[]},versionInfo:function(){var e=this.xprofiler_status_data;if(!e)return"";var t=e.nodeVersion||"未知",r=e.alinodeVersion,a="".concat(t).concat(r?" (".concat(r,")"):""),n="进程 ".concat(this.pid,' 使用的运行时版本为 <code style="font-size: 12px;color: #2a9446;font-weight: bold;">').concat(a,"</code>"),i=e.xprofilerVersion;return this.validXprofiler&&i&&(n+='，插件版本为 <code style="font-size: 12px;color: #2a9446;font-weight: bold;">'.concat(i,"</code>")),n},checkList:function(){var e=this,t=this.installStatus,r=this.enableStatus,a=this.logdirStatus,n=this.xprofiler_status_data,i=this.validXprofiler;if(!n)return[];var o="margin-top: 8px;";return[{label:"插件 X-Profiler 状态：",children:[{label:t.status?"已安装":"未安装",icon:t.icon,style:t.style},{label:r.status?"已启用":"未启用",icon:r.icon,style:r.style},{label:a.status?"日志目录配置成功":"日志目录配置失败",icon:a.icon,style:a.style,dropdown:i,children:[{label:"配置 xprofiler 日志目录："+n.xprofilerLogdir,color:a.color},{label:"配置 xtransit 日志目录： "+n.xtransitLogdir,color:a.color}]}]},{label:"插件 X-Profiler 配置：",style:o,children:[{label:i?"配置获取成功":"无法获取配置",icon:i?"md-checkmark-circle":"md-close-circle",style:"color: "+(i?this.healthyColor:this.wrongColor)+";",dropdown:i,children:this.config.map((function(t){return{label:'<div style="font-size: 14px">'.concat(t.key,": ").concat(t.value,"</div>"),color:i?e.healthyColor:e.wrongColor}}))}]},{label:this.versionInfo,style:o}]}}),watch:mo({},ko,{$route:function(e){this.handleXprofiler(e.query)}})};function To(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Co(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?To(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):To(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ao=Co({data:function(){return{modalQueryKey:"check-xprofiler",healthyColor:"#2a9446",wrongColor:"#e33900"}}},So),Mo=Ao,Eo=(r("4524"),Object(u["a"])(Mo,bo,go,!1,null,"7f555d47",null)),Io=Eo.exports,No=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticStyle:{"text-align":"center"}},[r("x-loading",{attrs:{loading:e.xprofiler_processes_loading,top:"40vh",size:"small",type:"dot"}})],1),r("x-error-message",{directives:[{name:"show",rawName:"v-show",value:e.xprofiler_processes_load_error,expression:"xprofiler_processes_load_error"}],attrs:{message:e.xprofiler_processes_load_error,top:"calc(40vh - 25px)"}}),r("transition",{attrs:{name:"slide-noward"}},[e.xprofiler_processes_loading||e.xprofiler_processes_load_error?e._e():r("div",[e.disablePanel?e._e():r("div",{staticClass:"panel",style:"background-color: "+e.color},[r("div",{staticClass:"line-group"},[r("div",{staticClass:"title"},[e._v("PID: "+e._s(e.displayPid))]),e.proc.cmd?r("div",{staticClass:"action"},e._l(e.bts,(function(t,a){return r("div",{key:a,staticClass:"bt-wrapper",on:{mouseover:function(r){return e.mouseover(t)},mouseout:function(r){return e.mouseout(t)},click:function(r){return e.takeAction(t)}}},[r("Button",{attrs:{long:"",type:t.ghost?"default":"text",ghost:t.ghost}},[r("div",{ref:t.value,refInFor:!0},[e._v(e._s(t.label))])])],1)})),0):e._e()]),r("div",{staticClass:"cmd"},[e._v(e._s(e.displayCmd))])]),r("div",{staticClass:"trend-duration-wrapper"},[r("div",{staticClass:"tag-group trend-duration"},e._l(e.durationGroup,(function(t,a){return r("div",{key:a,class:"tag trend-duration-tag"+(e.duration===t.value?" tag-selected":""),on:{click:function(r){e.duration=t.value}}},[e._v(e._s(t.label))])})),0)]),e._l(e.chartGroup,(function(t,a){return r("div",{key:a},[r("div",{staticClass:"detail",style:"margin-top: 20px;"},e._l(t,(function(t,a){return r("x-trend-data",{key:a,ref:t.value,refInFor:!0,staticClass:"trend-data",attrs:{type:t.value,title:t.label,solid:t.solid,duration:e.duration,data:e.trendMap&&e.trendMap[t.value]||void 0},on:{linkage:e.linkage,hidden:e.hidden,broadcast:e.broadcast}})})),1),a!==e.chartGroup.length-1?r("div",{staticClass:"interval-section"}):e._e()])}))],2)])],1)},Ro=[];function Lo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Fo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Lo(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var $o=m("dashboard/instance/process"),zo=$o.mapState,Bo=$o.mapMutations,Uo={created:function(){this.trendMap&&(this.durationGroup=[])},methods:Fo({},Bo(["setTakeActionModal","setSaveTrendModal"]),{mouseover:function(e){e.ghost=!1;var t=this.$refs[e.value][0].style;t["font-weight"]="bold",t["color"]=this.color,t["font-style"]="italic"},mouseout:function(e){e.ghost=!0;var t=this.$refs[e.value][0].style;t["font-weight"]="normal",t["color"]="#fff",t["font-style"]="normal"},takeAction:function(e){"save"===e.value?this.setSaveTrendModal({status:!0,processData:{pid:this.proc.pid}}):this.setTakeActionModal({status:!0,actionData:{pid:this.proc.pid,action:e.value}})},showTip:function(e,t){var r=!0,a=!1,n=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var s=i.value,c=this.$refs[s][0];c&&c.showTip(t)}}catch(l){a=!0,n=l}finally{try{r||null==o.return||o.return()}finally{if(a)throw n}}},handleBroadcase:function(e,t){var r=!0,a=!1,n=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var s=i.value,c=this.$refs[s][0];c&&c.handleBroadcase(t)}}catch(l){a=!0,n=l}finally{try{r||null==o.return||o.return()}finally{if(a)throw n}}},hiddenTip:function(e){var t=!0,r=!1,a=void 0;try{for(var n,i=e[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var o=n.value;this.$refs[o][0].hiddenTip()}}catch(s){r=!0,a=s}finally{try{t||null==i.return||i.return()}finally{if(r)throw a}}},linkage:function(e){this.showTip(this.chartRefs,e)},broadcast:function(e){this.handleBroadcase(this.chartRefs,e)},hidden:function(){this.hiddenTip(this.chartRefs)}}),computed:Fo({},zo(["colors","diedProcessColor","processTrendData","xprofiler_processes_loading","xprofiler_processes_load_error","xprofiler_processes_data"]),{cmdMap:function(){var e=this.xprofiler_processes_data.list;return Array.from(new Set(e.map((function(e){return e.cmd}))))},proc:function(){var e=this.processTrendData.pid,t=this.xprofiler_processes_data.list;return t.filter((function(t){return Number(t.pid)===Number(e)}))[0]},color:function(){var e=this.colors,t=this.proc;if(!t||!t.cmd)return this.diedProcessColor;var r=this.cmdMap.indexOf(t.cmd);return e[r%e.length]||e[0]},chartRefs:function(){var e=[],t=!0,r=!1,a=void 0;try{for(var n,i=this.chartGroup[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var o=n.value,s=!0,c=!1,l=void 0;try{for(var u,d=o[Symbol.iterator]();!(s=(u=d.next()).done);s=!0){var p=u.value.value;e.push(p)}}catch(f){c=!0,l=f}finally{try{s||null==d.return||d.return()}finally{if(c)throw l}}}}catch(f){r=!0,a=f}finally{try{t||null==i.return||i.return()}finally{if(r)throw a}}return e},displayPid:function(){var e=this.proc;return e?e.pid:this.$route.query.pid||"未知"},displayCmd:function(){var e=this.proc;return e?e.cmd:"未知"}})},Go=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"trend-title-group"},[r("div",{staticClass:"trend-title"},[e._v(" "+e._s(e.title)+" "),e.extra?r("span",{staticClass:"chart-extra"},[e._v("("+e._s(e.extra)+")")]):e._e()]),r("transition",{attrs:{name:"slide-noward"}},[e.commonData.showStatus&&void 0!==e.trendStatus.status?r("div",{staticClass:"trend-status-group"},[r("div",{staticClass:"trend-status",style:e.statusLabelStyle},[e._v(e._s(e.trendStatus.statusLabel))]),r("div",{staticClass:"trend-tip"},[e._v(e._s(e.trendStatus.statusTip))])]):e._e()])],1),r("div",[r("div",{staticStyle:{"text-align":"center","margin-top":"13px"}},[r("x-loading",{attrs:{loading:e.loading,top:"100",type:"dot",size:"middle"}})],1),e.loadError?r("x-error-message",{attrs:{message:e.loadError,top:"100"}}):e._e(),r("transition",{attrs:{name:"slide-noward"}},[e.loading||e.loadError?e._e():r("div",{staticClass:"charts"},[e.solid?r("x-pie",{staticClass:"circle",attrs:{data:e.selectedData,yAxis:e.commonData.yAxis,yAxisUnit:e.commonData.yAxisUnit}}):e._e(),r("x-area",{ref:"area",staticClass:"main-chart",attrs:{xAxis:"time",data:e.chartData,yAxis:e.commonData.yAxis,yAxisUnit:e.commonData.yAxisUnit,noDataText:e.commonData.noDataText,showStatus:e.commonData.showStatus,fixedTip:e.commonData.fixedTip,solid:e.solid},on:{linkage:e.linkage,hidden:e.hidden,status:e.updateStatus,broadcast:e.broadcast}})],1)])],1)])},Ho=[],Wo=r("53ca");function Xo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function qo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xo(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ko=m("dashboard/instance/process"),Yo=Ko.mapActions,Vo={created:function(){this.cancelToken=C(),this.getTrendData()},beforeDestroy:function(){A(this.cancelToken)},methods:qo({},Yo(["getProcessTrend"]),{updateSelectedData:function(e){this.solid&&(this.selectedData=e)},setData:function(e){var t=e.list,r=e.extra;Array.isArray(t)&&(this.trendData=t),_(e.limit)&&(this.limit=e.limit),this.extra=r,this.checkStatus(this.lastValidData),this.updateSelectedData(this.lastValidData)},getTrendData:function(){var e=this;this.data?this.setData(this.data):(this.loading=!0,this.getProcessTrend({cancelToken:this.cancelToken.token,trendType:this.type,duration:this.duration}).then((function(t){0!==Object.keys(t).length&&(e.setData(t),e.loading=!1)})).catch((function(t){e.loadError=t.message,e.loading=!1})))},setStatus:function(e,t){return e<60?t[0]:e<85?t[1]:t[2]},checkStatus:function(e){if(e){var t=this.type,r=this.limit,a={},n=["健康态","警告态","紧急态"];if("heapTrend"===t){var i=1024*e.heap_used*1024/r*100,o=["堆内存使用率在正常范围内 ( 0 - 60% )","堆内存使用率偏高 ( 60% - 85% )","堆内存使用率极高 ( 85%+ )"];a.status=i,a.statusLabel=this.setStatus(i,n),a.statusTip=this.setStatus(i,o)}if("cpuTrend"===t){var s=e.cpu_60,c=["一分钟内 CPU 平均使用率在正常范围内 ( 0 - 60% )","一分钟内 CPU 平均使用率偏高 ( 60% - 85% )","一分钟内 CPU 平均使用率极高 ( 85%+ )"];a.status=s,a.statusLabel=this.setStatus(s,n),a.statusTip=this.setStatus(s,c)}if("gcTrend"===t){var l=e.scavenge_duration*this.gcUnit.scale,u=e.marksweep_duration*this.gcUnit.scale,d=["一分钟内 GC 平均耗费在正常范围内 ( 0 - 5% )","一分钟内 GC 平均耗费偏高 ( 5% - 15% )","一分钟内 GC 平均耗费极高 ( 15%+ )"],p=(l+u)/6e4;a.status=p,a.statusLabel=this.setStatus(p,n),a.statusTip=this.setStatus(p,d)}this.trendStatus=a}},updateStatus:function(e){this.checkStatus(e),this.updateSelectedData(e)},linkage:function(e){this.$emit("linkage",e)},broadcast:function(e){this.$emit("broadcast",e)},hidden:function(){this.$emit("hidden")},showTip:function(e){var t=this.$refs.area;t&&t.showTip(e)},hiddenTip:function(){var e=this.$refs.area;e&&e.hiddenTip()},handleBroadcase:function(e){var t=this.$refs.area;t&&t.handleBroadcase(e)}}),computed:{gcUnit:function(){var e=0,t=!0,r=!1,a=void 0;try{for(var n,i=this.trendData[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var o=n.value;o.scavenge_duration>e&&(e=o.scavenge_duration),o.marksweep_duration>e&&(e=o.marksweep_duration),o.total_gc_duration>e&&(e=o.total_gc_duration)}}catch(c){r=!0,a=c}finally{try{t||null==i.return||i.return()}finally{if(r)throw a}}var s={};return e<1e3?(s.label="ms",s.scale=1):(s.label="s",s.scale=1e3),s},commonData:function(){var e=this.type,t={yAxis:[],yAxisUnit:"",noDataText:"",showStatus:!1,fixedTip:!1};return"heapTrend"===e&&(t.yAxis=["rss","heap_total","heap_used","external"],t.yAxisUnit="MB",t.noDataText="暂无内存趋势数据",t.showStatus=!0,t.fixedTip=!0),"cpuTrend"===e&&(t.yAxis=["cpu_15","cpu_30","cpu_60"],t.yAxisUnit="%",t.noDataText="暂无 CPU 趋势数据",t.showStatus=!0,t.fixedTip=!0),"heapSpaceTrend"===e&&(t.yAxis=["old_space","new_space","map_space","lo_space","code_space","read_only_space","new_lo_space","code_lo_space"],t.yAxisUnit="MB",t.noDataText="暂无堆空间趋势数据",t.showStatus=!0,t.fixedTip=!0),"gcTrend"===e&&(t.yAxis=["scavenge_duration","marksweep_duration","total_gc_duration"],t.yAxisUnit=this.gcUnit.label,t.noDataText="暂无 GC 趋势数据",t.showStatus=!0),"uvTrend"===e&&(t.yAxis=["active_handles"],t.yAxisUnit="",t.noDataText="暂无 Libuv 趋势数据",t.showStatus=!0),"qpsTrend"===e&&(t.yAxis=["qps"],t.yAxisUnit="",t.noDataText="暂无 QPS 趋势数据",t.showStatus=!0),"timerTrend"===e&&(t.yAxis=["active_timers"],t.yAxisUnit="",t.noDataText="暂无 Timer 趋势数据",t.showStatus=!0),"tcpTrend"===e&&(t.yAxis=["active_tcp_handles"],t.yAxisUnit="",t.noDataText="暂无 TCP 趋势数据",t.showStatus=!0),"udpTrend"===e&&(t.yAxis=["active_udp_handles"],t.yAxisUnit="",t.noDataText="暂无 UDP 趋势数据",t.showStatus=!0),t},chartData:function(){var e=this.type,t=this.commonData,r=this.trendData;if(["heapTrend","heapSpaceTrend"].includes(e))return r.map((function(e){var r=!0,a=!1,n=void 0;try{for(var i,o=t.yAxis[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var s=i.value;e[s]=e[s]/1024/1024}}catch(c){a=!0,n=c}finally{try{r||null==o.return||o.return()}finally{if(a)throw n}}return e}));if(["gcTrend"].includes(e)){var a=this.gcUnit.scale;return r.map((function(e){var r=Object.assign({},e),n=!0,i=!1,o=void 0;try{for(var s,c=t.yAxis[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){var l=s.value;r[l]=Number((e[l]/a).toFixed(2))}}catch(u){i=!0,o=u}finally{try{n||null==c.return||c.return()}finally{if(i)throw o}}return r}))}return r},lastValidData:function(){var e=this.commonData.yAxis,t=this.chartData,r=t.length,a=function(){r--;var a=t[r];if(e.every((function(e){return _(a[e])})))return{v:a}};while(r){var n=a();if("object"===Object(Wo["a"])(n))return n.v}},statusLabelStyle:function(){var e="",t=["#19be6b","#f89501","#ed4014"];return e+="background-color: "+this.setStatus(this.trendStatus.status,t)+";",e}},watch:{duration:function(){A(this.cancelToken),this.cancelToken=C(),this.getTrendData()}}};function Qo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Zo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qo(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Jo=Zo({props:{type:String,title:String,solid:Boolean,duration:Number,data:{required:!1,type:Object}},data:function(){return{loading:!1,loadError:void 0,trendData:[],extra:void 0,trendStatus:{},limit:void 0,selectedData:{}}}},Vo),es=Jo,ts=(r("3200"),Object(u["a"])(es,Go,Ho,!1,null,"2e152e33",null)),rs=ts.exports;function as(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ns(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?as(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):as(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var is=ns({props:{disablePanel:{required:!1,type:Boolean,default:!1},trendMap:{required:!1,type:Object}},components:{"x-trend-data":rs},data:function(){return{bts:[{label:"CPU Profile",value:"cpuprofile",ghost:!0},{label:"Heap Profile",value:"heapprofile",ghost:!0},{label:"Coredump",value:"core",ghost:!0},{label:"GC 追踪",value:"gcprofile",ghost:!0},{label:"堆快照",value:"heapsnapshot",ghost:!0},{label:"实时诊断",value:"diag",ghost:!0},{label:"保存趋势数据",value:"save",ghost:!0}],chartGroup:[[{label:"堆内存趋势",value:"heapTrend"},{label:"CPU 趋势",value:"cpuTrend"}],[{label:"堆空间组成",value:"heapSpaceTrend",solid:!0}],[{label:"GC 趋势",value:"gcTrend"},{label:"Libuv Active Handles 趋势",value:"uvTrend"}],[{label:"QPS 趋势",value:"qpsTrend"},{label:"Timer 趋势",value:"timerTrend"}],[{label:"TCP 趋势",value:"tcpTrend"},{label:"UDP 趋势",value:"udpTrend"}]],duration:24,durationGroup:[{label:"24H",value:24},{label:"3D",value:72},{label:"1W",value:168}]}}},Uo),os=is,ss=(r("7b62"),Object(u["a"])(os,No,Ro,!1,null,"7d82c6a6",null)),cs=ss.exports,ls=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"x-modal-content"},[r("x-loading",{attrs:{loading:e.save_trend_loading,type:"dot",size:"middle"}}),r("x-error-message",{directives:[{name:"show",rawName:"v-show",value:e.save_trend_load_error,expression:"save_trend_load_error"}],attrs:{message:e.save_trend_load_error}}),e.save_trend_loading||e.save_trend_load_error?e._e():r("div",{staticClass:"x-modal-results"},[r("p",[e._v(" 保存过去 24h 进程趋势数据成功，请访问 "),r("router-link",{staticClass:"x-modal-link",attrs:{to:{path:"/app/"+e.appId+"/file"},target:"_blank"}},[e._v("文件列表")]),e._v(" 查看详情。 ")],1),r("p",{staticStyle:{"margin-top":"8px"}},[e._v("文件名: "+e._s(e.save_trend_data))])])],1),r("div",{staticClass:"x-modal-footer"},[r("Button",{directives:[{name:"show",rawName:"v-show",value:!e.save_trend_loading,expression:"!save_trend_loading"}],attrs:{type:"primary",ghost:""},on:{click:e.closeSaveTrendModal}},[e._v("关闭")])],1)])},us=[];function ds(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ps(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ds(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ds(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var fs=m("dashboard"),hs=fs.mapState,vs=m("dashboard/instance/process"),bs=vs.mapState,gs=vs.mapMutations,ys=vs.mapActions,ms={created:function(){this.cancelToken=C(),this.saveProcessTrend({cancelToken:this.cancelToken.token})},beforeDestroy:function(){A(this.cancelToken)},methods:ps({},gs(["setSaveTrendModal"]),{},ys(["saveProcessTrend"]),{closeSaveTrendModal:function(){this.setSaveTrendModal({status:!1})}}),computed:ps({},hs(["appId"]),{},bs(["save_trend_loading","save_trend_load_error","save_trend_data"]))};function Os(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ws(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Os(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Os(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _s=ws({},ms),js=_s,xs=Object(u["a"])(js,ls,us,!1,null,null,null),Ps=xs.exports,ks=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"x-modal-content"},[r("x-loading",{attrs:{loading:e.take_action_loading,type:"dot",size:"middle"}}),r("x-error-message",{directives:[{name:"show",rawName:"v-show",value:e.take_action_load_error&&!e.isRunning,expression:"take_action_load_error && !isRunning"}],attrs:{message:e.take_action_load_error}}),r("x-error-message",{directives:[{name:"show",rawName:"v-show",value:e.isRunning,expression:"isRunning"}],attrs:{message:e.actionRunningTip}}),e.take_action_loading||e.take_action_load_error?e._e():r("div",{staticClass:"x-modal-results"},[r("p",[e._v(" "+e._s(e.actionTip)+"操作成功，请访问 "),r("router-link",{staticClass:"x-modal-link",attrs:{to:{path:"/app/"+e.appId+"/file"},target:"_blank"}},[e._v("文件列表")]),e._v(" 查看详情。 ")],1),r("p",{staticClass:"file-tip"},[e._v("生成文件路径: "+e._s(e.take_action_data))])])],1),r("div",{staticClass:"x-modal-footer"},[r("Button",{directives:[{name:"show",rawName:"v-show",value:!e.take_action_loading,expression:"!take_action_loading"}],attrs:{type:"primary",ghost:""},on:{click:e.closeTakeActionModal}},[e._v("关闭")]),r("Button",{directives:[{name:"show",rawName:"v-show",value:!e.take_action_loading&&e.isRunning,expression:"!take_action_loading && isRunning"}],staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.closeSampling}},[e._v("结束")])],1)])},Ds=[];function Ss(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Ts(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ss(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ss(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Cs=m("dashboard"),As=Cs.mapState,Ms=m("dashboard/instance/process"),Es=Ms.mapState,Is=Ms.mapMutations,Ns=Ms.mapActions,Rs={created:function(){this.cancelToken=C(),this.takeAction({cancelToken:this.cancelToken.token,status:0})},beforeDestroy:function(){A(this.cancelToken)},methods:Ts({},Is(["setTakeActionModal"]),{},Ns(["takeAction"]),{closeTakeActionModal:function(){this.setTakeActionModal({status:!1})},closeSampling:function(){this.takeAction({cancelToken:this.cancelToken.token,status:1})}}),computed:Ts({},As(["appId"]),{},Es(["takeActionData","take_action_loading","take_action_load_error","take_action_data"]),{actionTip:function(){var e=this.takeActionData||{},t=e.action,r="";switch(t){case"cpuprofile":r="CPU 采样";break;case"heapsnapshot":r="堆快照";break;case"heapprofile":r="Heap 采样";break;case"gcprofile":r="GC 采样";break;case"diag":r="诊断报告";break;case"core":r="核心转储";break;default:break}return r},actionRunningTip:function(){var e=this.takeActionData||{},t=e.action,r="采样正在进行中，是否需要立即结束";switch(t){case"cpuprofile":r="CPU ".concat(r);break;case"heapprofile":r="Heap ".concat(r);break;case"gcprofile":r="GC ".concat(r);break;default:break}return r},isRunning:function(){var e=this.takeActionData||{},t=e.action,r=this.take_action_load_error;return!["heapsnapshot","diag","core"].includes(t)&&r&&r.includes("is running")&&!r.includes("conflict action")}})};function Ls(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Fs(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ls(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ls(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var $s=Fs({},Rs),zs=$s,Bs=(r("925a"),Object(u["a"])(zs,ks,Ds,!1,null,"669cefc1",null)),Us=Bs.exports;function Gs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Hs(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gs(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gs(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ws=Hs({props:{processes:Array},components:{"x-node":vo,"x-check-xprofiler":Io,"x-trend":cs,"x-save-trend":Ps,"x-take-action":Us},data:function(){return{processData:{pid:"未知"},metrics:[{label:y(Nr.startTime),value:"startTimeFmt",time:!0},{label:y(Nr.updateTime),value:"updateTimeFmt",time:!0},{label:y(Nr.cpuUsage),value:"cpuUsageFmt"},{label:y(Nr.heapMemory),value:"heapUsageFmt"},{label:y(Nr.gcUsage),value:"gcUsageFmt"},{label:y(Nr.rssUsage),value:"rssFmt"},{label:y(Nr.uvHandles),value:"uvHandles"},{label:y(Nr.timers),value:"timers"},{label:y(Nr.tcpHandles),value:"tcpHandles"},{label:y(Nr.udpHandles),value:"udpHandles"}],detailButtons:[{label:y(Nr.processDataTrend),value:"processTrend"},{label:y(Nr.saveProcessData),value:"saveProcessData"}],actionButtons:[{label:y(Nr.cpuprofile),value:"cpuprofile"},{label:y(Nr.heapsnapshot),value:"heapsnapshot"},{label:y(Nr.heapprofile),value:"heapprofile"},{label:y(Nr.gcprofile),value:"gcprofile"},{label:y(Nr.coredump),value:"core"},{label:y(Nr.diag),value:"diag"}],drawerQueryKey:"process-trend",drawerQueryKeyProcesses:"show-processes",modalQueryKeySaveTrend:"save-trend-data",modalQueryKeyActions:"take-actions"}}},Ji),Xs=Ws,qs=(r("d641"),Object(u["a"])(Xs,Di,Si,!1,null,"0db92114",null)),Ks=qs.exports,Ys=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"catalogue"},e._l(e.catalogues,(function(t,a){return r("div",{key:a,staticStyle:{position:"relative"}},[r("div",{staticClass:"tag"},[r("x-dropdown",{staticStyle:{"padding-left":"17px"},attrs:{title:t.label,position:"left"}},[r("template",{slot:"content"},e._l(e.sort(t.value),(function(a,n){return r("div",{key:n,class:"x-dropdown-li"+(a.pid===e.processData.pid?" selected":""),on:{click:function(t){return e.selectPid(a)}}},[r("div",{staticClass:"catalogue-dropdown-dot",style:"background-color: "+a.color}),r("div",{staticClass:"catalogue-dropdown-pid"},[e._v(e._s(a.pid)+":")]),r("div",{staticClass:"catalogue-dropdown-fmt"},[e._v(e._s(a[t.fmt]))])])})),0)],2)],1)])})),0)},Vs=[],Qs={methods:{updateSelectedProcess:function(e){this.processData=e},selectPid:function(e){this.$emit("selectPid",this.processes.indexOf(e))},arrayCopy:function(){var e=[],t=!0,r=!1,a=void 0;try{for(var n,i=this.processes[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var o=n.value;e.push(o)}}catch(s){r=!0,a=s}finally{try{t||null==i.return||i.return()}finally{if(r)throw a}}return e},soryByKey:function(e){var t=this.arrayCopy();return t.sort((function(t,r){return Number(t[e])<Number(r[e])?1:-1})),t},sort:function(e){return"cpu"===e?this.soryByKey("cpuUsage"):"heapMemory"===e?this.soryByKey("heapUsage"):"rss"===e?this.soryByKey("rss"):"gc"===e?this.soryByKey("gcUsage"):"timer"===e?this.soryByKey("timers"):"tcp"===e?this.soryByKey("tcpHandles"):"udp"===e?this.soryByKey("udpHandles"):this.processes}}};function Zs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Js(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zs(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zs(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ec=Js({props:{processes:Array},data:function(){return{processData:{},catalogues:[{label:"CPU",value:"cpu",fmt:"cpuUsageFmt"},{label:"堆内存",value:"heapMemory",fmt:"heapUsageFmt"},{label:"常驻内存 (RSS)",value:"rss",fmt:"rssFmt"},{label:"GC",value:"gc",fmt:"gcUsageFmt"},{label:"定时器数量",value:"timer",fmt:"timers"},{label:"TCP 连接数",value:"tcp",fmt:"tcpHandles"},{label:"UDP 连接数",value:"udp",fmt:"udpHandles"}]}}},Qs),tc=ec,rc=(r("e42b"),Object(u["a"])(tc,Ys,Vs,!1,null,"220565b7",null)),ac=rc.exports,nc=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"process-chart-group"},e._l(e.scatters,(function(t,a){return r("x-scatter",{key:a,staticClass:"process-scatter",attrs:{display:e.display,fields:t.fields,xAxisUnit:t.xAxisUnit,yAxisUnit:t.yAxisUnit,data:e.processes},on:{select:e.selectPid},scopedSlots:e._u([{key:"header",fn:function(t){var a=t.proc;return[r("div",{staticClass:"scatter-header",style:"background-color: "+a.color},[e._v("PID: "+e._s(a.pid))])]}},{key:"content",fn:function(t){var a=t.proc,n=t.fields,i=t.unit;return[r("div",{staticClass:"scatter-content"},[e._l(e.scatterContent,(function(t,n){return r("div",{key:n,staticClass:"scatter-content-group"},[r("div",{staticClass:"scatter-content-key"},[e._v(e._s(t.label))]),r("div",{staticClass:"scatter-content-value"},[e._v(e._s(a[t.value]))])])})),e._l(n,(function(t,n){return r("div",{key:t,staticClass:"scatter-content-group",staticStyle:{"margin-top":"3px"}},[r("div",{staticClass:"scatter-content-key"},[e._v(e._s(t))]),r("div",{staticClass:"scatter-content-value"},[e._v(e._s(a[t])+e._s(i[n]))])])}))],2)]}}],null,!0)})})),1)},ic=[],oc={methods:{selectPid:function(e){this.$emit("selectPid",e)},setScatterData:function(e){e.HEAP=Number(e.heapUsage),e.CPU=Number(e.cpuUsage),e.GC=Number(e.gcUsage),e.RSS=Number((e.rss/1024/1024).toFixed(2))}}};function sc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function cc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sc(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var lc=cc({props:{display:Boolean,processes:Array},data:function(){return{scatters:[{fields:["HEAP","CPU"],xAxisUnit:["%","-3.8em"],yAxisUnit:["%","0"]},{fields:["RSS","GC"],xAxisUnit:["MB","-3.8em"],yAxisUnit:["%","0"]}],scatterContent:[{label:"命令",value:"cmd"}]}}},oc),uc=lc,dc=(r("f342"),Object(u["a"])(uc,nc,ic,!1,null,"248a2047",null)),pc=dc.exports;function fc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function hc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fc(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var vc=hc({components:{"x-line":ki,"x-panel":Ks,"x-catalogue":ac,"x-scatter":pc,"x-node":vo},data:function(){return{selectedPid:void 0,xProcesses:[],nodeProcesses:[],nessaryQueryArgs:["tab","agentId"],onlyAlived:!0}}},si),bc=vc,gc=(r("e765"),Object(u["a"])(bc,Kn,Yn,!1,null,"ec6dc4e2",null)),yc=gc.exports,mc=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("x-overview"),r("x-detail-info",{staticClass:"detail"})],1)},Oc=[],wc={},_c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"overview"},[r("div",{staticClass:"section-title"},[e._v("系统信息概览")]),r("x-pie2",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"pieCommon"}),r("x-loading",{attrs:{loading:e.overview_loading,type:"dot",size:"middle",top:105}}),r("x-error-message",{directives:[{name:"show",rawName:"v-show",value:e.overview_load_error,expression:"overview_load_error"}],attrs:{message:e.overview_load_error,top:80}}),r("transition",{attrs:{name:"slide-noward"}},[e.overview_loading||e.overview_load_error?e._e():r("div",{staticClass:"content"},[e._l(e.pies,(function(e,t){return r("div",{key:t,staticClass:"pie"},[e.fake?r("x-error-message",{attrs:{message:e.message}}):r("x-pie2",{attrs:{title:e.title,percentage:e.percentage}})],1)})),r("div",{staticClass:"pie"},[e.disks.fake?r("x-error-message",{attrs:{message:e.disks.message}}):r("x-pie2",{attrs:{title:e.disks.title,percentage:e.disks.percentage}},[e.disks.list.length?r("div",{attrs:{slot:"title"},slot:"title"},[r("x-dropdown",{attrs:{transformY:8}},[r("div",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.disks.title))]),r("div",{attrs:{slot:"content"},slot:"content"},e._l(e.disks.list,(function(t,a){return r("div",{key:a,staticClass:"disk-list x-dropdown-li"},[r("div",{staticClass:"status-dot",style:"background-color: "+e.getColor(t.percentage)+";"}),r("div",[e._v(e._s(t.disk))]),r("div",{staticClass:"disk-percentage"},[e._v(e._s(t.percentage)+"%")])])})),0)])],1):e._e()])],1),r("div",{staticClass:"pie metrics"},[e.currentMetrics.length?r("div",{staticStyle:{width:"100%"}},e._l(e.currentMetrics,(function(t,a){return r("div",{key:a,staticClass:"metric-content",style:0!==a&&t.length?"margin-top: 25px;":""},e._l(t,(function(t,a){return r("div",{key:a,staticClass:"metric-group"},[r("div",{staticClass:"metric-key"},[e._v(e._s(t.key))]),r("div",{staticClass:"metric-value"},[e._v(e._s(t.value))])])})),0)})),0):r("x-error-message",{attrs:{message:"暂无当前系统指标数据"}})],1)],2)])],1)},jc=[];function xc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Pc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xc(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var kc=_,Dc=S,Sc=m("dashboard/instance"),Tc=Sc.mapState,Cc=m("dashboard/instance/system"),Ac=Cc.mapState,Mc=Cc.mapActions;function Ec(e,t){var r="-";return t?kc(e)?Dc(e):r:kc(e)?e:r}var Ic={created:function(){this.cancelToken=C(),this.getSystemOverview({cancelToken:this.cancelToken.token})},mounted:function(){this.pieCommon=this.$refs.pieCommon},beforeDestroy:function(){A(this.cancelToken)},methods:Pc({},Mc(["getSystemOverview"]),{getColor:function(e){return this.$refs.pieCommon.getColor(e)}}),computed:Pc({},Ac(["overview_loading","overview_load_error","overview_data"]),{},Tc(["agentId"]),{pies:function(){var e=this.overview_data;if(!e)return[];var t=[];return kc(e.osCpu)?t.push({title:"CPU 使用率",percentage:e.osCpu}):t.push({fake:!0,message:"暂无系统 CPU 信息"}),kc(e.osMem)?t.push({title:"MEM 使用率",percentage:e.osMem}):t.push({fake:!0,message:"暂无系统 Memory 信息"}),t},disks:function(){var e=this.overview_data;if(!e)return{};var t={};return kc(e.maxDisk)?(t.title="Disk 使用率",t.percentage=e.maxDisk):(t.fake=!0,t.message="暂无系统磁盘信息"),e.disks?(t.list=Object.entries(e.disks).map((function(e){var t=Object(O["a"])(e,2),r=t[0],a=t[1];return{disk:r,percentage:a}})),t.list.sort((function(e,t){return e.percentage<t.percentage?1:-1}))):t.list=[],t},currentMetrics:function(){var e=this.overview_data;if(!e)return[];var t=[[],[],[]],r=e.load1,a=e.load5,n=e.load15,i=e.nodeCount,o=e.scavengeTotal,s=e.scavengeAverage,c=e.marksweepTotal,l=e.marksweepAverage,u=e.rtAverage,d=e.rtExpired,p=e.qps;return t[0].push({key:"Load1 / 5 / 15",value:"".concat(Ec(r)," / ").concat(Ec(a)," / ").concat(Ec(n))}),t[0].push({key:"Node.js 进程数",value:Ec(i)}),t[1].push({key:"Scavenge Total / Avg",value:"".concat(Ec(o,!0)," / ").concat(Ec(s,!0))}),t[1].push({key:"Marksweep Total / Avg",value:"".concat(Ec(c,!0)," / ").concat(Ec(l,!0))}),t[2].push({key:"RT Expired / Avg",value:"".concat(Ec(d)," / ").concat(Ec(u,!0))}),t[2].push({key:"QPS",value:Ec(p)}),t}}),watch:{agentId:function(){this.getSystemOverview({cancelToken:this.cancelToken.token})}}};function Nc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Rc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Nc(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Lc=Rc({},Ic),Fc=Lc,$c=(r("82b1"),Object(u["a"])(Fc,_c,jc,!1,null,"7edc25d0",null)),zc=$c.exports,Bc=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"trend-duration-wrapper"},[r("div",{staticClass:"tag-group trend-duration"},e._l(e.durationGroup,(function(t,a){return r("div",{key:a,class:"tag trend-duration-tag"+(e.duration===t.value?" tag-selected":""),on:{click:function(r){e.duration=t.value}}},[e._v(e._s(t.label))])})),0)]),r("div",{staticClass:"section-title"},[e._v("系统信息周期详情")]),r("div",{staticClass:"charts"},e._l(e.chartGroup,(function(t,a){return r("div",{key:a},[r("div",{staticClass:"system-detail",style:0===a?"margin-top: 10px;":"margin-top: 20px;"},e._l(t,(function(t,a){return r("x-system-trend",{key:a,ref:t.value,refInFor:!0,staticClass:"system-trend-data",attrs:{type:t.value,title:t.label,solid:t.solid,duration:e.duration},on:{linkage:e.linkage,hidden:e.hidden,broadcast:e.broadcast}})})),1),a!==e.chartGroup.length-1?r("div",{staticClass:"interval-section"}):e._e()])})),0)])},Uc=[],Gc={created:function(){var e=this.$route.query;_(e.duration)?this.duration=Number(e.duration):this.duration=24},methods:{showTip:function(e,t){var r=!0,a=!1,n=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var s=i.value,c=this.$refs[s][0];c&&c.showTip(t)}}catch(l){a=!0,n=l}finally{try{r||null==o.return||o.return()}finally{if(a)throw n}}},handleBroadcase:function(e,t){var r=!0,a=!1,n=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var s=i.value,c=this.$refs[s][0];c&&c.handleBroadcase(t)}}catch(l){a=!0,n=l}finally{try{r||null==o.return||o.return()}finally{if(a)throw n}}},hiddenTip:function(e){var t=!0,r=!1,a=void 0;try{for(var n,i=e[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var o=n.value;this.$refs[o][0].hiddenTip()}}catch(s){r=!0,a=s}finally{try{t||null==i.return||i.return()}finally{if(r)throw a}}},linkage:function(e){this.showTip(this.chartRefs,e)},hidden:function(){this.hiddenTip(this.chartRefs)},broadcast:function(e){this.handleBroadcase(this.chartRefs,e)}},computed:{chartRefs:function(){var e=[],t=!0,r=!1,a=void 0;try{for(var n,i=this.chartGroup[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var o=n.value,s=!0,c=!1,l=void 0;try{for(var u,d=o[Symbol.iterator]();!(s=(u=d.next()).done);s=!0){var p=u.value.value;e.push(p)}}catch(f){c=!0,l=f}finally{try{s||null==d.return||d.return()}finally{if(c)throw l}}}}catch(f){r=!0,a=f}finally{try{t||null==i.return||i.return()}finally{if(r)throw a}}return e}},watch:{$route:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];I.call(this,t,"duration","duration")},duration:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];N.call(this,"duration","duration",t)}}},Hc=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"trend-title-group"},[r("div",{staticClass:"trend-title system-title"},[e._v(" "+e._s(e.title)+" "),e.extra?r("span",{staticClass:"chart-extra"},[e._v("("+e._s(e.extra)+")")]):e._e()])]),r("div",[r("div",{staticStyle:{"text-align":"center"}},[r("x-loading",{attrs:{loading:e.loading,top:"100",type:"dot",size:"middle"}})],1),e.loadError?r("x-error-message",{attrs:{message:e.loadError,top:"100"}}):e._e(),r("transition",{attrs:{name:"slide-noward"}},[e.loading||e.loadError?e._e():r("div",{staticClass:"charts"},[r("x-area",{ref:"area",staticClass:"main-chart",attrs:{xAxis:"time",data:e.chartData,yAxis:e.commonData.yAxis,yAxisUnit:e.commonData.yAxisUnit,noDataText:e.commonData.noDataText,fixedTip:e.commonData.fixedTip,solid:e.solid},on:{linkage:e.linkage,hidden:e.hidden,broadcast:e.broadcast}})],1)])],1)])},Wc=[];function Xc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function qc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xc(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Kc=m("dashboard/instance"),Yc=Kc.mapState,Vc=m("dashboard/instance/system"),Qc=Vc.mapActions,Zc={created:function(){this.cancelToken=C(),this.getTrendData()},beforeDestroy:function(){A(this.cancelToken)},methods:qc({},Qc(["getSystemTrend"]),{getTrendData:function(){var e=this;this.duration&&(this.loading=!0,this.getSystemTrend({cancelToken:this.cancelToken.token,trendType:this.type,duration:this.duration}).then((function(t){if(0!==Object.keys(t).length){var r=t.list,a=t.extra,n=t.yAxis;Array.isArray(r)&&(e.trendData=r),Array.isArray(n)&&n.length&&(e.yAxis=n),e.extra=a,e.loading=!1}})).catch((function(t){e.loadError=t.message,e.loading=!1})))},showTip:function(e){var t=this.$refs.area;t&&t.showTip(e)},hiddenTip:function(){var e=this.$refs.area;e&&e.hiddenTip()},handleBroadcase:function(e){var t=this.$refs.area;t&&t.handleBroadcase(e)},linkage:function(e){this.$emit("linkage",e)},hidden:function(){this.$emit("hidden")},broadcast:function(e){this.$emit("broadcast",e)},getTimeUnit:function(e){var t=0,r=!0,a=!1,n=void 0;try{for(var i,o=this.trendData[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var s=i.value,c=!0,l=!1,u=void 0;try{for(var d,p=e[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var f=d.value;s[f]>t&&(t=s[f])}}catch(v){l=!0,u=v}finally{try{c||null==p.return||p.return()}finally{if(l)throw u}}}}catch(v){a=!0,n=v}finally{try{r||null==o.return||o.return()}finally{if(a)throw n}}var h={};return t<1e3?(h.label="ms",h.scale=1):(h.label="s",h.scale=1e3),h},formatTimeData:function(e){var t=this.trendData,r=this.commonData,a=this[e].scale;return t.map((function(e){var t=Object.assign({},e),n=!0,i=!1,o=void 0;try{for(var s,c=r.yAxis[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){var l=s.value;t[l]=Number((e[l]/a).toFixed(2))}}catch(u){i=!0,o=u}finally{try{n||null==c.return||c.return()}finally{if(i)throw o}}return t}))}}),computed:qc({},Yc(["agentId"]),{gcUnit:function(){return this.getTimeUnit(["scavenge_avg","marksweep_avg","total_gc_avg"])},rtUnit:function(){return this.getTimeUnit(["response_time"])},commonData:function(){var e=this.type,t={yAxis:[],yAxisUnit:"",noDataText:""};return"osCpuTrend"===e&&(t.yAxis=["os_cpu"],t.yAxisUnit="%",t.noDataText="暂无系统 CPU 趋势数据",t.fixedTip=!0),"osMemoryTrend"===e&&(t.yAxis=["os_memory"],t.yAxisUnit="%",t.noDataText="暂无系统内存趋势数据",t.fixedTip=!0),"loadTrend"===e&&(t.yAxis=["load1","load5","load15"],t.yAxisUnit="",t.noDataText="暂无系统 Load 负载数据",t.fixedTip=!0),"nodeCountTrend"===e&&(t.yAxis=["node_count"],t.yAxisUnit="",t.noDataText="暂无系统 Node.js 进程数趋势数据"),"osGcTrend"===e&&(t.yAxis=["scavenge_avg","marksweep_avg","total_gc_avg"],t.yAxisUnit=this.gcUnit.label,t.noDataText="暂无整体 Node.js 进程 GC 数趋势数据"),"diskUsageTrend"===e&&(t.yAxis=this.yAxis,t.yAxisUnit="%",t.noDataText="暂无磁盘使用趋势数据"),"qpsTrend"===e&&(t.yAxis=["qps"],t.yAxisUnit="",t.noDataText="暂无 QPS 趋势数据"),"httpResponseTrend"===e&&(t.yAxis=["response_time"],t.yAxisUnit=this.rtUnit.label,t.noDataText="暂无 HTTP 响应数据"),t},chartData:function(){var e=this.type,t=this.trendData;return["osGcTrend"].includes(e)?this.formatTimeData("gcUnit"):["httpResponseTrend"].includes(e)?this.formatTimeData("rtUnit"):t}}),watch:{agentId:function(){this.getTrendData()},duration:function(){A(this.cancelToken),this.cancelToken=C(),this.getTrendData()}}};function Jc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function el(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jc(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var tl=el({props:{type:String,title:String,solid:Boolean,duration:Number},data:function(){return{loading:!1,loadError:void 0,trendData:[],extra:void 0,yAxis:[]}}},Zc),rl=tl,al=(r("8fa2"),Object(u["a"])(rl,Hc,Wc,!1,null,"71a89546",null)),nl=al.exports;function il(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ol(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?il(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):il(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var sl=ol({components:{"x-system-trend":nl},data:function(){return{chartGroup:[[{label:"系统 CPU 趋势",value:"osCpuTrend"},{label:"系统 Memory 趋势",value:"osMemoryTrend"}],[{label:"系统 Load 负载",value:"loadTrend"},{label:"Node.js 进程数",value:"nodeCountTrend"}],[{label:"整体 GC 状态",value:"osGcTrend"},{label:"磁盘使用率",value:"diskUsageTrend"}],[{label:"QPS 趋势",value:"qpsTrend"},{label:"HTTP 响应时间",value:"httpResponseTrend"}]],duration:void 0,durationGroup:[{label:"24H",value:24},{label:"3D",value:72},{label:"1W",value:168}],nessaryQueryArgs:["tab","agentId"]}}},Gc),cl=sl,ll=(r("7fbd"),Object(u["a"])(cl,Bc,Uc,!1,null,"e6c2c0ec",null)),ul=ll.exports;function dl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function pl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dl(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var fl=pl({components:{"x-overview":zc,"x-detail-info":ul}},wc),hl=fl,vl=(r("26db"),Object(u["a"])(hl,mc,Oc,!1,null,"16c5f5e7",null)),bl=vl.exports,gl=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("x-error-files",{directives:[{name:"show",rawName:"v-show",value:!e.files_loading&&!e.files_load_error&&!e.logs_load_error,expression:"!files_loading && !files_load_error && !logs_load_error"}]}),e.errorFile?r("x-error-logs",{staticClass:"error-logs"}):e._e(),r("x-loading",{attrs:{loading:e.files_loading,type:"dot",size:"middle",top:"30vh"}}),r("x-loading",{attrs:{loading:e.logs_loading,type:"dot",size:"middle",top:"calc(30vh - 32px)"}}),r("x-error-message",{directives:[{name:"show",rawName:"v-show",value:!e.files_loading&&e.files_load_error||!e.logs_loading&&e.logs_load_error,expression:"(!files_loading && files_load_error) || (!logs_loading && logs_load_error)"}],attrs:{message:e.files_load_error||e.logs_load_error,top:"calc(30vh -  25px)"}})],1)},yl=[];function ml(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Ol(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ml(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ml(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var wl=m("dashboard/instance/errors"),_l=wl.mapState,jl={computed:Ol({},_l(["errorFile","files_loading","files_load_error","logs_loading","logs_load_error"]))},xl=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wrapper"},[r("transition",{attrs:{name:"slide"}},[r("Select",{directives:[{name:"show",rawName:"v-show",value:e.files_data.length,expression:"files_data.length"}],staticClass:"agent-selector error-files-selector",model:{value:e.selectedErrorFile,callback:function(t){e.selectedErrorFile=t},expression:"selectedErrorFile"}},e._l(e.files_data,(function(t,a){return r("Option",{key:a,attrs:{value:t.value}},[e._v(e._s(t.value))])})),1)],1)],1)},Pl=[];function kl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Dl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kl(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Sl=m("dashboard/instance"),Tl=Sl.mapState,Cl=m("dashboard/instance/errors"),Al=Cl.mapState,Ml=Cl.mapMutations,El=Cl.mapActions,Il={created:function(){this.cancelToken=C(),this.getErrorFiles({cancelToken:this.cancelToken.token})},beforeDestroy:function(){this.reset(),A(this.cancelToken)},methods:Dl({},El(["getErrorFiles"]),{},Ml(["set_files_load_error","setErrorFile"]),{reset:function(){this.set_files_load_error(void 0),this.setErrorFile(void 0),this.selectedErrorFile=void 0}}),computed:Dl({},Al(["files_data"]),{},Tl(["agentId"]),{errorFiles:function(){return!!this.files_data.length}}),watch:{$route:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];I.call(this,t,"file","selectedErrorFile")},files_data:function(){if(this.errorFiles){this.set_files_load_error(void 0);var e=this.$route.query,t=this.files_data.map((function(e){return e.value}));this.valueWhiteList.selectedErrorFile=t,e.file&&t.includes(e.file)?this.selectedErrorFile=decodeURIComponent(e.file):this.selectedErrorFile=this.files_data[0].value}else this.set_files_load_error("项目下暂无错误日志信息，请查看您的 xtransit 是否正确配置了 error_logs 错误日志文件路径数组")},selectedErrorFile:function(){for(var e=this,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var n=r[0],i=r[1];i&&n&&i!==n&&this.setErrorFile(void 0),setTimeout((function(){return e.setErrorFile(e.selectedErrorFile)}),0),this.selectedErrorFile&&N.call(this,"file","selectedErrorFile",r)},agentId:function(){this.reset(),this.getErrorFiles({cancelToken:this.cancelToken.token})}}};function Nl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Rl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Nl(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ll=Rl({data:function(){return{selectedErrorFile:void 0,nessaryQueryArgs:["tab","agentId"],valueWhiteList:{selectedErrorFile:[]}}}},Il),Fl=Ll,$l=(r("f893"),Object(u["a"])(Fl,xl,Pl,!1,null,"72aa475e",null)),zl=$l.exports,Bl=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("transition",{attrs:{name:"slide-noward"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:!e.logs_loading&&!e.logs_load_error,expression:"!logs_loading && !logs_load_error"}]},[r("x-table",{attrs:{columns:e.columns,data:e.errors,noDataText:"当前应用暂无错误信息","no-data-head":"",border:"",stribe2:""},scopedSlots:e._u([{key:"occuredTime",fn:function(t){var a=t.row;return[r("div",{staticClass:"error-content"},[r("code",[e._v(e._s(a.date))])]),r("div",{staticClass:"error-content",staticStyle:{"margin-top":"5px"}},[r("code",[e._v(e._s(a.time))])])]}},{key:"errorType",fn:function(t){var a=t.row;return[r("code",{staticClass:"error-content"},[e._v(e._s(a.type))])]}},{key:"errorDetail",fn:function(t){var a=t.row;return[r("div",{staticClass:"error-content"},[e._l(a.stack,(function(t,a){return r("div",{key:a},[0===a?r("code",[e._v(e._s(t))]):r("code",{staticStyle:{"margin-left":"15px"}},[e._v(e._s(t))])])})),a.extra.length?r("div",e._l(a.extra,(function(t,a){return r("div",{key:a},[r("code",[e._v(e._s(t))])])})),0):e._e()],2)]}}])}),e.totaLogCount?r("div",{staticClass:"pagination"},[r("Page",{attrs:{total:e.totaLogCount,"page-size":e.pageSize,current:e.currentPage,size:"small","show-elevator":""},on:{"on-change":e.changeLogPage}})],1):e._e()],1)])},Ul=[];function Gl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Hl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gl(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Wl=m("dashboard/instance/errors"),Xl=Wl.mapState,ql=Wl.mapMutations,Kl=Wl.mapActions,Yl={created:function(){this.cancelToken=C();var e=this.$route.query;e.page?this.currentPage=Number(e.page):this.currentPage=1},beforeDestroy:function(){A(this.cancelToken),this.set_logs_load_error(void 0)},methods:Hl({},ql(["set_logs_load_error"]),{},Kl(["getErrorLogs"]),{changeLogPage:function(e){this.currentPage=e}}),computed:Hl({},Xl(["logs_loading","logs_load_error","logs_data"]),{errors:function(){var e=this.logs_data,t=e.list,r=e.count;return Array.isArray(t)?(_(r)&&(this.totaLogCount=r),t.map((function(e){var t=Qn()(Number(e.timestamp)).format("YYYY-MM-DD HH:mm:ss").split(" ");return{date:t[0],time:t[1],type:e.type,stack:e.stack.split("\n"),extra:e.extra.split("\n")}}))):[]}}),watch:{$route:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];I.call(this,t,"page","currentPage")},currentPage:function(){if(this.currentPage){this.getErrorLogs({cancelToken:this.cancelToken.token,currentPage:this.currentPage,pageSize:this.pageSize});for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];N.call(this,"page","currentPage",t)}}}};function Vl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Ql(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vl(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Zl=Ql({data:function(){return{currentPage:void 0,pageSize:20,totaLogCount:0,columns:[{title:"发生时间",value:"occuredTime",align:"center",width:120},{title:"错误类型",value:"errorType",align:"center",width:150},{title:"详细错误堆栈",value:"errorDetail"}],nessaryQueryArgs:["tab","agentId","file"]}}},Yl),Jl=Zl,eu=(r("f5b7"),Object(u["a"])(Jl,Bl,Ul,!1,null,"65b73972",null)),tu=eu.exports;function ru(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function au(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ru(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ru(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var nu=au({components:{"x-error-files":zl,"x-error-logs":tu}},jl),iu=nu,ou=(r("a2ba"),Object(u["a"])(iu,gl,yl,!1,null,"31b6fa09",null)),su=ou.exports,cu=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("x-module-files",{directives:[{name:"show",rawName:"v-show",value:!e.files_loading&&!e.files_load_error&&!e.module_load_error,expression:"!files_loading && !files_load_error && !module_load_error"}]}),e.moduleFile?r("x-module-detail",{staticClass:"module-detail"}):e._e(),r("x-loading",{attrs:{loading:e.files_loading,type:"dot",size:"middle",top:"30vh"}}),r("x-loading",{attrs:{loading:e.module_loading,type:"dot",size:"middle",top:"calc(30vh - 72px)"}}),r("x-error-message",{directives:[{name:"show",rawName:"v-show",value:!e.files_loading&&e.files_load_error||!e.module_loading&&e.module_load_error,expression:"(!files_loading && files_load_error) || (!module_loading && module_load_error)"}],attrs:{message:e.files_load_error||e.module_load_error,top:"calc(30vh -  25px)"}})],1)},lu=[];function uu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function du(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?uu(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var pu=m("dashboard/instance/modules"),fu=pu.mapState,hu={computed:du({},fu(["moduleFile","files_loading","files_load_error","module_loading","module_load_error"]))},vu=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wrapper"},[r("transition",{attrs:{name:"slide"}},[r("Alert",{directives:[{name:"show",rawName:"v-show",value:e.files_data.length,expression:"files_data.length"}],staticClass:"x-alert",attrs:{type:e.riskTip.alertType}},[r("div",{staticClass:"alert-group"},[r("Icon",{style:"color: "+e.riskTip.color+";",attrs:{type:e.riskTip.iconType}}),r("div",{staticClass:"alert-desc",domProps:{innerHTML:e._s(e.riskTip.tip)}})],1)])],1),r("div",{staticClass:"tab"},[r("transition",{attrs:{name:"slide"}},[r("Select",{directives:[{name:"show",rawName:"v-show",value:e.files_data.length,expression:"files_data.length"}],staticClass:"agent-selector module-files-selector",model:{value:e.selectedModuleFile,callback:function(t){e.selectedModuleFile=t},expression:"selectedModuleFile"}},e._l(e.files_data,(function(t,a){return r("Option",{key:a,attrs:{value:t.value}},[e._v(e._s(t.value))])})),1)],1),r("transition",{attrs:{name:"slide"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.files_data.length,expression:"files_data.length"}],staticClass:"tag-group mod-group"},[r("div",{class:"tag"+(e.dependencies?" tag-selected":""),on:{click:function(t){return e.changeDevType(!0)}}},[e._v("dependencies")]),r("div",{class:"tag"+(e.dependencies?"":" tag-selected"),on:{click:function(t){return e.changeDevType(!1)}}},[e._v("devDependencies")])])])],1)],1)},bu=[];r("a15b");function gu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function yu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gu(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var mu=m("dashboard/instance"),Ou=mu.mapState,wu=m("dashboard/instance/modules"),_u=wu.mapState,ju=wu.mapMutations,xu=wu.mapActions,Pu={created:function(){this.cancelToken=C(),this.getModuleFiles({cancelToken:this.cancelToken.token})},beforeDestroy:function(){this.reset(),A(this.cancelToken)},methods:yu({},xu(["getModuleFiles"]),{},ju(["set_files_load_error","setModuleFile","setShowDependencies","setRiskModules"]),{reset:function(){this.set_files_load_error(void 0),this.setModuleFile(void 0),this.setRiskModules(void 0),this.selectedModuleFile=void 0},formatRisk:function(e,t){return'<code style="color: '.concat(t,';">').concat(e,"</code>")},setRiskTip:function(e,t){var r=[];return e.critical&&r.push("".concat(this.formatRisk(e.critical,t)," 个极危漏洞")),e.high&&r.push("".concat(this.formatRisk(e.high,t)," 个高危漏洞")),e.moderate&&r.push("".concat(this.formatRisk(e.moderate,t)," 个中危漏洞")),e.low&&r.push("".concat(this.formatRisk(e.low,t)," 个低危漏洞")),"发现 ".concat(r.join("，"))},changeDevType:function(e){this.dependencies=e}}),computed:yu({},_u(["files_data"]),{},Ou(["agentId"]),{moduleFiles:function(){return!!this.files_data.length},riskTip:function(){var e=this,t={},r=this.files_data.filter((function(t){return t.value===e.selectedModuleFile}));if(!r.length)return t;var a=r[0].risk;if(!a)return t.tip="当前项目引入的 Npm 模块未进行安全扫描",t.alertType="info",t.iconType="ios-alert-outline",t.color="#2376b7",t;var n=a.vulnerabilities||{},i="当前项目引入的 Npm 模块",o="（扫描 <code>".concat(a.totalDependencies,"</code> 个模块于 <code>").concat(a.scanTime,"</code>）");return n.critical||n.high?(t.alertType="error",t.iconType="ios-alert-outline",t.color="#e33900",t.tip=this.setRiskTip(a.vulnerabilities,t.color)):n.moderate?(t.alertType="warning",t.iconType="ios-alert-outline",t.color="#f89501",t.tip=this.setRiskTip(a.vulnerabilities,t.color)):n.low?(t.alertType="info",t.iconType="ios-alert-outline",t.color="#2376b7",t.tip=this.setRiskTip(a.vulnerabilities,t.color)):(t.alertType="success",t.iconType="ios-checkmark-circle-outline",t.color="#2a9446",t.tip="不存在安全风险"),t.tip="".concat(i).concat(t.tip).concat(o),t}}),watch:{$route:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];I.call(this,t,"file","selectedModuleFile"),I.call(this,t,"dependencies","dependencies")},files_data:function(){if(this.moduleFiles){this.set_files_load_error(void 0);var e=this.$route.query,t=this.files_data.map((function(e){return e.value}));this.valueWhiteList.selectedModuleFile=t,e.file&&t.includes(e.file)?this.selectedModuleFile=decodeURIComponent(e.file):this.selectedModuleFile=this.files_data[0].value}else this.set_files_load_error("项目下暂无模块信息，请查看您的 xtransit 是否正确配置了 packages 模块文件路径数组")},selectedModuleFile:function(){for(var e=this,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var n=r[0],i=r[1];if(i&&n&&i!==n&&(this.setModuleFile(void 0),this.setRiskModules(void 0)),setTimeout((function(){e.setModuleFile(e.selectedModuleFile);var t=!0,r=!1,a=void 0;try{for(var n,i=e.files_data[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var o=n.value;o.value===e.selectedModuleFile&&e.setRiskModules(o.riskModules)}}catch(s){r=!0,a=s}finally{try{t||null==i.return||i.return()}finally{if(r)throw a}}}),0),this.selectedModuleFile){N.call(this,"file","selectedModuleFile",r);var o=this.$route.query;j(o.dependencies)?this.dependencies=x(o.dependencies):this.dependencies=!0}},dependencies:function(){this.setShowDependencies(this.dependencies);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];N.call(this,"dependencies","dependencies",t)},agentId:function(){this.reset(),this.getModuleFiles({cancelToken:this.cancelToken.token})}}};function ku(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Du(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ku(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ku(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Su=Du({data:function(){return{selectedModuleFile:void 0,dependencies:void 0,nessaryQueryArgs:["tab","agentId","file"],valueWhiteList:{selectedModuleFile:[]}}}},Pu),Tu=Su,Cu=(r("a2cb"),Object(u["a"])(Tu,vu,bu,!1,null,"594127d2",null)),Au=Cu.exports,Mu=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("transition",{attrs:{name:"slide-noward"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:!e.module_loading&&!e.module_load_error,expression:"!module_loading && !module_load_error"}]},[r("x-table",{attrs:{columns:e.columns,data:e.modules,noDataText:"当前应用暂无模块依赖信息","no-data-head":"",stribe2:""},scopedSlots:e._u([{key:"moduleName",fn:function(t){var a=t.row;return[r("div",{staticClass:"padding name font"},[a.resolved?r("a",{attrs:{href:a.resolved,download:a.name,target:"_blank"}},[e._v(e._s(a.name))]):r("div",[e._v(e._s(a.name))])])]}},{key:"packageVersion",fn:function(t){var a=t.row;return[r("div",{staticClass:"padding font"},[e._v(e._s(a.version))])]}},{key:"packageLockVersion",fn:function(t){var a=t.row;return[r("div",{staticClass:"padding font"},[e._v(e._s(a.lockVersion))])]}},{key:"securityRisk",fn:function(t){var a=t.row;return[a.risk?r("div",{staticClass:"padding"},[r("div",{staticClass:"risk-label font",style:"color: "+a.color+";",on:{click:function(t){return e.openRiskModal(a)}}},[e._v(e._s(a.level))])]):void 0===a.risk?r("div",{staticClass:"font"},[e._v(e._s(a.level))]):r("div",{staticClass:"padding"},[r("Icon",{staticClass:"no-risk",attrs:{type:"md-checkmark"}})],1)]}}])}),r("x-modal",{ref:"riskDetail",attrs:{title:"安全风险详情",padding:0,"hide-footer":"",fullscreen:""},on:{canceled:e.closeRiskModal}},[r("x-risk-message",{attrs:{slot:"content"},slot:"content"})],1)],1)])},Eu=[];r("45fc");function Iu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Nu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Iu(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Iu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ru=m("dashboard/instance/modules"),Lu=Ru.mapState,Fu=Ru.mapMutations,$u=Ru.mapActions,zu=U("modalQueryKey","riskDetailModal","riskDetail","setRiskDetailModal"),Bu=zu.mapMethods,Uu=zu.mapWatch,Gu=zu.handleMounted,Hu={created:function(){this.cancelToken=C(),this.getModule({cancelToken:this.cancelToken.token})},mounted:function(){Gu.call(this,"handleRiskDetailModal")},beforeDestroy:function(){A(this.cancelToken),this.set_module_load_error(void 0)},methods:Nu({},Fu(["set_module_load_error","setRiskDetailModal"]),{},$u(["getModule"]),{},Bu("handleRiskDetailModal"),{checkSeverity:function(e,t){var r=this.riskModules;return!(!r||!r[e])&&r[e].some((function(e){return e.severity===t}))},openRiskModal:function(e){this.setRiskDetailModal({status:!0,riskModalData:e})},closeRiskModal:function(){this.setRiskDetailModal({status:!1})}}),computed:Nu({},Lu(["module_loading","module_load_error","module_data","showDependencies","riskModules","riskDetailModal"]),{modules:function(){var e=[],t=this.showDependencies,r=this.module_data||{};if(!r.dependencies||!r.devDependencies)return e;var a=r.lockModule||{};r=t?r.dependencies:r.devDependencies;for(var n=0,i=Object.entries(r);n<i.length;n++){var o=Object(O["a"])(i[n],2),s=o[0],c=o[1],l={};this.riskModules?this.checkSeverity(s,"critical")?(l.risk=!0,l.level="极危",l.color="#e33900"):this.checkSeverity(s,"high")?(l.risk=!0,l.level="高危",l.color="#e33900"):this.checkSeverity(s,"moderate")?(l.risk=!0,l.level="中危",l.color="#f89501"):this.checkSeverity(s,"low")?(l.risk=!0,l.level="低危",l.color="#2376b7"):l.risk=!1:(l.risk=void 0,l.level="-"),e.push(Nu({name:s,version:c,lockVersion:a[s]&&a[s].version||"-",resolved:a[s]&&a[s].resolved},l))}return e}}),watch:Nu({},Uu,{$route:function(e){this.handleRiskDetailModal(e.query)}})},Wu=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"x-modal-content"},[r("x-table",{attrs:{columns:e.columns,data:e.risks,noDataText:"当前模块暂无安全风险信息","no-data-head":"",stribe:""},scopedSlots:e._u([{key:"name",fn:function(t){var a=t.row;return[r("div",{staticClass:"name font"},[a.url?r("a",{attrs:{href:a.url,target:"_blank"}},[e._v(e._s(a.name))]):r("div",[e._v(e._s(a.name))])])]}},{key:"version",fn:function(t){var a=t.row;return[r("div",{staticClass:"font"},[e._v(e._s(a.version))])]}},{key:"path",fn:function(t){var a=t.row;return[r("div",{staticClass:"font"},[e._v(e._s(a.path))])]}},{key:"vulnerableVersions",fn:function(t){var a=t.row;return[r("div",{staticClass:"font"},[e._v(e._s(a.vulnerableVersions))])]}},{key:"fixCmd",fn:function(t){var a=t.row;return[r("div",{staticClass:"font"},[e._v(e._s(a.fixCmd))])]}},{key:"level",fn:function(t){var a=t.row;return[r("div",{staticClass:"font"},[e._v(e._s(a.level))])]}}])})],1)])},Xu=[];function qu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Ku(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qu(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Yu=m("dashboard/instance/modules"),Vu=Yu.mapState,Qu=Yu.mapMutations,Zu={critical:0,high:1,moderate:2,low:3},Ju={critical:"极危",high:"高危",moderate:"中危",low:"低危"},ed={methods:Ku({},Qu(["setRiskDetailModal"]),{closeRiskModal:function(){this.setRiskDetailModal({status:!1})}}),computed:Ku({},Vu(["riskModalData","riskModules"]),{risks:function(){var e=[];if(!this.riskModalData||!this.riskModules)return e;var t=this.riskModules[this.riskModalData.name];if(!t)return e;t.sort((function(e,t){return Zu[e.severity]>Zu[t.severity]?1:-1}));var r=!0,a=!1,n=void 0;try{for(var i,o=t[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var s=i.value;e.push({url:s.url,name:s.name,version:s.currentVersions,path:s.path,vulnerableVersions:s.vulnerable_versions,fixCmd:s.cmd,level:Ju[s.severity]})}}catch(c){a=!0,n=c}finally{try{r||null==o.return||o.return()}finally{if(a)throw n}}return e}})};function td(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function rd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?td(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):td(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ad=rd({data:function(){return{columns:[{title:"模块",value:"name"},{title:"当前版本",value:"version"},{title:"依赖路径",value:"path",width:"30%"},{title:"影响版本",value:"vulnerableVersions"},{title:"如何修复",value:"fixCmd"},{title:"漏洞级别",value:"level",width:"85",align:"center"}]}}},ed),nd=ad,id=(r("d617"),Object(u["a"])(nd,Wu,Xu,!1,null,"202adebb",null)),od=id.exports;function sd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function cd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sd(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sd(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ld=cd({components:{"x-risk-message":od},data:function(){return{columns:[{title:"模块名称",value:"moduleName",width:"28%",left:19},{title:"设置版本规则",value:"packageVersion",align:"center",width:"calc(36% - 83px)"},{title:"版本锁定信息",value:"packageLockVersion",align:"center",width:"calc(36% - 83px)"},{title:"安全风险等级",value:"securityRisk",align:"center",width:166}],modalQueryKey:"risk-detail"}}},Hu),ud=ld,dd=(r("e2ff"),Object(u["a"])(ud,Mu,Eu,!1,null,"09e43678",null)),pd=dd.exports;function fd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function hd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fd(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fd(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var vd=hd({components:{"x-module-files":Au,"x-module-detail":pd}},hu),bd=vd,gd=(r("2cfc"),Object(u["a"])(bd,cu,lu,!1,null,"27545f2c",null)),yd=gd.exports,md=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("x-modal",{ref:"checkAgent",attrs:{title:"查看实例",width:560},on:{canceled:e.closeAgentCheck}},[r("template",{slot:"content"},[r("div",{staticStyle:{"text-align":"center",padding:"10px 0"}},[r("x-loading",{attrs:{loading:e.agent_loading,type:"dot",size:"middle"}}),r("x-error-message",{directives:[{name:"show",rawName:"v-show",value:e.agent_load_error,expression:"agent_load_error"}],attrs:{message:e.agent_load_error}}),r("transition",{attrs:{name:"slide-noward"}},[r("x-table",{directives:[{name:"show",rawName:"v-show",value:!e.agent_loading&&!e.agent_load_error,expression:"!agent_loading && !agent_load_error"}],attrs:{columns:e.checkAgentColumns,data:e.agent_data,noDataText:"没有获取到实例信息"}})],1)],1)]),r("template",{slot:"footer"},[r("div",{directives:[{name:"show",rawName:"v-show",value:!e.agent_loading,expression:"!agent_loading"}]},[r("Button",{attrs:{type:"primary",ghost:""},on:{click:e.closeAgentCheck}},[e._v("关闭")])],1)])],2)],1)},Od=[];function wd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function _d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wd(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wd(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var jd=m("dashboard/instance"),xd=jd.mapState,Pd=jd.mapMutations,kd=jd.mapActions,Dd=U("modalQueryKey","agentModal","checkAgent","setAgentModal",void 0,"getAgentInfo","agent_loading"),Sd=Dd.mapMethods,Td=Dd.mapWatch,Cd=Dd.handleMounted,Ad={created:function(){this.cancelToken=C()},mounted:function(){Cd.call(this,"handleAgent")},methods:_d({},Sd("handleAgent"),{},Pd(["setAgentModal"]),{},kd(["getAgentInfo"]),{closeAgentCheck:function(){this.setAgentModal({status:!1})}}),computed:_d({},xd(["agentModal","agent_loading","agent_load_error","agent_data"])),watch:_d({},Td,{$route:function(e){this.handleAgent(e.query)}})};function Md(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Ed(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Md(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Md(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Id=Ed({data:function(){return{checkAgentColumns:[{title:"类型",value:"type",width:"130"},{title:"信息详情",value:"value"}],modalQueryKey:"check-agent"}}},Ad),Nd=Id,Rd=Object(u["a"])(Nd,md,Od,!1,null,null,null),Ld=Rd.exports;function Fd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function $d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fd(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fd(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var zd=$d({props:{appName:String,title:String,currentUserIsOwner:Boolean},components:{"x-process":yc,"x-system":bl,"x-error-log":su,"x-module-risk":yd,"x-check-agent":Ld},data:function(){return{selectedAgentId:void 0,selectedTab:void 0,agents:[],placeholder:y(Nr.choseInstance),notFoundText:y(Nr.noAgent),instanceTabs:[{label:y(Nr.processTrend),icon:"md-skip-forward",value:"process"},{label:y(Nr.systemData),icon:"md-desktop",value:"system"},{label:y(Nr.errorLog),icon:"md-warning",value:"error_log"},{label:y(Nr.moduleRisk),icon:"md-nuclear",value:"module_risk"}],valueWhiteList:{selectedTab:["process","system","error_log","module_risk"]},nessaryQueryArgs:["tab","agentId"]}}},qn),Bd=zd,Ud=(r("42cd"),Object(u["a"])(Bd,Ln,Fn,!1,null,"ab155bae",null)),Gd=Ud.exports,Hd=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"detail-content"},[r("x-dashboard-title",{attrs:{appName:e.appName,dashboardTitle:e.title,owner:e.currentUserIsOwner,line:"",jump:""}},[r("x-uploader",{attrs:{slot:"extra"},slot:"extra"})],1),r("x-type-filter",{staticClass:"type-filter"}),r("x-file-list",{staticClass:"file-list"}),r("x-analytics")],1)},Wd=[],Xd={},qd=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Button",{staticClass:"upload-button",attrs:{type:"info",size:"small"},on:{click:e.openUploadModal}},[r("div",[r("Icon",{staticClass:"upload-icon",attrs:{type:"md-cloud-upload"}}),r("span",{staticClass:"upload-text"},[e._v("上传文件")])],1)]),r("x-modal",{ref:"uploadFile",attrs:{title:"上传性能文件",padding:0,"hide-footer":""},on:{canceled:e.closeUploadModal}},[r("x-upload-file",{attrs:{slot:"content"},slot:"content"})],1)],1)},Kd=[];function Yd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Vd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yd(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yd(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Qd=m("dashboard/file"),Zd=Qd.mapState,Jd=Qd.mapMutations,ep=U("modalQueryKey","uploadModal","uploadFile","setUploadModal"),tp=ep.mapMethods,rp=ep.mapWatch,ap=ep.handleMounted,np={mounted:function(){ap.call(this,"handleUploadModal",!0)},methods:Vd({},Jd(["setUploadModal"]),{},tp(["handleUploadModal"]),{openUploadModal:function(){this.setUploadModal({status:!0})},closeUploadModal:function(){this.setUploadModal({status:!1})}}),computed:Vd({},Zd(["uploadModal"])),watch:Vd({},rp,{$route:function(e){this.handleUploadModal(e.query)}})},ip=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"x-modal-content"},[r("div",{staticClass:"container"},[r("x-loading",{attrs:{loading:e.upload_loading,type:"dot",size:"middle"}}),e.upload_load_error?r("x-error-message",{attrs:{message:e.upload_load_error}}):e._e(),e.upload_data?r("div",[e._v("性能文件上传成功")]):e._e(),e.upload_loading||e.upload_load_error||e.upload_data?e._e():r("div",{staticClass:"wrapper"},[r("div",{staticClass:"group"},[r("div",[e._v("文件类型")]),r("Select",{staticClass:"agent-selector upload-selector",attrs:{placeholder:"请选择文件类型"},model:{value:e.selectedFileType,callback:function(t){e.selectedFileType=t},expression:"selectedFileType"}},e._l(e.fileTypes,(function(t,a){return r("Option",{key:a,attrs:{value:t.value}},[e._v(e._s(t.label))])})),1)],1),e._l(e.uploads,(function(t,a){return r("div",{key:a,staticClass:"group item"},[r("div",{staticClass:"solid"},[e._v(e._s(t.title))]),r("Upload",{staticClass:"upload-button solid",attrs:{"before-upload":function(r){return e.handleUpload(r,t)},action:""}},[r("Button",{attrs:{type:"primary"}},[r("Icon",{staticClass:"upload-icon",attrs:{type:"md-cloud-upload"}}),r("span",{staticClass:"upload-text"},[e._v(e._s(t.button))])],1)],1),r("div",{staticClass:"placeholder"}),r("div",{staticClass:"filename",domProps:{innerHTML:e._s(t.tip)}})],1)}))],2)],1)]),r("div",{staticClass:"x-modal-footer"},[e.upload_loading?e._e():r("div",[r("Button",{attrs:{type:"primary",ghost:""},on:{click:e.closeUploadModal}},[e._v("关闭")]),e.upload_load_error||e.upload_data?e._e():r("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary"},on:{click:e.upload}},[e._v("上传")])],1)])])},op=[];r("fb6a");function sp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function cp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sp(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var lp=m("dashboard/file"),up=lp.mapState,dp=lp.mapGetters,pp=lp.mapMutations,fp=lp.mapActions,hp={created:function(){this.cancelToken=C(),this.uploads=this.getUploads("normalUploads"),this.set_upload_load_error(void 0),this.set_upload(void 0)},beforeDestroy:function(){A(this.cancelToken)},methods:cp({},pp(["setUploadModal","setFilterType","set_upload_load_error","set_upload"]),{},fp(["uploadFile"]),{reset:function(){var e=this;this.uploads.forEach((function(t){return t.tip=e.defaultFileTip}))},closeUploadModal:function(){var e=this;this.setUploadModal({status:!1}),this.upload_data&&!this.upload_load_error&&setTimeout((function(){e.setFilterType(void 0),setTimeout((function(){return e.setFilterType("all")}),0)}),0)},getExt:function(e){var t=e.split("."),r=t[t.length-1];return r},getUploads:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal";return this[e].map((function(e){return e.tip=t.defaultFileTip,"normal"===r&&(e.valid=t.normalValidTypes),e}))},formatFileName:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:31,r=e;return e.length>t&&(r="".concat(e.slice(0,13),"...").concat(e.slice(e.length-15,e.length))),r='<span style="font-size: 12px">'.concat(r,"</span>"),r},handleUpload:function(e,t){var r=this.getExt(e.name);return t.valid.includes(r)?(this.validCoredumpTypes.includes(this.selectedFileType)?this.selectedFileType="core":this.selectedFileType=r,t.tip=this.formatFileName(e.name),t.file=e):t.tip='<span style="color: #e33900">文件类型 .'.concat(r," 错误!</span>"),!1},upload:function(){var e=this.uploads,t=!0,r=!0,a=!1,n=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var s=i.value;s.file||(s.tip='<span style="color: #e33900">'.concat(s.title,"不能为空！</span>"),t=!1)}}catch(v){a=!0,n=v}finally{try{r||null==o.return||o.return()}finally{if(a)throw n}}if(t){var c=new FormData,l=!0,u=!1,d=void 0;try{for(var p,f=e[Symbol.iterator]();!(l=(p=f.next()).done);l=!0){var h=p.value;c.append("file",h.file)}}catch(v){u=!0,d=v}finally{try{l||null==f.return||f.return()}finally{if(u)throw d}}this.uploadFile({cancelToken:this.cancelToken.token,fileType:this.selectedFileType,formData:c})}}}),computed:cp({},up(["fileTypes","upload_loading","upload_load_error","upload_data"]),{},dp(["normalValidTypes"]),{validCoredumpTypes:function(){var e=[],t=!0,r=!1,a=void 0;try{for(var n,i=this.coredumpUploads[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var o=n.value;e=e.concat(o.valid)}}catch(s){r=!0,a=s}finally{try{t||null==i.return||i.return()}finally{if(r)throw a}}return e}}),watch:{selectedFileType:function(e,t){var r,a=this;(this.uploads.every((function(t){return!a.getExt(t.tip).includes(e)}))&&this.reset(),"core"===e||"core"===t)&&(r="core"===e?this.getUploads("coredumpUploads","core"):this.getUploads("normalUploads"),this.uploads=r)}}};function vp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function bp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vp(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var gp=bp({data:function(){return{selectedFileType:void 0,uploads:[],defaultFileTip:"未选择任何文件",normalUploads:[{title:"性能文件",button:"选择性能文件",tip:void 0,valid:[],file:void 0}],coredumpUploads:[{title:"核心转储",button:"选择核心转储",tip:void 0,valid:["core"],file:void 0},{title:"执行文件",button:"选择执行文件",tip:void 0,valid:["node"],file:void 0}]}}},hp),yp=gp,mp=(r("ac6e"),Object(u["a"])(yp,ip,op,!1,null,"52b50836",null)),Op=mp.exports;function wp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function _p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wp(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var jp=_p({components:{"x-upload-file":Op},data:function(){return{modalQueryKey:"upload-file"}}},np),xp=jp,Pp=(r("addb"),Object(u["a"])(xp,qd,Kd,!1,null,"84efd888",null)),kp=Pp.exports,Dp=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Select",{staticClass:"agent-selector type-selector",model:{value:e.selectedFilterType,callback:function(t){e.selectedFilterType=t},expression:"selectedFilterType"}},e._l(e.filterTypes,(function(t,a){return r("Option",{key:a,attrs:{value:t.value}},[e._v(e._s(t.label))])})),1)],1)},Sp=[];function Tp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Cp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Tp(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ap=m("dashboard/file"),Mp=Ap.mapState,Ep=Ap.mapGetters,Ip=Ap.mapMutations,Np={created:function(){var e=this.$route.query;e.filterType?this.selectedFilterType=e.filterType:this.selectedFilterType="all"},beforeDestroy:function(){this.setFilterType(void 0)},methods:Cp({},Ip(["setFilterType"])),computed:Cp({},Mp(["nessaryQueryArgs","filterType"]),{},Ep(["filterTypes"])),watch:{filterType:function(){this.filterType&&(this.selectedFilterType=this.filterType)},$route:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];I.call(this,t,"filterType","selectedFilterType")},selectedFilterType:function(){for(var e=this,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var n=r[0],i=r[1];i&&n&&i!==n&&this.setFilterType(void 0),setTimeout((function(){return e.setFilterType(e.selectedFilterType)}),0),this.selectedFilterType&&N.call(this,"filterType","selectedFilterType",r)}}};function Rp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Lp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rp(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Fp=Lp({data:function(){return{selectedFilterType:void 0}}},Np),$p=Fp,zp=(r("9679"),Object(u["a"])($p,Dp,Sp,!1,null,"4fb3cdde",null)),Bp=zp.exports,Up=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("x-loading",{attrs:{loading:e.files_loading,type:"dot",size:"middle",top:"calc(40vh - 105px)"}}),r("x-error-message",{directives:[{name:"show",rawName:"v-show",value:e.files_load_error,expression:"files_load_error"}],attrs:{message:e.files_load_error,top:"calc(40vh -  115px)"}}),e.filterType?r("x-content"):e._e(),r("x-modal",{ref:"actionError",attrs:{title:e.errorModalData.title,padding:0,"hide-footer":""},on:{canceled:e.closeErrorModal}},[r("x-operation-error",{attrs:{slot:"content"},slot:"content"})],1),r("x-modal",{ref:"fileDeletion",attrs:{title:"删除文件",padding:0,"hide-footer":""},on:{canceled:e.closeDeletionModal}},[r("x-deletion-confirm",{attrs:{slot:"content"},slot:"content"})],1)],1)},Gp=[];function Hp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Wp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Hp(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Xp=m("dashboard/file"),qp=Xp.mapState,Kp=Xp.mapMutations,Yp=U("modalQueryKey","errorModal","actionError","setErrorModal"),Vp=Yp.mapMethods,Qp=Yp.mapWatch,Zp=Yp.handleMounted,Jp=U("modalQueryKeyDeletion","fileDeletionModal","fileDeletion","setDeletionModal"),ef=Jp.mapMethods,tf=Jp.mapWatch,rf=Jp.handleMounted,af={mounted:function(){Zp.call(this,"handleErrorModal"),rf.call(this,"handleDeletionModal")},methods:Wp({},Kp(["setErrorModal","setDeletionModal"]),{},Vp("handleErrorModal"),{},ef("handleDeletionModal"),{closeErrorModal:function(){this.setErrorModal({status:!1})},closeDeletionModal:function(){this.setDeletionModal({status:!1})}}),computed:Wp({},qp(["files_loading","files_load_error","filterType","errorModal","errorModalData","fileDeletionModal"])),watch:Wp({},Qp,{},tf,{$route:function(e){this.handleErrorModal(e.query),this.handleDeletionModal(e.query)}})},nf=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("transition",{attrs:{name:"slide-noward"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:!e.files_loading&&!e.files_load_error,expression:"!files_loading && !files_load_error"}]},[r("x-table",{attrs:{columns:e.columns,data:e.files,noDataText:"项目下暂无性能文件","no-data-head":""},scopedSlots:e._u([{key:"fileType",fn:function(e){var t=e.row;return[r("x-type",{attrs:{row:t}})]}},{key:"fileInfo",fn:function(e){var t=e.row;return[r("x-info",{attrs:{row:t}})]}},{key:"operation",fn:function(t){var a=t.row,n=t.index;return[r("x-operation",{ref:"operation::"+n,attrs:{row:a},on:{"loading-file":e.addLoadingFile}})]}},{key:"deletion",fn:function(e){var t=e.row;return[r("x-deletion",{attrs:{row:t}})]}}])}),e.totaFileCount?r("div",{staticClass:"pagination"},[r("Page",{attrs:{total:e.totaFileCount,"page-size":e.pageSize,current:e.currentPage,size:"small","show-elevator":""},on:{"on-change":e.changeFilePage}})],1):e._e()],1)])},of=[];r("a434");function sf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function cf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sf(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sf(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var lf=m("dashboard/file"),uf=lf.mapState,df=lf.mapGetters,pf=lf.mapMutations,ff=lf.mapActions,hf={created:function(){this.cancelToken=C(),this.cancelToken2=C();var e=this.$route.query;e.page?this.currentPage=Number(e.page):this.currentPage=1},mounted:function(){var e=this;this.checkInterval=setInterval((function(){return e.handleLoadingFiles()}),1e3)},beforeDestroy:function(){A(this.cancelToken),A(this.cancelToken2),this.set_files({list:[],count:0}),clearInterval(this.checkInterval)},methods:cf({},ff(["getFiles","checkFileStatus"]),{},pf(["set_files","setErrorModal"]),{resetFileStatusCheck:function(){var e=this;A(this.cancelToken2),clearInterval(this.checkInterval),this.loadingFiles=[],this.checkingStatus=!1,this.cancelToken2=C(),this.checkInterval=setInterval((function(){return e.handleLoadingFiles()}),1e3)},changeFilePage:function(e){this.currentPage=e},refreshFiles:function(e,t){this.getFiles({cancelToken:this.cancelToken.token,filterType:e||this.filterType,currentPage:t||this.currentPage,pageSize:this.pageSize})},addLoadingFile:function(e){this.loadingFiles.push(e),this.checkingStatusError=void 0},handleLoadingFiles:function(){var e=this,t=this.loadingFiles;if(0!==t.length&&!this.checkingStatus&&!this.checkingStatusError){this.checkingStatus=!0;var r=t.map((function(e){return{fileId:e.fileId,fileType:e.fileType,status:e.fileStatus,index:e.index}}));this.checkFileStatus({cancelToken:this.cancelToken2.token,files:r}).then((function(r){var a=r.list;if(Array.isArray(a)){var n=!0,i=!1,o=void 0;try{for(var s,c=function(){var r=s.value,a=t.filter((function(e){return e.index===r.index}));if(!a.length)return"continue";a=a[0],a.fileStatus=r.status;var n=e.$refs["operation::".concat(r.index)];n&&n.updateOperation();var i=t.indexOf(a);t.splice(i,1)},l=a[Symbol.iterator]();!(n=(s=l.next()).done);n=!0)c()}catch(u){i=!0,o=u}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}}})).catch((function(r){e.checkingStatusError=r.message,e.setErrorModal({status:!0,error:{title:"状态检索失败",message:e.checkingStatusError}}),t.forEach((function(t){var r=t.fileStatus;0===r&&(r=998),2===r&&(r=999),t.fileStatus=r;var a=e.$refs["operation::".concat(t.index)];a&&a.updateOperation()})),e.loadingFiles=[]})).then((function(){return e.checkingStatus=!1}))}}}),computed:cf({},uf(["nessaryQueryArgs","filterType","files_loading","files_load_error","files_data"]),{},df(["getIconByType","getLabelByType"]),{files:function(){var e=[],t=this.files_data,r=t.list,a=t.count;if(!Array.isArray(r)||!r.length)return e;_(a)&&(this.totaFileCount=a);for(var n=0;n<r.length;n++){var i=r[n],o={typeIcon:this.getIconByType(i.fileType),typeLabel:this.getLabelByType(i.fileType),filePath:i.file||i.coreFile,fileBasename:i.basename,executable:i.executableFile,fileCreator:i.creator,createTime:i.time,createAgent:i.agent,fileStatus:i.status,fileFavor:i.favor,fileType:i.fileType,fileId:i.fileId,index:n};e.push(o)}return e}}),watch:{totaFileCount:function(){if(this.totaFileCount){var e=Math.ceil(this.totaFileCount/this.pageSize);this.currentPage>e&&(this.currentPage=e)}},$route:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];I.call(this,t,"page","currentPage")},currentPage:function(){if(this.currentPage){this.refreshFiles(),this.resetFileStatusCheck();for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];N.call(this,"page","currentPage",t)}}}},vf=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"file-type"},[r("div",[r("Icon",{staticClass:"type-icon",attrs:{type:e.row.typeIcon}})],1),r("div",{staticClass:"type-label"},[e._v(e._s(e.row.typeLabel))])])},bf=[],gf={props:{row:Object}},yf=gf,mf=(r("c95c"),Object(u["a"])(yf,vf,bf,!1,null,"e6704f0e",null)),Of=mf.exports,wf=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"file-info"},[r("div",{staticClass:"file-path"},[e._v(e._s(e.rowData.filePath))]),r("div",{class:"file-desc"+(3===e.rowData.fileStatus?" show-download":" show-executable")},[e.rowData.executable?r("a",{attrs:{href:3===e.rowData.fileStatus?"/file/download?fileType=executable&fileId="+e.rowData.fileId:"javascript:void(0)"}},[e._v(e._s(e.getExecutableLabel(e.rowData)))]):e._e(),e._v(" 由 "),r("strong",{staticClass:"file-desc-heilight"},[e._v(e._s(e.rowData.fileCreator))])]),r("div",{staticClass:"file-desc"},[e._v(" 于 "),r("strong",{staticClass:"file-desc-heilight"},[e._v(e._s(e.rowData.createTime))]),e._v(" 创建在实例 "),r("strong",{staticClass:"file-desc-heilight"},[e._v(e._s(e.rowData.createAgent))])])])},_f=[],jf={props:{row:Object},data:function(){return{rowData:{}}},mounted:function(){this.rowData=this.row},methods:{getExecutableLabel:function(e){var t="可执行文件";return"upload"!==e.createAgent&&(t=e.executable),t}}},xf=jf,Pf=(r("dfbb"),Object(u["a"])(xf,wf,_f,!1,null,"d814f9da",null)),kf=Pf.exports,Df=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"opt"},e._l(e.operations,(function(t,a){return r("div",{key:a,staticClass:"container"},["button"===t.type?r("div",{staticClass:"opt-group"},[r("Button",{class:"opt-button"+(t.fixed?"":" button-hover"),attrs:{shape:"circle",loading:t.loading,type:t.bt,disabled:t.disabled,icon:t.icon},on:{click:function(r){return e.takeAction(t)}}}),r("div",{staticClass:"opt-label",style:"color: "+t.color+";"},[e._v(e._s(e.formatLabel(t.label)))])],1):r("div",{staticClass:"line",style:"color: "+t.color+";"})])})),0)},Sf=[],Tf=(r("c7cd"),r("2909"));function Cf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Af(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Cf(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cf(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Mf=m("dashboard/file"),Ef=Mf.mapMutations,If=Mf.mapActions,Nf=m("dashboard/file/wrapper"),Rf=Nf.mapMutations,Lf={created:function(){this.cancelToken=C(),this.updateOperation()},beforeDestroy:function(){A(this.cancelToken)},methods:Af({},Ef(["setErrorModal"]),{},Rf(["setDiagDrawer","setGcDrawer","setTrendDrawer","setFlamegraphDrawer","setSnapshotDrawer"]),{},If(["doTransfer","doFavor"]),{formatLabel:function(e){return"string"===typeof e?e:e.label},getColor:function(e){var t=this.disableColor;return["success","info","error"].includes(e)&&(t=this["".concat(e,"Color")]),["normal","warning"].includes(e)&&(t=this.warningColor),t},createButton:function(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return{type:"button",label:e,bt:"normal"===t?void 0:t,icon:r,loading:a,disabled:n,color:this.getColor(t),fixed:i,raw:!this.fixed&&this.row}},createLine:function(e){return{type:"line",color:e}},doneButton:function(e,t,r,a){return this.createButton(e,r,t,!1,!1,a)},createLoadingGroup:function(e,t){return[this.createLine(this.getColor(t)),this.createButton(e,t,void 0,!0,!1,!0)]},createDisableGroup:function(e,t){return[this.createLine(this.disableColor),this.createButton(e,void 0,t,!1,!0,!0)]},createDoneGroup:function(e,t,r){return[this.createLine(this.getColor(r)),this.doneButton(e,t,r)]},createLeftGroup:function(e){var t=[];return this.xprofiler.includes(e)&&t.push.apply(t,Object(Tf["a"])(this.createDisableGroup("分析","ios-pulse"))),this.devtools.includes(e)&&t.push.apply(t,Object(Tf["a"])(this.createDisableGroup("devtools","md-search"))),this.devtools2.includes(e)&&t.push.apply(t,Object(Tf["a"])(this.createDisableGroup("devtools","md-search"))),t.push.apply(t,Object(Tf["a"])(this.createDisableGroup("下载","md-cloud-download"))),t.push.apply(t,Object(Tf["a"])(this.createDisableGroup("收藏","md-star"))),t},updateOperation:function(){var e=[],t=this.row,r=t.fileStatus;0===r&&(e.push(this.createButton("生成中",void 0,void 0,!0,!0,!0)),e.push.apply(e,Object(Tf["a"])(this.createDisableGroup("转储","md-cloud-upload"))),e.push.apply(e,Object(Tf["a"])(this.createLeftGroup(t.fileType))),this.$emit("loading-file",t)),1===r&&(e.push(this.doneButton("已生成","md-brush","success",!0)),e.push.apply(e,Object(Tf["a"])(this.createDoneGroup("转储","md-cloud-upload","success"))),e.push.apply(e,Object(Tf["a"])(this.createLeftGroup(t.fileType)))),2===r&&(e.push(this.doneButton("已生成","md-brush","success",!0)),e.push.apply(e,Object(Tf["a"])(this.createLoadingGroup("转储中","success"))),e.push.apply(e,Object(Tf["a"])(this.createLeftGroup(t.fileType))),this.$emit("loading-file",t)),3===r&&(e.push(this.doneButton("已生成","md-brush","success",!0)),"upload"!==t.createAgent&&"trend"!==t.fileType&&e.push.apply(e,Object(Tf["a"])(this.createDoneGroup("再转储","md-cloud-upload","success"))),this.xprofiler.includes(t.fileType)&&e.push.apply(e,Object(Tf["a"])(this.createDoneGroup("分析","ios-pulse","info"))),this.devtools.includes(t.fileType)&&e.push.apply(e,Object(Tf["a"])(this.createDoneGroup({label:"devtools",value:"devtools-new"},"md-search","info"))),this.devtools2.includes(t.fileType)&&e.push.apply(e,Object(Tf["a"])(this.createDoneGroup({label:"devtools",value:"devtools-old"},"md-search","info"))),e.push.apply(e,Object(Tf["a"])(this.createDoneGroup("下载","md-cloud-download","info"))),t.fileFavor?e.push.apply(e,Object(Tf["a"])(this.createDoneGroup("收藏","md-star","warning"))):e.push.apply(e,Object(Tf["a"])(this.createDoneGroup("收藏","md-star","normal")))),99===r&&(e.push(this.createButton("生成失败","error","md-close")),e.push.apply(e,Object(Tf["a"])(this.createDisableGroup("转储","md-cloud-upload"))),e.push.apply(e,Object(Tf["a"])(this.createLeftGroup(t.fileType)))),998===r&&(e.push(this.createButton("未知状态","warning","md-brush")),e.push.apply(e,Object(Tf["a"])(this.createDisableGroup("转储","md-cloud-upload"))),e.push.apply(e,Object(Tf["a"])(this.createLeftGroup(t.fileType)))),999===r&&(e.push(this.doneButton("已生成","md-brush","success",!0)),e.push.apply(e,Object(Tf["a"])(this.createDoneGroup("转储失败","md-close","error"))),e.push.apply(e,Object(Tf["a"])(this.createLeftGroup(t.fileType)))),this.operations=e},doAnalytics:function(e){var t=e.fileType,r=e.fileId,a=e.fileBasename,n={fileType:t,fileId:r,fileBasename:a};"diag"===t&&this.setDiagDrawer({status:!0,diagData:n}),"gcprofile"===t&&this.setGcDrawer({status:!0,gcData:n}),"trend"===t&&this.setTrendDrawer({status:!0,trendData:n}),"cpuprofile"===t&&this.setFlamegraphDrawer({status:!0,flamegraphData:n}),"heapsnapshot"===t&&this.setSnapshotDrawer({status:!0,snapshotData:n})},doFileFavor:function(e){var t=this,r=e.raw,a=r.fileId,n=r.fileType,i=r.fileFavor,o=void 0===i||0===i?1:0;e.loading=!0,this.doFavor({cancelToken:this.cancelToken.token,fileId:a,fileType:n,favor:o}).then((function(){e.raw.fileFavor=o,t.updateOperation()})).catch((function(e){return t.setErrorModal({status:!0,error:{title:"收藏失败",message:e.message}})})).then((function(){return e.loading=!1}))},doFileTransfer:function(e){var t=this,r=e.raw,a=r.fileId,n=r.fileType;e.raw.fileStatus=2,this.updateOperation(),this.doTransfer({cancelToken:this.cancelToken.token,fileId:a,fileType:n}).catch((function(e){return t.setErrorModal({status:!0,error:{title:"转储失败",message:e.message}})}))},handleDevtools:function(e,t){var r=t.fileId,a=t.fileType,n=t.filePath,i="";["cpuprofile"].includes(a)&&(i="js_profiler"),["heapsnapshot","heapprofile"].includes(a)&&(i="heap_profiler");var o="fileId=".concat(r,"&fileType=").concat(a,"&fileName=").concat(n,"&selectedTab=").concat(i),s="/dashboard/".concat(e,"?").concat(o);window.open(s,"_blank")},handleNewTab:function(e,t){var r=t.fileId,a=t.fileType,n=t.fileBasename,i="fileId=".concat(r,"&fileType=").concat(a,"&fileName=").concat(n,"&downloadPath=").concat(encodeURIComponent(e)),o="/dashboard/speedscope?".concat(i);window.open(o,"_blank")},takeAction:function(e){var t=e.raw,r=e.label;if(t){var a=this.thirdParty.includes(t.fileType),n=this.$store.state.url.downloadFile;if("分析"===r&&a&&this.handleNewTab(n,t),"分析"!==r||a||this.doAnalytics(t),"下载"===r){var i="".concat(n,"?fileType=").concat(t.fileType,"&fileId=").concat(t.fileId);window.location=i}"收藏"===r&&this.doFileFavor(e),"转储"!==r&&"再转储"!==r&&"转储失败"!==r||this.doFileTransfer(e),"未知状态"===r&&(e.raw.fileStatus=0,this.updateOperation()),["devtools-new","devtools-old"].includes(r.value)&&this.handleDevtools(r.value,t)}}}),watch:{row:function(){this.updateOperation()}}};function Ff(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function $f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ff(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ff(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var zf=$f({props:{row:Object},data:function(){return{operations:[],devtools:["cpuprofile","heapprofile","heapsnapshot"],devtools2:["cpuprofile","heapprofile","heapsnapshot"],xprofiler:["gcprofile","diag","trend","cpuprofile","heapsnapshot"],thirdParty:["cpuprofile"],normalColor:"#515a6e",disableColor:"#c5c8ce",successColor:"#2a9446",infoColor:"#2376b7",warningColor:"#f89501",errorColor:"#e33900"}}},Lf),Bf=zf,Uf=(r("1b38"),Object(u["a"])(Bf,Df,Sf,!1,null,"115d0f5b",null)),Gf=Uf.exports,Hf=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wrapper"},[r("div",{staticClass:"opt-group"},[r("Button",{staticClass:"opt-button",attrs:{shape:"circle",type:"error",icon:"md-trash"},on:{click:e.openDeletionModal}}),r("div",{staticClass:"opt-label"},[e._v("删除")])],1)])},Wf=[];function Xf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function qf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xf(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xf(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Kf=m("dashboard/file"),Yf=Kf.mapMutations,Vf={methods:qf({},Yf(["setDeletionModal"]),{openDeletionModal:function(){var e=this.row;this.setDeletionModal({status:!0,data:{filePath:e.filePath,fileId:e.fileId,fileType:e.fileType}})}})};function Qf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Zf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qf(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qf(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Jf=Zf({props:{row:Object}},Vf),eh=Jf,th=(r("dd11"),Object(u["a"])(eh,Hf,Wf,!1,null,"52d16dee",null)),rh=th.exports;function ah(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function nh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ah(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ah(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ih=nh({components:{"x-type":Of,"x-info":kf,"x-operation":Gf,"x-deletion":rh},data:function(){return{currentPage:void 0,pageSize:10,columns:[{title:"文件类型",value:"fileType",align:"center",width:125},{title:"文件信息",value:"fileInfo",left:20,width:450},{title:"操作",value:"operation",titleLeft:23},{title:"删除",value:"deletion",align:"center",width:125}],totaFileCount:0,loadingFiles:[],checkingStatus:!1,checkingStatusError:void 0}}},hf),oh=ih,sh=Object(u["a"])(oh,nf,of,!1,null,null,null),ch=sh.exports,lh=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"x-modal-content"},[e._v(e._s(e.errorModalData.message))]),r("div",{staticClass:"x-modal-footer"},[r("Button",{attrs:{type:"primary",ghost:""},on:{click:e.closeErrorModal}},[e._v("关闭")])],1)])},uh=[];function dh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ph(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dh(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var fh=m("dashboard/file"),hh=fh.mapState,vh=fh.mapMutations,bh={methods:ph({},vh(["setErrorModal"]),{closeErrorModal:function(){this.setErrorModal({status:!1})}}),computed:ph({},hh(["errorModalData"]))};function gh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function yh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gh(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var mh=yh({},bh),Oh=mh,wh=Object(u["a"])(Oh,lh,uh,!1,null,null,null),_h=wh.exports,jh=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"x-modal-content"},[r("x-loading",{attrs:{loading:e.loading,type:"dot",size:"middle"}}),r("x-error-message",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}],attrs:{message:e.error}}),e.success?r("div",{staticClass:"confirm"},[r("div",[e._v("云端文件已经成功删除")])]):e._e(),e.loading||e.error||e.success?e._e():r("div",{staticClass:"confirm"},[r("div",[e._v("确认删除文件 "+e._s(e.deletionData.filePath)+" ?")])])],1),r("div",{staticClass:"x-modal-footer"},[e.loading?e._e():r("div",[r("Button",{attrs:{type:"primary",ghost:""},on:{click:e.closeDeletionModal}},[e._v("关闭")]),e.error||e.success?e._e():r("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary"},on:{click:e.submitFileDeletion}},[e._v("删除")])],1)])])},xh=[];function Ph(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function kh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ph(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ph(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Dh=m("dashboard/file"),Sh=Dh.mapState,Th=Dh.mapMutations,Ch=Dh.mapActions,Ah={created:function(){this.cancelToken=C()},beforeDestroy:function(){A(this.cancelToken)},methods:kh({},Th(["setDeletionModal","setFilterType"]),{},Ch(["deleteFile"]),{closeDeletionModal:function(){var e=this;this.setDeletionModal({status:!1}),this.success&&!this.error&&setTimeout((function(){e.setFilterType(void 0),setTimeout((function(){return e.setFilterType(e.$route.query.filterType)}),0)}),0)},submitFileDeletion:function(){var e=this,t=this.deletionData,r=t.fileId,a=t.fileType;this.loading=!0,this.deleteFile({cancelToken:this.cancelToken.token,fileId:r,fileType:a}).then((function(){return e.success=!0})).catch((function(t){return e.error=t.message})).then((function(){return e.loading=!1}))}}),computed:kh({},Sh(["deletionData"]))};function Mh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Eh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mh(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ih=Eh({data:function(){return{loading:!1,error:void 0,success:!1}}},Ah),Nh=Ih,Rh=(r("12bb"),Object(u["a"])(Nh,jh,xh,!1,null,"59d7dc80",null)),Lh=Rh.exports;function Fh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function $h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fh(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var zh=$h({components:{"x-content":ch,"x-operation-error":_h,"x-deletion-confirm":Lh},data:function(){return{modalQueryKey:"operation-error",modalQueryKeyDeletion:"deletion-confirm"}}},af),Bh=zh,Uh=Object(u["a"])(Bh,Up,Gp,!1,null,null,null),Gh=Uh.exports,Hh=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("x-drawer",{ref:"diag",on:{close:function(t){return e.closeDiagDrawer()}}},[r("x-diag",{staticClass:"analytics",attrs:{slot:"content"},slot:"content"})],1),r("x-drawer",{ref:"gc",on:{close:function(t){return e.closeGcDrawer()}}},[r("x-gc",{staticClass:"analytics",attrs:{slot:"content"},slot:"content"})],1),r("x-drawer",{ref:"trend",on:{close:function(t){return e.closeTrendDrawer()}}},[r("x-trend",{staticClass:"analytics",attrs:{slot:"content"},slot:"content"})],1),r("x-drawer",{ref:"flamegraph",on:{close:function(t){return e.closeFlameGraphDrawer()}}},[r("x-flamegraph",{staticClass:"analytics",attrs:{slot:"content"},slot:"content"})],1),r("x-drawer",{ref:"snapshot",on:{close:function(t){return e.closeSnapshotDrawer()}}},[r("x-snapshot",{staticClass:"analytics",attrs:{slot:"content"},slot:"content"})],1)],1)},Wh=[];function Xh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function qh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xh(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Kh=m("dashboard/file/wrapper"),Yh=Kh.mapState,Vh=Kh.mapMutations,Qh=B("diagDrawerKey","diagDrawer","diag","setDiagDrawer","diagData"),Zh=Qh.mapMethods,Jh=Qh.mapWatch,ev=Qh.handleMounted,tv=B("gcDrawerKey","gcDrawer","gc","setGcDrawer","gcData"),rv=tv.mapMethods,av=tv.mapWatch,nv=tv.handleMounted,iv=B("trendDrawerKey","trendDrawer","trend","setTrendDrawer","trendData"),ov=iv.mapMethods,sv=iv.mapWatch,cv=iv.handleMounted,lv=B("flamegraphDrawerKey","flamegraphDrawer","flamegraph","setFlamegraphDrawer","flamegraphData"),uv=lv.mapMethods,dv=lv.mapWatch,pv=lv.handleMounted,fv=B("snapshotDrawerKey","snapshotDrawer","snapshot","setSnapshotDrawer","snapshotData"),hv=fv.mapMethods,vv=fv.mapWatch,bv=fv.handleMounted,gv={mounted:function(){ev.call(this,"handleDiagDrawer",!0),nv.call(this,"handleGcDrawer",!0),cv.call(this,"handleTrendDrawer",!0),pv.call(this,"handleFlamegraphDrawer",!0),bv.call(this,"handleSnapshotDrawer",!0)},methods:qh({},Vh(["setDiagDrawer","setGcDrawer","setTrendDrawer","setFlamegraphDrawer","setSnapshotDrawer"]),{},Zh("handleDiagDrawer"),{},rv("handleGcDrawer"),{},ov("handleTrendDrawer"),{},uv("handleFlamegraphDrawer"),{},hv("handleSnapshotDrawer"),{closeDiagDrawer:function(){this.setDiagDrawer({status:!1})},closeGcDrawer:function(){this.setGcDrawer({status:!1})},closeTrendDrawer:function(){this.setTrendDrawer({status:!1})},closeFlameGraphDrawer:function(){this.setFlamegraphDrawer({status:!1})},closeSnapshotDrawer:function(){this.setSnapshotDrawer({status:!1})}}),computed:qh({},Yh(["diagDrawer","diagData","gcDrawer","gcData","trendDrawer","trendData","flamegraphDrawer","flamegraphData","snapshotDrawer","snapshotData"])),watch:qh({},Jh,{},av,{},sv,{},dv,{},vv,{$route:function(e){this.handleDiagDrawer(e.query),this.handleGcDrawer(e.query),this.handleTrendDrawer(e.query),this.handleFlamegraphDrawer(e.query),this.handleSnapshotDrawer(e.query)}})},yv=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("x-dashboard-title",{attrs:{appName:"诊断报告分析",dashboardTitle:e.diagData.fileBasename,line:""}}),r("div",{staticClass:"diag-content"},[r("div",{staticClass:"diag-loading"},[r("x-loading",{attrs:{loading:e.file_loading,top:"calc(40vh - 50px)",type:"dot",size:"large"}})],1),r("x-error-message",{directives:[{name:"show",rawName:"v-show",value:e.file_load_error,expression:"file_load_error"}],attrs:{message:e.file_load_error,top:"calc(40vh - 57px)"}}),r("transition",{attrs:{name:"slide-noward"}},[e.file_loading||e.file_load_error?e._e():r("div",{staticClass:"diag-detail"},[r("x-overview",{attrs:{data:e.overviewData}}),r("x-diag-tab",{staticClass:"diag-tab"}),r("x-diag-content")],1)])],1)],1)},mv=[];function Ov(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function wv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ov(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ov(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _v=m("dashboard/file/wrapper"),jv=_v.mapState,xv=m("dashboard/analytics"),Pv=xv.mapState,kv=xv.mapActions,Dv={created:function(){this.cancelToken=C(),this.downloadFile({cancelToken:this.cancelToken.token,fileId:this.diagData.fileId,fileType:this.diagData.fileType})},beforeDestroy:function(){A(this.cancelToken)},methods:wv({},kv(["downloadFile"])),computed:wv({},jv(["diagData"]),{},Pv(["file_loading","file_load_error","file_data"]),{overviewData:function(){var e=this.file_data;if(!e)return[];var t=e.pid,r=e.nodeVersion,a=e.loadTime,n=e.heapStatistics,i=n.heapTotalCommitted,o=n.heapTotalAvailable;return[{label:"ProcessID",value:t},{label:"Node.js 版本",value:r},{label:"堆内存状态 (Committed / HeapAvailable)",value:"".concat(D(i)," / ").concat(D(o))},{label:"启动时间",value:a}]}})},Sv=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"overview"},e._l(e.data,(function(t,a){return r("div",{key:a,staticClass:"group"},[r("div",{staticClass:"label"},[e._v(e._s(t.label))]),r("div",{staticClass:"value"},[e._v(e._s(t.value))])])})),0)},Tv=[],Cv={props:{data:Array}},Av=Cv,Mv=(r("350f"),Object(u["a"])(Av,Sv,Tv,!1,null,"58218e8b",null)),Ev=Mv.exports,Iv=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Tabs",{attrs:{type:"card"},model:{value:e.selectedTab,callback:function(t){e.selectedTab=t},expression:"selectedTab"}},e._l(e.diagTabs,(function(e,t){return r("TabPane",{key:t,attrs:{label:e.label,name:e.value}})})),1)],1)},Nv=[];function Rv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Lv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rv(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rv(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Fv=m("dashboard/analytics/diag"),$v=Fv.mapMutations,zv={created:function(){var e=this.$route.query;this.selectedTab=e["diagTab"]||"jsStacks"},methods:Lv({},$v(["setDiagTab"])),watch:{$route:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];I.call(this,t,"diagTab","selectedTab")},selectedTab:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];N.call(this,"diagTab","selectedTab",t),this.setDiagTab(this.selectedTab)}}};function Bv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Uv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Bv(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bv(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Gv=Uv({data:function(){return{selectedTab:void 0,diagTabs:[{label:"JavaScript 栈",value:"jsStacks"},{label:"Native 栈",value:"nativeStacks"},{label:"Libuv 句柄",value:"libuvHandles"},{label:"系统信息",value:"system"}],nessaryQueryArgs:["filterType","page","diag-analytics","diagTab","diagData"]}}},zv),Hv=Gv,Wv=Object(u["a"])(Hv,Iv,Nv,!1,null,null,null),Xv=Wv.exports,qv=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("transition",{attrs:{name:"slide-noward"}},[e.diagTab?r(e.activeComponent,{tag:"component",attrs:{data:e.file_data}}):e._e()],1)],1)},Kv=[];function Yv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Vv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yv(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yv(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Qv=m("dashboard/analytics/diag"),Zv=Qv.mapState,Jv=m("dashboard/analytics"),eb=Jv.mapState,tb={computed:Vv({},Zv(["diagTab"]),{},eb(["file_data"]),{activeComponent:function(){var e="";switch(this.diagTab){case"jsStacks":e="x-javascript";break;case"nativeStacks":e="x-native";break;case"libuvHandles":e="x-libuv";break;case"system":e="x-system-view";break;default:break}return e}})},rb=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"section-title"},[e._v("进程堆信息")]),r("x-heap"),r("div",{staticClass:"section-title",staticStyle:{"margin-top":"25px"}},[e._v("函数调用栈")]),r("x-table",{staticStyle:{"margin-top":"15px"},attrs:{columns:e.columns,data:e.jsStacks,noDataText:"暂无 JavaScript 栈信息","no-data-head":"",stribe:""},scopedSlots:e._u([{key:"pcAddress",fn:function(t){var a=t.row;return[r("div",{staticClass:"padding"},[r("code",[e._v(e._s(a.pcAddress))])])]}},{key:"frameType",fn:function(t){var a=t.row;return[r("div",{staticClass:"padding"},[r("code",[e._v(e._s(a.frameType))])])]}},{key:"frameDetail",fn:function(t){var a=t.row;return[r("div",{staticClass:"padding frame-detail"},[r("code",[e._v(e._s(a.frameDetail))])])]}}])})],1)},ab=[];function nb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ib(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nb(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nb(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ob=m("dashboard/analytics"),sb=ob.mapState,cb={computed:ib({},sb(["file_data"]),{jsStacks:function(){var e=this.file_data.jsStacks;return e.map((function(e){var t=e.pcAddress,r=e.frameType,a=e.functionName,n=e.scriptName,i=e.lineNumber,o=e.column,s="".concat(a,"() (").concat(n,":").concat(i,":").concat(o,")");return{pcAddress:t,frameType:r,frameDetail:s}}))}})},lb=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("x-tooltip",{ref:"tooltip",attrs:{"min-width":100,clientOffset:""}},[r("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.selectedData.name)+": "+e._s(e.selectedData.size))])]),r("div",{ref:"heapGroup",staticClass:"heap-group"},[r("div",{staticClass:"heap-item"},[r("div",{staticClass:"sub-title"},[e._v("已使用 / 已分配堆内存 ("+e._s(e.heapData.usedTotalPect)+")")]),r("div",{staticClass:"heap-used-wrapper",on:{mousemove:function(t){return e.mousemove("heap_total",e.heapData.heapTotal,t)},mouseleave:e.mouseleave}},[r("div",{staticClass:"heap-used",style:e.heapData.usedTotalStyle,on:{mousemove:function(t){return t.stopPropagation(),e.mousemove("heap_used",e.heapData.heapTotalUsed,t)}}})])]),r("div",{staticClass:"heap-item"},[r("div",{staticClass:"sub-title"},[e._v("已使用 / 堆内存上限 ("+e._s(e.heapData.usedLimtPect)+")")]),r("div",{staticClass:"heap-used-wrapper",on:{mousemove:function(t){return e.mousemove("heap_limit",e.heapData.heapLimit,t)},mouseleave:e.mouseleave}},[r("div",{staticClass:"heap-used",style:e.heapData.usedLimitStyle,on:{mousemove:function(t){return t.stopPropagation(),e.mousemove("heap_used",e.heapData.heapTotalUsed,t)}}})])]),r("div",{staticClass:"heap-item"},[r("div",{staticClass:"sub-title"},[e._v("堆内存分布")]),r("div",{staticClass:"heap-used-wrapper"},[r("div",{staticClass:"heap-spaces"},e._l(e.heapSpaces,(function(t,a){return r("div",{key:a,style:t.width+"height: 100%;"+(0!==a&&0!==t.rawWidth?"padding-left: 1px;":""),on:{mousemove:function(r){return r.stopPropagation(),e.mousemove(t.name,t.size,r)},mouseleave:e.mouseleave}},[r("div",{staticClass:"heap-used",style:t.color})])})),0)])])])],1)},ub=[];function db(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function pb(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?db(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):db(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var fb=m("dashboard/instance/process"),hb=fb.mapState,vb=m("dashboard/analytics"),bb=vb.mapState,gb={mounted:function(){this.tooltip=this.$refs.tooltip,this.setWidth(),window.addEventListener("resize",this.setWidth.bind(this))},methods:pb({setWidth:function(){this.$refs.heapGroup&&(this.heapGroupWidth=parseInt(window.getComputedStyle(this.$refs.heapGroup).width,10)-110)}},w("mousemove",(function(e,t,r){this.selectedData={name:e,size:D(t)},this.tooltip.showToolTip(this.heapGroupWidth,r,70)})),{},w("mouseleave",(function(){this.tooltip.removeToolTip()}))),computed:pb({},hb(["colors"]),{},bb(["file_data"]),{heapData:function(){var e=this.file_data.heapStatistics,t=e.heapTotal,r=e.heapTotalUsed,a=e.heapLimit,n="",i=r/a*100;n+="width: ".concat(i,"%;");var o="",s=r/t*100;return o+="width: ".concat(s,"%;"),{heapTotal:t,heapTotalUsed:r,heapLimit:a,usedTotalStyle:o,usedTotalPect:"".concat(s.toFixed(2),"%"),usedLimitStyle:n,usedLimtPect:"".concat(i.toFixed(2),"%")}},heapSpaces:function(){var e=this,t=this.file_data.heapSpaceStatistics,r=0,a=!0,n=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(a=(o=s.next()).done);a=!0){var c=o.value;r+=c.size}}catch(l){n=!0,i=l}finally{try{a||null==s.return||s.return()}finally{if(n)throw i}}return t.map((function(t,a){var n=t.size/r*100,i="background-color: ".concat(e.colors[a%e.colors.length],";");return{width:"width: ".concat(n,"%;"),color:i,rawWidth:n,name:t.name,size:t.size}}))}})};function yb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function mb(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yb(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yb(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ob=mb({data:function(){return{selectedData:{},heapGroupWidth:1/0}}},gb),wb=Ob,_b=(r("3304"),Object(u["a"])(wb,lb,ub,!1,null,"4faae300",null)),jb=_b.exports;function xb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Pb(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xb(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xb(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var kb=Pb({components:{"x-heap":jb},data:function(){return{columns:[{title:"寄存器指令地址",value:"pcAddress",width:140},{title:"函数类型",value:"frameType",width:135,align:"center"},{title:"执行栈帧",value:"frameDetail"}]}}},cb),Db=kb,Sb=(r("e423"),Object(u["a"])(Db,rb,ab,!1,null,"6c76f57b",null)),Tb=Sb.exports,Cb=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("x-table",{attrs:{columns:e.columns,data:e.nativeStacks,noDataText:"暂无 Native 栈信息","no-data-head":"",stribe:""},scopedSlots:e._u([{key:"pcAddress",fn:function(t){var a=t.row;return[r("div",{staticClass:"padding"},[r("code",[e._v(e._s(a.pcAddress))])])]}},{key:"frameDetail",fn:function(t){var a=t.row;return[r("div",{staticClass:"padding frame-detail"},[r("code",[e._v(e._s(a.frameDetail))])])]}}])})],1)},Ab=[];function Mb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Eb(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mb(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mb(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ib=m("dashboard/analytics"),Nb=Ib.mapState,Rb={computed:Eb({},Nb(["file_data"]),{nativeStacks:function(){var e=this.file_data.nativeStacks;return e.map((function(e){var t=e.pcAddress,r=e.symbolName,a=e.sharedObjectName,n="";return n=r||a?"".concat(r||"").concat(a?" [".concat(a,"]"):""):"<unknown frame>",{pcAddress:t,frameDetail:n}}))}})};function Lb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Fb(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Lb(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lb(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var $b=Fb({data:function(){return{columns:[{title:"寄存器指令地址",value:"pcAddress",width:140},{title:"Native 函数 / 链接库信息",value:"frameDetail"}]}}},Rb),zb=$b,Bb=(r("a7a0"),Object(u["a"])(zb,Cb,Ab,!1,null,"ac70d7d0",null)),Ub=Bb.exports,Gb=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.file_data.libuvHandles.length?r("div",[r("Alert",{staticClass:"x-alert",attrs:{type:"info"}},[r("div",{staticClass:"alert-group"},[r("Icon",{staticStyle:{color:"#2376b7"},attrs:{type:"ios-alert-outline"}}),r("div",{staticClass:"alert-desc"},[e._v(" Libuv 总句柄数: "),r("span",{staticClass:"statistics-number"},[e._v(e._s(e.statistics.total))]),e._v(", 活跃总句柄数: "),r("span",{staticClass:"statistics-number"},[e._v(e._s(e.statistics.active))]),e._v(", 活跃且存在引用总句柄数: "),r("span",{staticClass:"statistics-number"},[e._v(e._s(e.statistics.activeAndRef))])])],1)]),r("div",{staticClass:"uv-handle"},[r("Select",{staticClass:"agent-selector uv-type-selector",model:{value:e.selectedUvType,callback:function(t){e.selectedUvType=t},expression:"selectedUvType"}},e._l(e.uvTypes,(function(t,a){return r("Option",{key:a,attrs:{value:t.value}},[e._v(e._s(t.value))])})),1),r("div",{staticClass:"handle-tags"},e._l(e.uvTags,(function(t,a){return r("Tag",{key:a,staticClass:"handle-tag",style:0!==a?"margin-left: 20px;":"",attrs:{type:"dot",color:t.color}},[r("code",[e._v(" "+e._s(t.label)+": "),r("span",{staticClass:"statistics-number"},[e._v(e._s(e.handleStatistics[t.value]))])])])})),1)],1),r("transition",{attrs:{name:"slide-noward"}},[e.uvType?r("x-handle",{staticStyle:{"margin-top":"15px"}}):e._e()],1)],1):r("div",[r("x-error-message",{attrs:{message:"暂无 Libuv 句柄信息",top:"calc(35vh - 150px)"}})],1)])},Hb=[];function Wb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Xb(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wb(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wb(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var qb=m("dashboard/analytics"),Kb=qb.mapState,Yb=m("dashboard/analytics/diag"),Vb=Yb.mapState,Qb=Yb.mapMutations,Zb={methods:Xb({},Qb(["setUvType"]),{getStatistics:function(e){var t=this.file_data.libuvHandles,r=0,a=0,n=0,i=!0,o=!1,s=void 0;try{for(var c,l=t[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){var u=c.value;"all"!==e&&u.type!==e||(r++,u.isActive&&a++,u.isActive&&u.hasRef&&n++)}}catch(d){o=!0,s=d}finally{try{i||null==l.return||l.return()}finally{if(o)throw s}}return{total:r,active:a,activeAndRef:n}}}),computed:Xb({},Kb(["file_data"]),{},Vb(["uvType"]),{uvTypes:function(){var e=this.file_data.libuvHandles,t=Array.from(new Set(e.map((function(e){return e.type})))).map((function(e){return{label:e,value:e}})),r={},a=!0,n=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done);a=!0){var c=o.value;r[c.type]?r[c.type]++:r[c.type]=1}}catch(u){n=!0,i=u}finally{try{a||null==s.return||s.return()}finally{if(n)throw i}}t.sort((function(e,t){return r[e.value]<r[t.value]?1:-1}));var l=this.$route.query;return l.uvType?this.selectedUvType=l.uvType:this.selectedUvType=t[0].value,t},statistics:function(){return this.getStatistics("all")},handleStatistics:function(){return this.getStatistics(this.selectedUvType)}}),watch:{$route:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];I.call(this,t,"uvType","selectedUvType")},selectedUvType:function(){for(var e=this,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var n=r[0],i=r[1];i&&n&&i!==n&&this.setUvType(void 0),setTimeout((function(){return e.setUvType(e.selectedUvType)}),0),this.selectedUvType&&N.call(this,"uvType","selectedUvType",r)}}},Jb=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("transition",{attrs:{name:"slide-noward"}},[e.showHandles.length?r("x-table",{attrs:{columns:e.columns,data:e.showHandles,noDataText:e.uvType+" 类型下暂无 Libuv 句柄信息","no-data-head":"",stribe:""},scopedSlots:e._u([{key:"pcAddress",fn:function(t){var a=t.row;return[r("div",{staticClass:"padding"},[r("code",[e._v(e._s(a.pcAddress))])])]}},{key:"isActive",fn:function(e){var t=e.row;return[r("div",{staticClass:"padding"},[t.isActive?r("Icon",{staticClass:"active",attrs:{type:"md-checkmark"}}):r("Icon",{staticClass:"inactive",attrs:{type:"md-close"}})],1)]}},{key:"hasRef",fn:function(e){var t=e.row;return[r("div",{staticClass:"padding"},[t.hasRef?r("Icon",{staticClass:"active",attrs:{type:"md-checkmark"}}):r("Icon",{staticClass:"inactive",attrs:{type:"md-close"}})],1)]}},{key:"handleDetail",fn:function(t){var a=t.row;return[r("div",{staticClass:"padding"},[r("code",[e._v(e._s(a.handleDetail))])])]}}],null,!1,4106992201)}):e._e()],1),e.handles.length?r("div",{staticClass:"pagination"},[r("Page",{attrs:{total:e.handles.length,"page-size":e.pageSize,current:e.currentPage,size:"small","show-elevator":""},on:{"on-change":e.changeHandlePage}})],1):e._e()],1)},eg=[];function tg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function rg(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tg(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tg(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ag=m("dashboard/analytics"),ng=ag.mapState,ig=m("dashboard/analytics/diag"),og=ig.mapState,sg={created:function(){var e=this.$route.query;e.uvPage?this.currentPage=Number(e.uvPage):this.currentPage=1},methods:{changeHandlePage:function(e){var t=this;this.currentPage=null,setTimeout((function(){return t.currentPage=e}),0)}},computed:rg({},ng(["file_data"]),{},og(["uvType"]),{handles:function(){var e=this.file_data.libuvHandles,t=[],r=!0,a=!1,n=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var s=i.value;s.type===this.uvType&&t.push(s)}}catch(c){a=!0,n=c}finally{try{r||null==o.return||o.return()}finally{if(a)throw n}}return t.sort((function(e,t){return!e.isActive&&t.isActive?1:e.isActive===t.isActive&&!e.hasRef&&t.hasRef?1:-1})),t.map((function(e){return{pcAddress:e.address,isActive:e.isActive,hasRef:e.hasRef,handleDetail:e.detail||"<empty>"}}))},showHandles:function(){if(null===this.currentPage)return[];var e=(this.currentPage-1)*this.pageSize,t=this.pageSize*this.currentPage;return this.handles.filter((function(){for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];var i=a[1];return i>=e&&i<t}))}}),watch:{$route:function(){for(var e=this,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];setTimeout((function(){return I.call(e,r,"uvPage","currentPage",!0)}),0)},currentPage:function(){if(this.currentPage){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];N.call(this,"uvPage","currentPage",t)}}}};function cg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function lg(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?cg(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cg(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ug=lg({data:function(){return{currentPage:void 0,pageSize:15,columns:[{title:"寄存器指令地址",value:"pcAddress",width:140},{title:"活跃状态",value:"isActive",width:135,align:"center"},{title:"引用状态",value:"hasRef",width:135,align:"center"},{title:"句柄补充信息",value:"handleDetail"}],nessaryQueryArgs:["filterType","page","diag-analytics","diagTab","diagData","uvType"]}}},sg),dg=ug,pg=(r("bc4f"),Object(u["a"])(dg,Jb,eg,!1,null,"06ddf605",null)),fg=pg.exports;function hg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function vg(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hg(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hg(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var bg=vg({components:{"x-handle":fg},data:function(){return{selectedUvType:void 0,uvTags:[{label:"句柄总数",value:"total",color:"primary"},{label:"活跃句柄总数",value:"active",color:"success"},{label:"活跃且存在引用句柄总数",value:"activeAndRef",color:"warning"}],nessaryQueryArgs:["filterType","page","diag-analytics","diagTab","diagData"]}}},Zb),gg=bg,yg=(r("bff7"),Object(u["a"])(gg,Gb,Hb,!1,null,"5b1966a4",null)),mg=yg.exports,Og=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Alert",{staticClass:"x-alert",attrs:{type:"info"}},[r("div",{staticClass:"alert-group"},[r("Icon",{staticStyle:{color:"#2376b7"},attrs:{type:"ios-alert-outline"}}),r("div",{staticClass:"alert-desc"},[e._v(" 系统版本: "),r("span",{staticClass:"overview"},[e._v(e._s(e.osVersion))])])],1)]),r("div",{staticClass:"content"},[r("div",{staticClass:"system-section"},[e._v("Process Env")]),e._l(e.systemEnv,(function(t,a){return r("div",{key:"env_"+a,staticClass:"section-detail env-group"},[r("Icon",{attrs:{type:"ios-arrow-forward"}}),r("span",{staticClass:"env-key"},[e._v(" "+e._s(t.key))]),r("span",{staticClass:"env-semi"},[e._v(": ")]),r("span",{staticClass:"env-value"},[e._v('"'+e._s(t.value)+'"')])],1)})),r("div",{staticClass:"system-section",staticStyle:{"margin-top":"15px"}},[e._v("Resource Limit")]),e._l(e.resourceLimits,(function(t,a){return r("div",{key:"limit_"+a,staticClass:"section-detail"},[r("Icon",{attrs:{type:"ios-arrow-forward"}}),r("span",{staticClass:"respurce-key"},[e._v(" "+e._s(t.type))]),r("span",{staticClass:"env-semi"},[e._v(": ")]),e._v(" Soft "),r("span",{staticClass:"respurce-params"},[e._v(e._s(t.softLimit))]),e._v(" Hard "),r("span",{staticClass:"respurce-params"},[e._v(e._s(t.hardLimit))])],1)})),r("div",{staticClass:"system-section",staticStyle:{"margin-top":"15px"}},[e._v("Loaded Libraries")]),e._l(e.loadedLibraries,(function(t,a){return r("div",{key:"lib_"+a,staticClass:"section-detail"},[r("Icon",{attrs:{type:"ios-arrow-forward"}}),e._v(" "+e._s(t)+" ")],1)}))],2)],1)},wg=[];function _g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function jg(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_g(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var xg=m("dashboard/analytics"),Pg=xg.mapState,kg={computed:jg({},Pg(["file_data"]),{osVersion:function(){return this.file_data.osVersion},system:function(){return this.file_data.system||{}},systemEnv:function(){var e=this.system.env||[];return e.map((function(e){var t=e.split("=");return{key:t[0],value:t[1]}}))},resourceLimits:function(){var e=this.system.resourceLimits||[];return e},loadedLibraries:function(){var e=this.system.loadedLibraries||[];return e}})};function Dg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Sg(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Dg(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dg(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Tg=Sg({},kg),Cg=Tg,Ag=(r("ab6a"),Object(u["a"])(Cg,Og,wg,!1,null,"6dbe0001",null)),Mg=Ag.exports;function Eg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Ig(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Eg(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Eg(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ng=Ig({components:{"x-javascript":Tb,"x-native":Ub,"x-libuv":mg,"x-system-view":Mg}},tb),Rg=Ng,Lg=Object(u["a"])(Rg,qv,Kv,!1,null,null,null),Fg=Lg.exports;function $g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function zg(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$g(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Bg=zg({components:{"x-overview":Ev,"x-diag-tab":Xv,"x-diag-content":Fg}},Dv),Ug=Bg,Gg=(r("fca7"),Object(u["a"])(Ug,yv,mv,!1,null,"6894aca3",null)),Hg=Gg.exports,Wg=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("x-dashboard-title",{attrs:{appName:"GC 追踪日志分析",dashboardTitle:e.gcData.fileBasename,line:""}}),r("div",{staticClass:"gc-content"},[r("div",{staticClass:"gc-loading"},[r("x-loading",{attrs:{loading:e.file_loading,top:"calc(40vh - 50px)",type:"dot",size:"large"}})],1),r("x-error-message",{directives:[{name:"show",rawName:"v-show",value:e.file_load_error,expression:"file_load_error"}],attrs:{message:e.file_load_error,top:"calc(40vh - 57px)"}}),r("transition",{attrs:{name:"slide-noward"}},[e.file_loading||e.file_load_error?e._e():r("div",[e.file_data.gc.length?r("div",[r("x-overview",{attrs:{data:e.overviewData}}),r("x-trace-statistics",{staticClass:"trace-statistics"}),r("x-trace-detail",{staticClass:"trace-detail"})],1):r("x-error-message",{attrs:{message:"当前进程追踪采样期间暂无 GC 行为发生",top:"calc(40vh - 57px)"}})],1)])],1)],1)},Xg=[];function qg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Kg(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qg(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qg(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Yg=m("dashboard/file/wrapper"),Vg=Yg.mapState,Qg=m("dashboard/analytics/gc"),Zg=Qg.mapMutations,Jg=Qg.mapGetters,ey=m("dashboard/analytics"),ty=ey.mapState,ry=ey.mapActions,ay=S,ny=D,iy={created:function(){this.cancelToken=C(),this.downloadFile({cancelToken:this.cancelToken.token,fileId:this.gcData.fileId,fileType:this.gcData.fileType})},beforeDestroy:function(){A(this.cancelToken)},methods:Kg({},ry(["downloadFile"]),{},Zg(["setGcFileData"])),computed:Kg({},Vg(["gcData"]),{},Jg(["startTime","stopTime","gcList","calculateSize"]),{},ty(["file_loading","file_load_error","file_data"]),{overviewData:function(){var e=this.gcList,t=0,r=0,a=0,n=0,i=0,o=this.stopTime-this.startTime,s=!0,c=!1,l=void 0;try{for(var u,d=e[Symbol.iterator]();!(s=(u=d.next()).done);s=!0){var p=u.value;t+=+(p.end-p.start),r++,"scavenge"===p.type&&a++,"marksweep"===p.type&&n++,"marking"===p.type&&i++}}catch(g){c=!0,l=g}finally{try{s||null==d.return||d.return()}finally{if(c)throw l}}var f,h,v="".concat(ay(t)," / ").concat(ay(o)),b="".concat(r," ( ").concat(a," / ").concat(n," / ").concat(i," )");return e.length?(f=ny(this.calculateSize(e[0].before)),h=ny(this.calculateSize(e[e.length-1].after))):(f="-",h="-"),[{label:"追踪期间 GC 暂停总时间 / 追踪时长",value:v},{label:"GC 次数 (Scavenge / Mark-Sweep / Incremental-Marking)",value:b},{label:"第一次 GC 前堆大小",value:f},{label:"最后一次 GC 后堆大小",value:h}]}}),watch:{file_data:function(){this.file_data&&this.setGcFileData(this.file_data)}}},oy=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"section-title"},[e._v("GC 追踪全貌概览")]),r("div",{staticClass:"trace-group"},[r("div",{staticClass:"trace-item"},[r("div",{staticClass:"sub-title"},[e._v("GC 暂停时间占比 ( "+e._s(e.formatPercentage(e.gcOccupy))+"% )")]),r("div",{staticClass:"gc-total-wrapper"},[r("div",{staticClass:"gc-occupy",style:"width: "+e.gcOccupy+"%;"})])]),r("div",{staticClass:"trace-item"},[r("div",{staticClass:"sub-title"},[e._v("GC 暂停时间分布 (ms)")]),r("x-mini-scatter",{staticClass:"mini-scatter",attrs:{data:e.pauseTime,"dot-color":"#3B93D8"}})],1),r("div",{staticClass:"trace-item"},[r("div",{staticClass:"sub-title"},[e._v("GC 内存变化分布 (MB)")]),r("x-mini-scatter",{staticClass:"mini-scatter",attrs:{data:e.memoryChange,"dot-color":"#ff9900"}})],1)])])},sy=[];function cy(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ly(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?cy(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cy(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var uy=m("dashboard/analytics/gc"),dy=uy.mapGetters,py={methods:{formatPercentage:function(e){return e.toFixed(2)}},computed:ly({},dy(["startTime","stopTime","pauseTime","memoryChange"]),{totalPauseTime:function(){var e=0,t=!0,r=!1,a=void 0;try{for(var n,i=this.pauseTime[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var o=n.value;e+=o}}catch(s){r=!0,a=s}finally{try{t||null==i.return||i.return()}finally{if(r)throw a}}return e},gcOccupy:function(){var e=this.totalPauseTime,t=this.stopTime-this.startTime;return e/t*100}})};function fy(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function hy(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fy(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fy(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var vy=hy({},py),by=vy,gy=(r("1ecf"),Object(u["a"])(by,oy,sy,!1,null,"4cb3d6d8",null)),yy=gy.exports,my=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"section-title"},[e._v("GC 追踪分片解析")]),r("div",{staticClass:"trace-content"},[r("x-trace-panel",{staticClass:"trace-panel",attrs:{"select-gc":e.selectGc}}),r("div",{staticClass:"trace-charts"},[r("div",{staticClass:"trace-group"},[r("x-histogram",{ref:"histogram",staticClass:"trace-item",attrs:{data:e.pauseTimeWithStart,xAxis:"index",yAxis:"pause",yAxisUnit:"ms",xAxisScaleCount:e.getXAxisScaleCount(e.pauseTimeWithStart),yAxisZero:""},on:{broadcast:function(t){return e.broadcast("histogram",arguments)},linkage:function(t){return e.linkage("histogram",arguments)},hidden:function(t){return e.hidden("histogram")}}}),r("x-area",{ref:"area",staticClass:"trace-item",attrs:{right:30,bottom:27,data:e.heapTrendWithStart,xAxis:"index",yAxis:["heap_size"],xAxisScaleCount:e.getXAxisScaleCount(e.heapTrendWithStart),yAxisUnit:"MB"},on:{broadcast:function(t){return e.broadcast("area",arguments)},linkage:function(t){return e.linkage("area",arguments)},hidden:function(t){return e.hidden("area")}}})],1),r("div",{staticClass:"trace-group"},[r("x-histogram",{ref:"histogram2",staticClass:"trace-item",attrs:{data:e.pauseTimeWithStart,xAxis:"index",yAxis:"changeAbs",yAxisUnit:"MB",xAxisScaleCount:e.getXAxisScaleCount(e.pauseTimeWithStart),yAxisZero:""},on:{broadcast:function(t){return e.broadcast("histogram2",arguments)},linkage:function(t){return e.linkage("histogram2",arguments)},hidden:function(t){return e.hidden("histogram2")}}}),r("x-space-scatter",{ref:"scatter",staticClass:"trace-item",attrs:{data:e.spaceTrendWithStart.list,xAxis:"index",yAxis:e.spaceTrendWithStart.spaces,yAxisUnit:"MB",xAxisScaleCount:e.getXAxisScaleCount(e.spaceTrendWithStart.list),yAxisZero:""},on:{broadcast:function(t){return e.broadcast("scatter",arguments)},linkage:function(t){return e.linkage("scatter",arguments)},hidden:function(t){return e.hidden("scatter")}}})],1)])],1)])},Oy=[];function wy(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function _y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wy(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wy(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var jy=m("dashboard/analytics/gc"),xy=jy.mapGetters,Py={methods:{broadcast:function(e,t){var r=Object(O["a"])(t,1),a=r[0],n=!0,i=!1,o=void 0;try{for(var s,c=this.charts[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){var l=s.value;l.name!==e&&this.$refs[l.name].handleBroadcase(a)}}catch(u){i=!0,o=u}finally{try{n||null==c.return||c.return()}finally{if(i)throw o}}},linkage:function(e,t){var r=Object(O["a"])(t,1),a=r[0];this.selectGc=a.time;var n=!0,i=!1,o=void 0;try{for(var s,c=this.charts[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){var l=s.value;l.name!==e&&this.$refs[l.name].showTip(a)}}catch(u){i=!0,o=u}finally{try{n||null==c.return||c.return()}finally{if(i)throw o}}},hidden:function(e){var t=!0,r=!1,a=void 0;try{for(var n,i=this.charts[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var o=n.value;o.name!==e&&this.$refs[o.name].hiddenTip()}}catch(s){r=!0,a=s}finally{try{t||null==i.return||i.return()}finally{if(r)throw a}}},getXAxisScaleCount:function(e){return e.length-1<5?e.length-1:5}},computed:_y({},xy(["pauseTimeWithStart","heapTrendWithStart","spaceTrendWithStart"]),{charts:function(){return[{name:"histogram"},{name:"area"},{name:"histogram2"},{name:"scatter"}]}})},ky=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"panel"},[r("div",{staticClass:"title-group",style:"background-color: "+e.getTitleColor(e.gcData.type)+";"},[r("div",{staticClass:"icon-wrapper"},[r("transition",{attrs:{name:"slide-noward"}},[r("Icon",{directives:[{name:"show",rawName:"v-show",value:1!==e.gcTime,expression:"gcTime !== 1"}],staticClass:"icon",attrs:{type:"ios-arrow-back"},on:{click:function(t){e.gcTime--}}})],1)],1),r("div",{staticClass:"title-wrapper"},[r("div",{staticClass:"mian-title"},[e._v(" 第 "),r("span",{staticClass:"gc-times"},[e._v(e._s(e.gcTime))]),e._v(" 次 GC ")]),r("div",{staticClass:"sub-title"},[e._v("类型: "+e._s(e.gcData.type))])]),r("div",{staticClass:"icon-wrapper"},[r("transition",{attrs:{name:"slide-noward"}},[r("Icon",{directives:[{name:"show",rawName:"v-show",value:e.gcTime!==e.maxDataLength,expression:"gcTime !== maxDataLength"}],staticClass:"icon",attrs:{type:"ios-arrow-forward"},on:{click:function(t){e.gcTime++}}})],1)],1)]),r("div",{staticClass:"statistics"},e._l(e.statistics,(function(t,a){return r("div",{key:a,staticClass:"statistics-group",style:0!==a?"margin-top: 10px;":""},e._l(t,(function(t,a){return r("div",{key:a,staticClass:"metric-group"},[r("div",{staticClass:"metric-key"},[e._v(e._s(t.title))]),r("div",{staticClass:"metric-value"},[e._v(e._s(t.value))])])})),0)})),0),r("div",{staticClass:"gc-radio"},[r("RadioGroup",{model:{value:e.showSpaceStatus,callback:function(t){e.showSpaceStatus=t},expression:"showSpaceStatus"}},[r("Radio",{staticClass:"radio-label",attrs:{label:"before"}},[e._v("GC 前")]),r("Radio",{staticClass:"radio-label",attrs:{label:"after"}},[e._v("GC 后")])],1)],1),r("div",{ref:"spaces",staticClass:"spaces",style:"height: "+e.spacesWidth+"px;"},[r("x-space-status",{attrs:{data:e.gcData[e.showSpaceStatus],before:e.gcData.before,height:e.spacesWidth}})],1),r("div",{staticClass:"gc-status"},e._l(e.gcStstus,(function(t,a){return r("div",{key:a,staticClass:"statistics-group",style:0!==a?"margin-top: 10px;":""},e._l(t,(function(t,a){return r("div",{key:a,staticClass:"metric-group"},[r("div",{staticClass:"metric-key"},[e._v(e._s(t.title))]),r("div",{staticClass:"metric-value"},[e._v(e._s(t.value))])])})),0)})),0)])},Dy=[];function Sy(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Ty(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Sy(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sy(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Cy=m("dashboard/analytics/gc"),Ay=Cy.mapState,My=Cy.mapGetters,Ey={mounted:function(){this.spaces=this.$refs.spaces,this.setSpaceWidth()},methods:{setSpaceWidth:function(){if(this.spaces){var e=parseInt(window.getComputedStyle(this.spaces).width,10);e&&(this.spacesWidth=e)}},formatChartipTime:function(e){return S(e,!1,!0,1)},getTitleColor:function(e){var t="";switch(e){case"scavenge":t="#3498db";break;case"marksweep":t="#ff9900";break;case"marking":t="#6a5acd";break;default:break}return t}},computed:Ty({},Ay(["gcFile"]),{},My(["calculateSize"]),{gcData:function(){return this.gcFile.gc[this.gcTime-1]},maxDataLength:function(){return this.gcFile.gc.length},statistics:function(){var e=this.gcData,t=this.formatChartipTime(e.totalSpentfromStart),r=this.calculateSize(e.after)-this.calculateSize(e.before);r=Number((r/1024/1024).toFixed(2)),r=r>=0?"+".concat(r,"MB"):"".concat(r,"MB");var a="".concat(+(e.end-e.start),"ms");return[[{title:"累计 GC 暂停时间",value:t},{title:"累计 GC 总次数",value:e.totalTimesfromStart}],[{title:"GC 堆大小变化",value:r},{title:"GC 暂停时间",value:a}]]},gcStstus:function(){var e=this.gcData,t=this.showSpaceStatus,r=0,a=["read_only_space","old_space","code_space","map_space"],n=!0,i=!1,o=void 0;try{for(var s,c=e[t][Symbol.iterator]();!(n=(s=c.next()).done);n=!0){var l=s.value;a.includes(l.name)&&(r+=l.space_available_size)}}catch(u){i=!0,o=u}finally{try{n||null==c.return||c.return()}finally{if(i)throw o}}return[[{title:"所有空间已使用",value:D(this.calculateSize(e[t]))},{title:"所有空间占用",value:D(this.calculateSize(e[t],"space_size"))}],[{title:"Page 空洞大小",value:D(r)},{title:"物理内存占用",value:D(this.calculateSize(e[t],"physical_space_size"))}]]}}),watch:{selectGc:function(){_(this.selectGc)&&(this.gcTime=this.selectGc)},gcTime:function(){this.showSpaceStatus="before"}}},Iy=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"space-status"},[r("x-chartip",{ref:"chartip",attrs:{"min-width":100,"max-width":100,"no-arrow":""}},[r("div",{staticClass:"space-size",attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.selectedSpace)+": "+e._s(e.selectedSpaceSize))])]),r("div",{staticClass:"smaller-spaces",style:"height: "+(100-e.largerHeight)+"%;"},e._l(e.smallers,(function(t,a){return r("div",{key:a,ref:"smaller-"+a,refInFor:!0,staticClass:"small-space-wrapper",style:"width: "+t.width+"%;"+(0!==a?"padding-left: 1px;":"")},[r("div",{staticClass:"used-space-wrapper",style:"height: "+(100-t.usedHeight)+"%;background-color: "+t.color+";"},[r("div",{staticClass:"used-space",on:{mousemove:function(r){return e.mousemove("small_unused_space",r,t,a)},mouseleave:e.mouseleave}})]),r("div",{staticClass:"smaller-space",style:"height: "+t.usedHeight+"%;background-color: "+t.color+";",on:{mousemove:function(r){return e.mousemove("small_used_space",r,t,a)},mouseleave:e.mouseleave}})])})),0),r("div",{staticClass:"larger-space-wrapper",style:"height: "+e.largerHeight+"%;"},[r("div",{staticClass:"used-space-wrapper",style:"height: "+(100-e.largerUsedHeight)+"%;background-color: "+e.largerColor+";"},[r("div",{staticClass:"used-space",on:{mousemove:function(t){return e.mousemove("large_unused_space",t)},mouseleave:e.mouseleave}})]),r("div",{staticClass:"larger-space",style:"height: "+e.largerUsedHeight+"%;background-color: "+e.largerColor+";",on:{mousemove:function(t){return e.mousemove("large_used_space",t)},mouseleave:e.mouseleave}})])],1)},Ny=[];function Ry(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Ly(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ry(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ry(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Fy={mounted:function(){this.chartip=this.$refs.chartip},methods:Ly({getOffsetX:function(e){for(var t=0,r=e-1;r>=0;r--){var a=this.$refs["smaller-".concat(r)];if(a&&a[0]){var n=parseInt(window.getComputedStyle(a[0]).width,10);t+=n}}return t}},w("mousemove",(function(e,t,r,a){var n=this.height,i=this.largerHeight/100,o=this.largerUsedHeight/100,s=t.offsetX,c=t.offsetY,l=this.sortedSpaceBefore,u=l.larger,d=l.smaller,p=this.spaceMap;switch(e){case"large_used_space":c+=n*(1-i)+n*i*(1-o),this.selectedSpace="used_".concat(u.name);var f=p[u.name].space_used_size;this.selectedSpaceSize=D(f);break;case"large_unused_space":c+=n*(1-i),this.selectedSpace="unused_".concat(u.name);var h=p[u.name],v=h.space_size,b=h.space_used_size;this.selectedSpaceSize=D(v-b);break;case"small_used_space":var g=r.usedHeight/100;s+=this.getOffsetX(a),c+=n*(1-i)*(1-g),this.selectedSpace="used_".concat(d[a].name);var y=p[d[a].name].space_used_size;this.selectedSpaceSize=D(y);break;case"small_unused_space":s+=this.getOffsetX(a),this.selectedSpace="unused_".concat(d[a].name);var m=p[d[a].name],O=m.space_size,w=m.space_used_size;this.selectedSpaceSize=D(O-w);break;default:break}var _={offsetX:s,offsetY:c};this.chartip.show(_,0,n,0)})),{},w("mouseleave",(function(){this.selectedSpace=void 0,this.selectedSpaceSize=void 0,this.chartip.hidden()}))),computed:{spaceMap:function(){var e={},t=!0,r=!1,a=void 0;try{for(var n,i=this.data[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var o=n.value,s=o.name,c=o.space_size,l=o.space_used_size;e[s]={space_size:c,space_used_size:l}}}catch(u){r=!0,a=u}finally{try{t||null==i.return||i.return()}finally{if(r)throw a}}return e},sortedSpaceBefore:function(){var e=[],t=!0,r=!1,a=void 0;try{for(var n,i=this.before[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var o=n.value,s=o.name,c=o.space_size,l=o.space_used_size;e.push({name:s,space_size:c,space_used_size:l})}}catch(u){r=!0,a=u}finally{try{t||null==i.return||i.return()}finally{if(r)throw a}}return e.sort((function(e,t){return e.space_size<t.space_size?1:-1})),{larger:e.shift(),smaller:e}},smallers:function(){var e=this,t=this.spaceMap,r=this.sortedSpaceBefore.smaller,a=0,n=!0,i=!1,o=void 0;try{for(var s,c=r[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){var l=s.value.name;a+=t[l].space_size}}catch(p){i=!0,o=p}finally{try{n||null==c.return||c.return()}finally{if(i)throw o}}var u=15,d=r.map((function(r){var n=r.name,i=t[n],o=i.space_size,s=i.space_used_size,c=o/a*100;return{width:c<u&&0!==c?u:c,usedHeight:0===o?0:s/o*100,color:e.colors[n]}}));return d},largerHeight:function(){var e=this.spaceMap,t=this.sortedSpaceBefore,r=t.larger.name,a=t.smaller,n=0,i=!0,o=!1,s=void 0;try{for(var c,l=a[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){var u=c.value.name;n+=e[u].space_size}}catch(f){o=!0,s=f}finally{try{i||null==l.return||l.return()}finally{if(o)throw s}}var d=e[r].space_size,p=d/(d+n)*100;return p=p>80?80:p,p},largerUsedHeight:function(){var e=this.sortedSpaceBefore.larger.name,t=this.spaceMap[e],r=t.space_size,a=t.space_used_size;return a/r*100},largerColor:function(){var e=this.sortedSpaceBefore.larger.name;return this.colors[e]}}};function $y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function zy(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$y(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var By=zy({props:{data:Array,before:Array,height:Number},data:function(){return{colors:{old_space:"#f4d03f",new_space:"#30bfd9",map_space:"#646faa",large_object_space:"#8995d9",code_space:"#d4668c",read_only_space:"#2e86c1",new_large_object_space:"#9b59b6",code_large_object_space:"#2ecc71"},selectedSpace:void 0,selectedSpaceSize:void 0}}},Fy),Uy=By,Gy=(r("6067"),Object(u["a"])(Uy,Iy,Ny,!1,null,"696eef18",null)),Hy=Gy.exports;function Wy(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Xy(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wy(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wy(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var qy=Xy({props:{selectGc:Number},components:{"x-space-status":Hy},data:function(){return{gcTime:1,showSpaceStatus:"before",spacesWidth:0}}},Ey),Ky=qy,Yy=(r("64e7"),Object(u["a"])(Ky,ky,Dy,!1,null,"1ac11cef",null)),Vy=Yy.exports;function Qy(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Zy(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qy(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qy(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Jy=Zy({components:{"x-trace-panel":Vy},data:function(){return{selectGc:1}}},Py),em=Jy,tm=(r("08ee"),Object(u["a"])(em,my,Oy,!1,null,"50410e58",null)),rm=tm.exports;function am(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function nm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?am(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):am(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var im=nm({components:{"x-overview":Ev,"x-trace-statistics":yy,"x-trace-detail":rm}},iy),om=im,sm=(r("d215"),Object(u["a"])(om,Wg,Xg,!1,null,"1eb938e5",null)),cm=sm.exports,lm=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("x-dashboard-title",{attrs:{appName:"进程数据趋势",dashboardTitle:e.trendData.fileBasename,line:""}}),r("div",{staticClass:"trend-content"},[r("div",{staticClass:"trend-loading"},[r("x-loading",{attrs:{loading:e.file_loading,top:"calc(40vh - 50px)",type:"dot",size:"large"}})],1),r("x-error-message",{directives:[{name:"show",rawName:"v-show",value:e.file_load_error,expression:"file_load_error"}],attrs:{message:e.file_load_error,top:"calc(40vh - 57px)"}}),r("transition",{attrs:{name:"slide-noward"}},[e.file_loading||e.file_load_error?e._e():r("div",[r("x-trend",{attrs:{trendMap:e.file_data,"disable-panel":""}})],1)])],1)],1)},um=[];function dm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function pm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dm(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dm(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var fm=m("dashboard/file/wrapper"),hm=fm.mapState,vm=m("dashboard/analytics"),bm=vm.mapState,gm=vm.mapActions,ym={created:function(){this.cancelToken=C(),this.downloadFile({cancelToken:this.cancelToken.token,fileId:this.trendData.fileId,fileType:this.trendData.fileType})},methods:pm({},gm(["downloadFile"])),computed:pm({},hm(["trendData"]),{},bm(["file_loading","file_load_error","file_data"]))};function mm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Om(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mm(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mm(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var wm=Om({components:{"x-trend":cs}},ym),_m=wm,jm=(r("a4342"),Object(u["a"])(_m,lm,um,!1,null,null,null)),xm=jm.exports,Pm=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("x-dashboard-title",{attrs:{appName:"CPU 火焰图",dashboardTitle:e.flamegraphData.fileBasename,line:""}}),r("div",{staticClass:"flamegraph-content"},[r("div",{staticClass:"flamegraph-loading"},[r("x-loading",{attrs:{loading:e.file_loading,top:"calc(40vh - 50px)",type:"dot",size:"large"}})],1),r("x-error-message",{directives:[{name:"show",rawName:"v-show",value:e.file_load_error,expression:"file_load_error"}],attrs:{message:e.file_load_error,top:"calc(40vh - 57px)"}}),r("transition",{attrs:{name:"slide-noward"}},[e.file_loading||e.file_load_error?e._e():r("div",{staticClass:"flamegraph-detail"},[r("x-flamegraph",{attrs:{flamegraphData:e.customData.flamegraph}})],1)])],1)],1)},km=[],Dm=r("d4ec"),Sm=r("bee2"),Tm=function(){function e(t,r,a){Object(Dm["a"])(this,e),this._profile=t,this._limit=r,this._filter=a,this._paths=[],this._time=0,this._each=0,this._last=[],this._tmp={},this._nodes={},this._top=[],this._bail=[]}return Object(Sm["a"])(e,[{key:"_flow",value:function(e){var t,r,a,n=this._last.length-1,i=e.length-1;for(t=0;t<=n;t++){if(t>i)break;if(this._last[t].func!==e[t].func)break}for(r=t,t=n;t>=r;t--)a=this._last[t].func+";"+t,this._nodes[a+";"+this._time]={func:this._last[t].func,funcName:this._last[t].funcName,bailoutReason:this._last[t].bailoutReason,url:this._last[t].url,parent:this._last[t].parent,depth:t,etime:this._time,stime:this._tmp[a].stime},this._last[t].stime=this._tmp[a].stime,this._last[t].etime=this._time,this._tmp[a]=null;for(t=r;t<=i;t++)a=e[t].func+";"+t,this._tmp[a]={stime:this._time}}},{key:"_processPath",value:function(e){this._flow(e.frames),this._time+=e.hitCount,this._last=e.frames}},{key:"_explorePaths",value:function(t,r){var a=0===r.length&&{funcName:"-",mock:!0}||r[r.length-1];r.push(e.funcName(t,a)),this._paths.push({frames:r.slice(),hitCount:t.hitCount});for(var n=0;n<t.children.length;n++)this._explorePaths(t.children[n],r);r.pop()}},{key:"_processPaths",value:function(){e.sort(this._paths);for(var t=0;t<this._paths.length;t++)this._processPath(this._paths[t]);this._flow([])}},{key:"_sampleInterval",value:function(){var e=this._profile.startTime,t=this._profile.endTime;this._each=(t-e)/this._time*1e3}},{key:"_getResults",value:function(){var e=this,t=this._nodes,r=this._each,a=Object.keys(t).filter((function(r){return!e._filter||e._filter(t[r].url,t[r].funcName)}));Object.keys(t).forEach((function(e){var a=(t[e].etime-t[e].stime)*r;if(t[e].execTime=a,t[e].parent.mock)t[e].percentage="-";else{var n=(t[e].parent.etime-t[e].parent.stime)*r;t[e].percentage=n&&"".concat((a/n*100).toFixed(2),"%")||"100%"}t[e].parent=t[e].parent.funcName})),this._top=a.map((function(e){return t[e]})).sort((function(e,t){return Number(e.execTime)<Number(t.execTime)||Number(e.execTime)===Number(t.execTime)&&Number(e.depth)>Number(t.depth)?1:-1})).filter((function(t,r){return r<Number(e._limit.top)})),this._bail=a.map((function(e){return t[e]})).filter((function(e){return e.bailoutReason&&"no reason"!==e.bailoutReason}))}},{key:"process",value:function(){return this._explorePaths(this._profile.head,[]),this._processPaths(),this._sampleInterval(),this._getResults(),{nodes:this._nodes,time:this._time,each:this._each,top:this._top,bail:this._bail}}}],[{key:"funcName",value:function(e,t){var r=e.functionName||"anonymous";return e.url&&(r+=" "+e.url+":"+e.lineNumber),{func:r,funcName:e.functionName||"anonymous",bailoutReason:e.bailoutReason,parent:t,url:e.url&&"(".concat(e.url," ").concat(e.lineNumber,")")||"(".concat(e.lineNumber,")")}}},{key:"byFramesLexically",value:function(e,t){var r=0,a=e.frames.map((function(e){return e.func})),n=t.frames.map((function(e){return e.func}));while(1){if(!a[r])return-1;if(!n[r])return 1;if(a[r]<n[r])return-1;if(n[r]<a[r])return 1;r++}}},{key:"sort",value:function(t){return t.sort(e.byFramesLexically)}}]),e}(),Cm={fonttype:"Verdana",fontsize:12,imagewidth:"100%",frameheight:16,fontwidth:.59,minwidth:.1,countname:"samples",colors:"hot",bgcolor1:"#eeeeee",bgcolor2:"#eeeeb0",timemax:1/0,factor:1,hash:!0,titletext:"Flame Graph",nametype:"Function:",palette:!1,palette_map:{},pal_file:"palette.map",removenarrows:!0,profile:{shortStack:!0,unresolveds:!1,v8internals:!1,v8gc:!0,sysinternals:!1}};function Am(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=arguments.length>2?arguments[2]:void 0,a=new Tm(e,t,r),n=a.process(),i=Cm;return{top:n.top,bail:n.bail,flamegraph:{fconfig:i,parsed:{nodes:n.nodes,time:n.time,each:n.each}}}}function Mm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Em(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mm(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mm(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Im=m("dashboard/file/wrapper"),Nm=Im.mapState,Rm=m("dashboard/analytics"),Lm=Rm.mapState,Fm=Rm.mapActions,$m={created:function(){this.cancelToken=C(),this.downloadFile({cancelToken:this.cancelToken.token,fileId:this.flamegraphData.fileId,fileType:this.flamegraphData.fileType})},beforeDestroy:function(){A(this.cancelToken)},methods:Em({},Fm(["downloadFile"])),computed:Em({},Nm(["flamegraphData"]),{},Lm(["file_loading","file_load_error","file_data"]),{customData:function(){return Am(this.file_data)}})},zm=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("svg",{ref:"svg",staticClass:"flamegraph-view",attrs:{version:"1.1",id:"flamegraph-svg","data-width":"100%",width:"100%",height:e.data.imageheight,"data-height":e.data.imageheight}},[r("defs",[r("linearGradient",{attrs:{id:"background",y1:"0",y2:"1",x1:"0",x2:"0"}},[r("stop",{attrs:{"stop-color":e.data.bgcolor1,offset:"5%"}}),r("stop",{attrs:{"stop-color":e.data.bgcolor2,offset:"95%"}})],1)],1),r("rect",{attrs:{x:"0.0",y:"0",id:"svg-background",width:"100%",height:e.data.imageheight,fill:"url(#background)"}}),r("text",{attrs:{"text-anchor":"left",x:e.data.xpad,y:e.data.detailsY,"font-size":e.data.fontsize,"font-family":e.data.fonttype,fill:"rgb(0,0,0)",id:"details"}},[e._v(e._s(e.show))]),r("text",{ref:"unzoom",staticStyle:{opacity:"0.0",cursor:"pointer"},attrs:{"text-anchor":"",x:e.data.xpad,y:"21","font-size":e.data.fontsize,"font-family":e.data.fonttype,fill:"rgb(0,0,0)"},on:{click:function(t){return t.stopPropagation(),e.unzoom()}}},[e._v("Reset Zoom")]),r("text",{ref:"search",staticStyle:{opacity:"0.2",cursor:"pointer"},attrs:{"text-anchor":"",x:e.data.xpad2,y:"21","font-size":e.data.fontsize,"font-family":e.data.fonttype,fill:"rgb(0,0,0)"},on:{mouseover:function(t){return e.searchover()},mouseout:function(t){return e.searchout()},click:function(t){return t.stopPropagation(),e.search_prompt()}}},[e._v("Search")]),r("text",{ref:"matched",attrs:{"text-anchor":"",x:e.data.xpad2,y:e.data.detailsY,"font-size":e.data.fontsize,"font-family":e.data.fonttype,fill:"rgb(0,0,0)"}},[e._v(e._s(e.matchedtxt))]),e._l(e.nodes,(function(t,a){return r("g",{key:a,staticClass:"func_g",attrs:{"node-index":t.index,"data-search":t.search,"data-funcname":t.func},on:{mouseover:function(r){return e.s(t.name+" "+t.samples)},mouseout:function(t){return e.c()},click:function(t){return t.stopPropagation(),e.zoom(t)}}},[r("title",[e._v(e._s(t.name)+" "+e._s(t.samples))]),r("rect",{attrs:{"node-index":t.index,x:t.rect_x,"data-x":t.rect_x,y:t.rect_y,width:t.rect_w,"data-width":t.rect_w,height:t.rect_h,"data-height":t.rect_h,fill:t.rect_fill,rx:"2",ry:"2"}}),r("text",{attrs:{"data-x":t.text_x,x:t.text_x,y:t.text_y,"font-size":e.data.fontsize,"font-family":e.data.fonttype,fill:"rgb(0,0,0)"}},[e._v(e._s(t.text))])])}))],2)},Bm=[],Um=(r("cb29"),r("4d63"),r("25f0"),r("466d"),r("841c"),r("1913"),0);function Gm(e,t,r){for(var a=e.childNodes,n=0;n<a.length;n++)if(a[n].tagName==t)return void 0!=r?a[n].attributes[r].value:a[n]}function Hm(e,t){void 0!=e.attributes["_orig_"+t]&&(e.attributes[t].value=e.attributes["_orig_"+t].value,e.removeAttribute("_orig_"+t))}function Wm(e,t,r){void 0==e.attributes["_orig_"+t]&&void 0!=e.attributes[t]&&(void 0==r&&(r=e.attributes[t].value),e.setAttribute("_orig_"+t,r))}function Xm(e){var t=Gm(e,"title").firstChild.nodeValue;return t}function qm(e){var t=Xm(e);return null!=t&&(t=t.replace(/ .*/,"")),t}function Km(e,t,r){if(void 0!=e.attributes&&(void 0!=e.attributes["x"]&&(Wm(e,"x"),e.attributes["x"].value=(parseFloat(e.attributes["x"].value)-t-10)*r+10,"text"==e.tagName&&(e.attributes["x"].value=Gm(e.parentNode,"rect","x")+3)),void 0!=e.attributes["width"])){Wm(e,"width");var a=e.attributes["width"].value;e.attributes["width"].value=parseFloat(a)*r}if(void 0!=e.childNodes)for(var n=0,i=e.childNodes;n<i.length;n++)Km(i[n],t-10,r)}function Ym(e,t){if(e.attributes&&(void 0!=e.attributes["x"]&&(Wm(e,"x"),e.attributes["x"].value=10),void 0!=e.attributes["width"]&&(Wm(e,"width"),e.attributes["width"].value=parseFloat(t.width.baseVal.value)-20)),void 0!=e.childNodes)for(var r=0,a=e.childNodes;r<a.length;r++)Ym(a[r],t)}function Vm(e){var t=Gm(e,"rect"),r=Gm(e,"text"),a=parseFloat(t.attributes["width"].value)-3,n=Gm(e,"title").textContent.split(" (")[0];if(r.attributes["x"].value=parseFloat(t.attributes["x"].value)+3,a<14.16)r.textContent="";else if(r.textContent=n,!(/^ *$/.test(n)||r.getSubStringLength(0,n.length)<a)){for(var i=n.length-2;i>0;i--)if(r.getSubStringLength(0,i+2)<=a)return void(r.textContent=n.substring(0,i)+"..");r.textContent=""}}function Qm(e){if(void 0!=e.attributes&&(Hm(e,"x"),Hm(e,"width")),void 0!=e.childNodes)for(var t=0,r=e.childNodes;t<r.length;t++)Qm(r[t])}function Zm(e,t,r){for(var a=new RegExp(e),n=document.getElementsByTagName("g"),i=new Object,o=0,s=0;s<n.length;s++){var c=n[s];if("func_g"==c.attributes["class"].value){var l=qm(c),u=Gm(c,"rect");if(null==u){var d=Gm(c,"a");d&&(u=Gm(d,"rect"))}if(null!=l&&null!=u){var p=parseFloat(u.attributes["width"].value);if(p>o&&(o=p),l.match(a)){var f=parseFloat(u.attributes["x"].value);Wm(u,"fill"),u.attributes["fill"].value="rgb(230,0,230)",void 0==i[f]?i[f]=p:p>i[f]&&(i[f]=p),Um=1}}}}if(!Um)return t.style["opacity"]="1.0",void(t.firstChild.nodeValue="Matched: none");r.style["opacity"]="1.0",r.firstChild.nodeValue="Reset Search";var h=0,v=-1,b=0,g=Array();for(var y in i)i.hasOwnProperty(y)&&g.push(y);for(var m in g.sort((function(e,t){return e-t})),g){var O=parseFloat(g[m]),w=i[g[m]];O>=v+b&&(h+=w,v=O,b=w)}t.style["opacity"]="1.0";var _=100*h/o;_=100==_?"100":_.toFixed(1),t.firstChild.nodeValue="Matched: "+_+"%"}function Jm(){for(var e=document.getElementsByTagName("rect"),t=0;t<e.length;t++)Hm(e[t],"fill")}var eO=function(){function e(e){return e.split("").reverse().join("")}function t(e){var t,r=0,a=1,n=1,i=10;e=e.replace(/.(.*?)`/,"");for(var o=e.split(""),s=0;s<o.length;s++)if(t=o[s].charCodeAt(0)%i,r+=t/(i++-1)*a,n+=a,a*=.7,i>12)break;return 1-r/n}function r(r,a,n){var i,o,s,c,l,u;if(!r)return"rgb(0, 0, 0)";switch(a?(i=t(n),o=s=t(e(n))):(i=Math.random()+1,o=Math.random()+1,s=Math.random()+1),r){case"hot":return c=205+Math.round(50*s),l=0+Math.round(230*i),u=0+Math.round(55*o),"rgb(".concat(c,", ").concat(l,", ").concat(u,")");case"mem":return c=0,l=190+Math.round(50*o),u=0+Math.round(210*i),"rgb(".concat(c,", ").concat(l,", ").concat(u,")");case"io":return c=80+Math.round(60*i),l=c,u=190+Math.round(55*o),"rgb(".concat(c,", ").concat(l,", ").concat(u,")");default:throw new Error("Unknown type "+r)}}function a(e,t,a,n){return Object.prototype.hasOwnProperty.call(e,n)?e[n]:(e[n]=r(t,a,n),e[n])}return a}(),tO=function(){function e(e){return Math.round(10*e)/10}function t(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function r(r,a){var n=r.each,i=r.time,o=a.timemax,s=4*a.fontsize,c=2*a.fontsize+10,l=10,u=.92*a.imagewidth,d=.92*a.imagewidth,p=0,f=a.frameheight,h={};o<i&&o/i>.02&&(console.error("Specified timemax %d is less than actual total %d, so it will be ignored",o,i),o=1/0),o=Math.min(i,o);var v=(a.imagewidth-2*l)/o,b=a.minwidth/v;function g(e){function t(e){var t=r.nodes[e];if("number"!==typeof t.stime)throw new Error("Missing start for "+e);t.etime-t.stime<b?t.narrow=!0:(t.narrow=!1,p=Math.max(t.depth,p))}Object.keys(e).forEach(t)}function y(r,i){var s=r.func,u=r.depth,d=r.etime,p=r.stime,b=a.factor,g=a.countname,y=!s.length&&0===u;y&&(d=o);var m,w,_,j,x,P=Math.round(10*(d-p*b))/10,k=P*n,D=P.toLocaleString();y?(j="all",x="(".concat(D," ").concat(g," ").concat(rO.formatTime(k),", 100%)")):(m=Math.round(100*P/(o*b)*10)/10,w=m.toLocaleString(),_=t(s),j=_,x="(".concat(D," ").concat(g," ").concat(rO.formatTime(k),"), ").concat(w,"%)"));var S,T=e(l+p*v),C=e(l+d*v),A=e(O-c-(u+1)*f+1),M=e(O-c-u*f),E=(C-T)/(a.fontsize*a.fontwidth),I=!1;E>=3&&(I=!0,S=s.slice(0,E),E<s.length&&(S=S.slice(0,E-2)+".."),S=t(S));var N=C-T,R=M-A;return{name:j,index:i,search:j.toLowerCase(),samples:x,rect_x:T,rect_y:A,rect_w:N,rect_h:R,rect_fill:eO(h,a.colors,a.hash,s),text:S,text_x:T+(I?3:0),text_y:3+(A+M)/2,narrow:r.narrow,func:t(s)}}function m(e){for(var t=Object.keys(e),r=new Array(t.length),a=0;a<t.length;a++)r[a]=y(e[t[a]],a);return r}g(r.nodes);var O=p*f+s+c,w=Object.assign({},a,{imageheight:O,xpad:l,xpad2:u,xpad3:d,titleX:a.imagewidth/2,detailsY:O-f/2,viewbox:"0 0 ".concat(a.imagewidth," ").concat(O)});return w.nodes=m(r.nodes),w}return r}(),rO=function(){function e(e){e=!isNaN(e)&&e||0;var t="";return t=e<1e3?"".concat(e.toFixed(2)," ms"):e<6e4?"".concat((e/1e3).toFixed(2)," s"):e<36e5?"".concat((e/6e4).toFixed(2)," min"):e<216e6?"".concat((e/36e5).toFixed(2)," h"):"".concat(e.toFixed(2)," ms"),t}return{formatTime:e}}();function aO(e,t){function r(e){e.class=e.narrow?"hidden":""}function a(e){return!e.narrow}t.removenarrows?e.nodes=e.nodes.filter(a):e.nodes.forEach(r)}var nO={mounted:function(){this.setContext(),window.addEventListener("resize",this.setContext.bind(this))},methods:{setContext:function(){var e=this.$refs.svg.clientWidth;this.flamegraphData.fconfig.imagewidth=e,this.flamegraphData.fconfig.timemax=1/0;var t=tO(this.flamegraphData.parsed,this.flamegraphData.fconfig);aO(t,this.flamegraphData.fconfig),this.data=t},s:function(e){this.show="Function: "+e},c:function(){this.show="X-Profiler"},zoom:function(e){var t=e.currentTarget,r=t.attributes["node-index"].value;this.need_unzoom[r]&&this.unzoom();var a=document.getElementsByTagName("svg")[0],n=Gm(t,"rect").attributes,i=parseFloat(n["width"].value),o=parseFloat(n["x"].value),s=parseFloat(o+i),c=parseFloat(n["y"].value),l=(a.width.baseVal.value-20)/parseFloat(n["width"].value),u=1e-4,d=this.$refs.unzoom;d.style["opacity"]="1.0";for(var p,f=document.getElementsByTagName("g"),h=0;h<f.length;h++){var v=f[h],b=Gm(v,"rect").attributes,g=parseFloat(b["x"].value),y=parseFloat(b["width"].value);p=parseFloat(b["y"].value)>c,p?g<=o&&g+y+u>=s?(v.style["opacity"]="0.5",Ym(v,a),this.need_unzoom[v.attributes["node-index"].value]=!0,Vm(v)):v.style["display"]="none":g<o||g+u>=s?v.style["display"]="none":(Km(v,o,l),this.need_unzoom[v.attributes["node-index"].value]=!1,Vm(v))}},unzoom:function(){var e=this.$refs.unzoom;e.style["opacity"]="0.0";for(var t=document.getElementsByTagName("g"),r=0;r<t.length;r++)t[r].style["display"]="block",t[r].style["opacity"]="1",Qm(t[r]),Vm(t[r])},searchover:function(){this.$refs.search.style["opacity"]="1.0"},searchout:function(){var e=this.$refs.search;e.style["opacity"]=Um?"1.0":"0.1"},search_prompt:function(){var e=this.$refs.search,t=this.$refs.matched;if(Um)Jm(),Um=0,e.style["opacity"]="0.1",e.firstChild.nodeValue="Search",t.style["opacity"]="0.0",t.firstChild.nodeValue="";else{var r=prompt("请输入需要查询的函数名: (允许输入正则表达式，例如: ^ext4_)","");null!=r&&Zm(r,t,e)}},set_parent_inf:function(){this.showBigPic?this.$emit("hidePic"):this.$emit("changPic")}},computed:{nodes:function(){return this.data.nodes||[]},enlarge:function(){return this.showBigPic?"ZoomOut":"ZoomIn"}},watch:{showBigPic:function(){this.setContext(),this.unzoom()}}};function iO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function oO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?iO(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iO(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var sO=oO({data:function(){return{data:{},matchedtxt:"",show:"Easy-Monitor",need_unzoom:{}}},props:{flamegraphData:Object,showBigPic:{type:Boolean,default:!1}}},nO),cO=sO,lO=(r("8d63"),Object(u["a"])(cO,zm,Bm,!1,null,"3300d301",null)),uO=lO.exports;function dO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function pO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dO(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dO(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var fO=pO({components:{"x-flamegraph":uO}},$m),hO=fO,vO=(r("ecf3"),Object(u["a"])(hO,Pm,km,!1,null,"18fe34fe",null)),bO=vO.exports,gO=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("x-dashboard-title",{attrs:{appName:"堆快照分析",dashboardTitle:e.snapshotData.fileBasename,line:""}}),r("div",{staticClass:"snapshot-content"},[r("div",{staticClass:"snapshot-loading"},[r("x-loading",{attrs:{loading:e.loading,top:"calc(40vh - 50px)",type:"dot",size:"large"}})],1),r("x-error-message",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}],attrs:{message:e.error,top:"calc(40vh - 57px)"}}),r("x-error-message",{directives:[{name:"show",rawName:"v-show",value:e.progress,expression:"progress"}],attrs:{message:e.progress,theme:e.theme,icon:!1,top:"calc(40vh - 57px)"}}),r("transition",{attrs:{name:"slide-noward"}},[e.loading||e.error||e.progress?e._e():r("div",{staticClass:"snapshot-detail"},[r("x-overview",{attrs:{data:e.overviewData}}),r("x-snapshot-tab",{staticClass:"snapshot-tab"}),r("x-snapshot-content",{attrs:{profile:e.profile}})],1)])],1)],1)},yO=[],mO=function(){function e(t,r,a){Object(Dm["a"])(this,e),this._file=t,this._fileSize=t.size,this._loadedSize=0,this._chunkSize=r,this._chunkTransferredCallback=a,this._decoder=new TextDecoder,this._isCanceled=!1,this._error=null}return Object(Sm["a"])(e,[{key:"read",value:function(e){var t=this;return this._chunkTransferredCallback&&this._chunkTransferredCallback(this),this._output=e,this._reader=new FileReader,this._reader.onload=this._onChunkLoaded.bind(this),this._reader.onerror=this._onError.bind(this),this._loadChunk(),new Promise((function(e){return t._transferFinished=e}))}},{key:"cancel",value:function(){this._isCanceled=!0}},{key:"loadedSize",value:function(){return this._loadedSize}},{key:"fileSize",value:function(){return this._fileSize}},{key:"fileName",value:function(){return this._file.name}},{key:"error",value:function(){return this._error}},{key:"_onChunkLoaded",value:function(e){if(!this._isCanceled&&e.target.readyState===FileReader.DONE){var t=this._reader.result;this._loadedSize+=t.byteLength;var r=this._loadedSize===this._fileSize,a=this._decoder.decode(t,{stream:!r});if(this._output.write(a),!this._isCanceled){if(this._chunkTransferredCallback&&this._chunkTransferredCallback(this),r)return this._file=null,this._reader=null,this._output.close(),void this._transferFinished(!this._error);this._loadChunk()}}}},{key:"_loadChunk",value:function(){var e=this._loadedSize,t=Math.min(this._fileSize,e+this._chunkSize),r=this._file.slice(e,t);this._reader.readAsArrayBuffer(r)}},{key:"_onError",value:function(e){this._error=e.target.error,this._transferFinished(!1)}}]),e}(),OO=(r("baa5"),r("ace4"),r("fb2c"),r("9a8c"),r("a975"),r("735e"),r("c1ac"),r("d139"),r("3a7b"),r("d5d6"),r("82f8"),r("e91f"),r("60bd"),r("5f96"),r("3280"),r("3fcc"),r("ca91"),r("25a1"),r("cd26"),r("3c5d"),r("2954"),r("649e"),r("219c"),r("170b"),r("b39a"),r("72f7"),function(){function e(t,r){Object(Dm["a"])(this,e),this._callback=t,this._index=0,this._balance=0,this._buffer="",this._findMultiple=r||!1,this._closingDoubleQuoteRegex=/[^\\](?:\\\\)*"/g}return Object(Sm["a"])(e,[{key:"write",value:function(e){this._buffer+=e;var t,r=this._buffer.length,a=this._buffer;for(t=this._index;t<r;++t){var n=a[t];if('"'===n){if(this._closingDoubleQuoteRegex.lastIndex=t,!this._closingDoubleQuoteRegex.test(a))break;t=this._closingDoubleQuoteRegex.lastIndex-1}else if("{"===n)++this._balance;else if("}"===n){if(--this._balance,this._balance<0)return this._reportBalanced(),!1;if(!this._balance&&(this._lastBalancedIndex=t+1,!this._findMultiple))break}else if("]"===n&&!this._balance)return this._reportBalanced(),!1}return this._index=t,this._reportBalanced(),!0}},{key:"_reportBalanced",value:function(){this._lastBalancedIndex&&(this._callback(this._buffer.slice(0,this._lastBalancedIndex)),this._buffer=this._buffer.slice(this._lastBalancedIndex),this._index-=this._lastBalancedIndex,this._lastBalancedIndex=0)}},{key:"remainder",value:function(){return this._buffer}}]),e}()),wO=(r("5377"),r("9911"),function(){function e(t){var r=t.inbounds,a=t.outbounds,n=t.count,i=t.root;Object(Dm["a"])(this,e),this.root=i,this.inbounds=r,this.outbounds=a;var o=this.length=n+1;this.dfs=new Array(o),this.vertex=new Array(o),this.semi=new Array(o),this.parent=new Array(o),this.bucket=new Array(o),this.dom=new Array(o),this.ancestor=new Array(o),this.label=new Array(o),this.size=new Array(o),this.child=new Array(o),this.idominator=new Array(o),this.dominators={};for(var s=0;s<o;s++)this.dfs[s]=0,this.vertex[s]=null,this.semi[s]=s,this.parent[s]=0,this.bucket[s]=[],this.ancestor[s]=0,this.label[s]=s,this.size[s]=1,this.child[s]=0,this.dom[s]=0;this.size[0]=0}return Object(Sm["a"])(e,[{key:"releaseMemory",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;return new Promise((function(t){return setTimeout(t,e)}))}},{key:"compute",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.enumerate();case 2:return e.next=4,this.build();case 4:return this.dfs=null,this.semi=null,this.parent=null,this.bucket=null,this.ancestor=null,this.label=null,this.size=null,this.child=null,this.inbounds=null,this.outbounds=null,e.next=16,this.releaseMemory(50);case 16:for(t=0;t<this.length;++t)this.idominator[t]=null;r=1;case 18:if(!(r<this.dom.length)){e.next=32;break}if(r%5e4!==0){e.next=22;break}return e.next=22,this.releaseMemory();case 22:if(0!==this.dom[r]){e.next=24;break}return e.abrupt("continue",29);case 24:a=this.vertex[this.dom[r]],n=this.vertex[r],i=this.dominators[a],Array.isArray(i)?i.push(n):this.dominators[a]=[n],this.idominator[n]=a;case 29:r++,e.next=18;break;case 32:return this.vertex=null,this.dom=null,e.next=36,this.releaseMemory(50);case 36:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"enumerate",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,i,o,s,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=[this.root,0],r=1,a=0;case 3:if(0===t.length){e.next=19;break}if(++a%1e4!==0){e.next=7;break}return e.next=7,this.releaseMemory();case 7:if(n=t.pop(),i=t.pop(),0===this.dfs[i]){e.next=11;break}return e.abrupt("continue",3);case 11:if(this.dfs[i]=r,this.parent[r]=n,this.vertex[r]=i,o=this.outbounds[i],Array.isArray(o))for(s=o.length-1;s>=0;s--)c=o[s],t.push(c,r);r++,e.next=3;break;case 19:return e.next=21,this.releaseMemory(50);case 21:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"build",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,i,o,s,c,l,u,d,p,f,h,v;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this.dfs,r=this.vertex,a=this.semi,n=this.bucket,i=this.parent,o=this.dom,s=t.length-1;case 7:if(!(s>=2)){e.next=20;break}if(s%1e4!==0){e.next=11;break}return e.next=11,this.releaseMemory();case 11:if(c=this.inbounds[r[s]],Array.isArray(c))for(l=0;l<c.length;l++)u=t[c[l]],d=this.evaluate(u),a[d]<a[s]&&(a[s]=a[d]);n[a[s]].push(s),this.link(i[s],s),p=n[i[s]];while(0!==p.length)f=p.pop(),h=this.evaluate(f),a[h]<a[f]?o[f]=h:o[f]=i[s];case 17:s--,e.next=7;break;case 20:v=2;case 21:if(!(v<t.length)){e.next=29;break}if(v%5e4!==0){e.next=25;break}return e.next=25,this.releaseMemory();case 25:o[v]!==a[v]&&(o[v]=o[o[v]]);case 26:v++,e.next=21;break;case 29:o[1]=0;case 30:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"evaluate",value:function(e){var t=this.ancestor,r=this.label,a=this.semi;return 0===t[e]?r[e]:(this.compress(e),a[r[t[e]]]>=a[r[e]]?r[e]:r[t[e]])}},{key:"link",value:function(e,t){var r=this.semi,a=this.label,n=this.child,i=this.size,o=this.ancestor,s=t;while(r[a[t]]<r[a[n[s]]])i[s]+i[n[n[s]]]>=2*i[n[s]]?(o[n[s]]=s,n[s]=n[n[s]]):(i[n[s]]=i[s],o[s]=n[s],s=o[s]);if(a[s]=a[t],i[e]+=i[t],i[e]<2*i[t]){var c=s;s=n[e],n[e]=c}while(0!==s)o[s]=e,s=n[s]}},{key:"compress",value:function(e){var t=this.ancestor,r=this.semi,a=this.label;0!==t[t[e]]&&(this.compress(t[e]),r[a[t[e]]]<r[a[e]]&&(a[e]=a[t[e]]),t[e]=t[t[e]])}}]),e}()),_O=function(){function e(t){Object(Dm["a"])(this,e),this.parser=t,this.first_int=-1,this.second_int=-1,this.lazy_string_map={},this.lazy_sorted_edge_map={}}return Object(Sm["a"])(e,[{key:"getConsStringName",value:function(t){var r=this.parser,a=this.lazy_string_map,n=e.NodeTypes.KCONCATENATED_STRING,i=r.strings;if(a[t])return a[t];var o=new Array(128).fill(0);o[0]=t;var s=1,c="";while(s>0&&c.length<256){var l=o[--s];if(this.getTypeForInt(l)==n){for(var u=this.getEdges(l),d=this.getEdgeCount(l),p=-1,f=-1,h=0;h<d;h++){var v=u[h],b=r.edge_util.getTypeForInt(v,!0);if(b==r.EdgeUtil.EdgeTypes.KERNAL)if(-1!=this.first_int&&-1!=this.second_int){var g=r.edge_util.getNameOrIndexForInt(v,!0);g==this.first_int&&(p=r.edge_util.getTargetNode(v,!0)),g==this.second_int&&(f=r.edge_util.getTargetNode(v,!0))}else{var y=r.edge_util.getNameOrIndex(v,!0);"first"==y&&(p=r.edge_util.getTargetNode(v,!0),this.first_int=r.edge_util.getNameOrIndexForInt(v,!0)),"second"==y&&(f=r.edge_util.getTargetNode(v,!0),this.second_int=r.edge_util.getNameOrIndexForInt(v,!0))}}-1!=f&&(o[s++]=f),-1!=p&&(o[s++]=p)}else{var m=i[r.nodes[l*r.node_field_length+r.node_name_offset]];c+=m}}return a[t]=c,c}},{key:"checkOrdinalId",value:function(e){var t=this.parser;return e<t.node_count}},{key:"getNodeId",value:function(e){var t=this.parser,r=t.node_field_length;if(e%r!=0)throw new Error("node source id is wrong!");return e/r}},{key:"getAddress",value:function(e){var t=this.parser;return t.nodes[e*t.node_field_length+t.node_address_offset]}},{key:"getType",value:function(e){var t=this.parser,r=t.nodes[e*t.node_field_length+t.node_type_offset],a=t.node_types;return r>a.length-1?"undefined":a[r]}},{key:"getTypeForInt",value:function(e){var t=this.parser;return t.nodes[e*t.node_field_length+t.node_type_offset]}},{key:"getName",value:function(e){var t=this.parser;return t.strings[t.nodes[e*t.node_field_length+t.node_name_offset]]}},{key:"getNameForInt",value:function(e){var t=this.parser;return t.nodes[e*t.node_field_length+t.node_name_offset]}},{key:"getEdges",value:function(e){var t=this.parser,r=t.first_edge_indexes[e],a=0;a=e+1>=t.node_count?t.edges.length:t.first_edge_indexes[e+1];for(var n=new Array((a-r)/t.edge_field_length),i=r;i<a;i+=t.edge_field_length)n[(i-r)/t.edge_field_length]=i;return n}},{key:"getSortedEdges",value:function(e){var t=this.lazy_sorted_edge_map,r=this.parser,a=r.retained_sizes;if(t[e])return t[e];var n=this.getEdges(e);return n.sort((function(e,t){var n=r.edge_util.getTargetNode(e,!0),i=r.edge_util.getTargetNode(t,!0);return a[n]<a[i]?1:-1})),t[e]=n,n}},{key:"getEdgeCount",value:function(e){var t=this.parser;return t.nodes[e*t.node_field_length+t.node_edge_count_offset]}},{key:"getSelfSize",value:function(e){var t=this.parser;return t.nodes[e*t.node_field_length+t.node_self_size_offset]}}],[{key:"NodeTypes",get:function(){return{KHIDDEN:0,KARRAY:1,KSTRING:2,KOBJECT:3,KCODE:4,KCLOSURE:5,KREGEXP:6,KNUMBER:7,KNATIVE:8,KSYNTHETIC:9,KCONCATENATED_STRING:10,KSLICED_STRING:11}}}]),e}(),jO=function(){function e(t){Object(Dm["a"])(this,e),this.parser=t}return Object(Sm["a"])(e,[{key:"getTargetNode",value:function(e,t){var r=this.parser,a=r.edge_field_length;if(t&&e%a!=0)throw new Error("edge source id is wrong!");var n=t?e:e*a;if(n/a>=r.edge_count)throw new Error("edge id larger than edges.length!");var i=r.edges[n+r.edge_to_node_offset],o=r.node_field_length;if(i%o!=0)throw new Error("target node source id is wrong!");return i/o}},{key:"GetType",value:function(e,t){var r=this.parser,a=r.edge_field_length;if(t&&e%a!=0)throw new Error("edge source id is wrong!");var n=t?e:e*a;if(n/a>=r.edge_count)throw new Error("edge id larger than edges.length!");var i=r.edges[n+r.edge_type_offset],o=r.edge_types;return o[i]}},{key:"getTypeForInt",value:function(e,t){var r=this.parser,a=r.edge_field_length;if(t&&e%a!=0)throw new Error("edge source id is wrong!");var n=t?e:e*a;if(n/a>=r.edge_count)throw new Error("edge id larger than edges.length!");return r.edges[n+r.edge_type_offset]}},{key:"getNameOrIndexForInt",value:function(e,t){var r=this.parser,a=r.edge_field_length;if(t&&e%a!=0)throw new Error("edge source id is wrong!");var n=t?e:e*a;if(n/a>=r.edge_count)throw new Error("edge id larger than edges.length!");return r.edges[n+r.edge_name_or_index_offset]}},{key:"getNameOrIndex",value:function(t,r){var a=this.parser,n=a.edge_field_length;if(r&&t%n!=0)throw new Error("edge source id is wrong!");var i=r?t:t*n;if(i/n>=a.edge_count)throw new Error("edge id larger than edges.length!");var o=a.edges[i+a.edge_type_offset],s=a.edges[i+a.edge_name_or_index_offset];return o==e.EdgeTypes.KELEMENT?"["+s+"]":o==e.EdgeTypes.KHIDDEN?s:a.strings[s]}}],[{key:"EdgeTypes",get:function(){return{KCONTEXTVARIABLE:0,KELEMENT:1,KPROPERTY:2,KERNAL:3,KHIDDEN:4,KSHORTCUT:5,KWEAK:6}}}]),e}(),xO=function(){function e(t,r){Object(Dm["a"])(this,e),this._profile=t,this._progress=r,this.init(),this.node_util=new _O(this),this.edge_util=new jO(this),this.NodeUtil=_O,this.EdgeUtil=jO}return Object(Sm["a"])(e,[{key:"init",value:function(){this._progress.updateStatus("Initializing snapshot…");var e=this._profile,t=this.nodes=e["nodes"],r=this.edges=e["edges"],a=this.snapshot=e["snapshot"];this.strings=e["strings"],this.root_index=a["root_index"]||0;var n=a["meta"]["node_fields"],i=a["meta"]["edge_fields"],o=this.node_field_length=n.length,s=this.edge_field_length=i.length;this.node_count=t.length/o,this.edge_count=r.length/s,this.node_types=a["meta"]["node_types"][0],this.edge_types=a["meta"]["edge_types"][0],this.node_type_offset=n.indexOf("type"),this.node_name_offset=n.indexOf("name"),this.node_address_offset=n.indexOf("id"),this.node_self_size_offset=n.indexOf("self_size"),this.node_edge_count_offset=n.indexOf("edge_count"),this.node_trace_nodeid_offset=n.indexOf("trace_node_id"),this.edge_type_offset=i.indexOf("type"),this.edge_name_or_index_offset=i.indexOf("name_or_index"),this.edge_to_node_offset=i.indexOf("to_node"),this.edge_searching_map={},this.address_map={},this.ordered_retainers_map={},this.repeat_map={},this.page_object_flag=4,this.idominator=[],this.dominators={},this.gcroots=0,this.gcroots_map={},this.dominator_map={},this.leak_nodes=[],this.first_edge_indexes=this.getFirstEdgeIndexes(),this._profile=null}},{key:"createEdgeKey",value:function(e,t){return"".concat(e,"::").concat(t)}},{key:"getFirstEdgeIndexes",value:function(){var e=this.nodes,t=this.edges,r=this.root_index,a=this.node_count,n=this.node_field_length,i=this.node_edge_count_offset,o=this.edge_field_length,s=this.edge_to_node_offset,c=this.edge_searching_map,l=new Array(a+1);l[a]=t.length;for(var u=0,d=0;u<a;u++){l[u]=d;var p=e[u*n+i]*o;if(u===r)for(var f=d;f<d+p;f+=o){var h=t[f+s];if(h%n==0){var v=this.createEdgeKey(u,h/n);c[v]=f}}d+=p}return l}},{key:"build",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.time("--------- build ---------"),e.next=3,this.createAddressMap();case 3:return e.next=5,this.buildTotalRetainer();case 5:return e.next=7,this.buildDistances();case 7:return e.next=9,this.calculateFlags();case 9:return e.next=11,this.buildPostOrderIndex();case 11:return e.next=13,this.buildDominatorTree();case 13:return e.next=15,this.calculateRetainedSizes();case 15:return e.next=17,this.getSuspectedLeakNodes();case 17:console.timeEnd("--------- build ---------");case 18:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"createAddressMap",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this._progress.updateStatus("Create address map…"),t=this.node_count,r=this.node_util,a=this.address_map,n=0;case 5:if(!(n<t)){e.next=13;break}if(r.checkOrdinalId(n)){e.next=8;break}return e.abrupt("continue",10);case 8:i=r.getAddress(n),a[i]=n;case 10:n++,e.next=5;break;case 13:return e.next=15,this.releaseMemory();case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"searchOrdinalByAddress",value:function(e){var t=this.address_map,r=t[e];return r}},{key:"isEssentialEdge",value:function(e,t){return t!==jO.EdgeTypes.KWEAK&&(t!==jO.EdgeTypes.KSHORTCUT||e==this.root_index)}},{key:"hasOnlyWeakRetainers",value:function(e){for(var t=this.first_retainer_index,r=this.retaining_edges,a=this.edge_util,n=jO.EdgeTypes,i=n.KWEAK,o=n.KSHORTCUT,s=t[e],c=t[e+1],l=s;l<c;++l){var u=r[l],d=a.getTypeForInt(u,!0);if(d!==i&&d!==o)return!1}return!0}},{key:"setBoundData",value:function(e,t,r){Array.isArray(e[t])?e[t].push(r):e[t]=[r]}},{key:"buildTotalRetainer",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,i,o,s,c,l,u,d,p,f,h,v,b,g,y,m,O,w,_,j,x;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this._progress.updateStatus("Building retainer…"),e.next=3,this.releaseMemory();case 3:t=this.edges,r=this.node_count,a=this.edge_count,n=this.node_field_length,i=this.edge_field_length,o=this.edge_to_node_offset,s=this.first_edge_indexes,c=this.retaining_nodes=new Array(a),l=this.retaining_edges=new Array(a),u=this.first_retainer_index=new Array(r+1).fill(0),d=o,p=t.length;case 14:if(!(d<p)){e.next=26;break}if(d%5e4!==0){e.next=18;break}return e.next=18,this.releaseMemory(5);case 18:if(f=t[d],f%n==0){e.next=21;break}throw new Error("node index id is wrong!");case 21:h=f/n,u[h]+=1;case 23:d+=i,e.next=14;break;case 26:v=0,b=0;case 27:if(!(v<r)){e.next=38;break}if(v%5e4!==0){e.next=31;break}return e.next=31,this.releaseMemory(5);case 31:g=u[v],u[v]=b,c[b]=g,b+=g;case 35:v++,e.next=27;break;case 38:u[r]=a,y=s[0],m=0;case 41:if(!(m<r)){e.next=62;break}if(m%5e4!==0){e.next=45;break}return e.next=45,this.releaseMemory(5);case 45:O=y,y=s[m+1],w=O;case 48:if(!(w<y)){e.next=59;break}if(_=t[w+o],_%n==0){e.next=52;break}throw new Error("to_node id is wrong!");case 52:j=u[_/n],x=j+--c[j],c[x]=m,l[x]=w;case 56:w+=i,e.next=48;break;case 59:m++,e.next=41;break;case 62:return e.next=64,this.releaseMemory();case 64:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"bfs",value:function(t,r){var a=this.node_count,n=this.node_distances,i=this.node_util,o=this.edge_util,s=jO.EdgeTypes.KWEAK,c=0;while(c<r){var l=t[c++];if(i.checkOrdinalId(l))for(var u=n[l]+1,d=i.getEdges(l),p=i.getEdgeCount(l),f=0;f<p;f++){var h=o.getTypeForInt(d[f],!0);if(h!==s){var v=o.getTargetNode(d[f],!0);n[v]==e.NO_DISTANCE&&(n[v]=u,t[r++]=v)}}}if(r>a){var b="BFS failed. Nodes to visit ("+r+") is more than nodes count ("+a+")";throw new Error(b)}}},{key:"forEachRoot",value:function(e,t,r){var a=this.root_index,n=this.node_util,i=this.edge_util,o=_O.NodeTypes.KSYNTHETIC,s=jO.EdgeTypes.KWEAK,c={},l=-1;if(n.checkOrdinalId(a)){for(var u=n.getEdges(a),d=n.getEdgeCount(a),p=0;p<d;p++){var f=i.getTargetNode(u[p],!0);if(n.checkOrdinalId(f)){var h=n.getName(f),v="(GC roots)";h===v&&(l=f)}}if(-1!=l&&n.checkOrdinalId(l))if(r)for(var b=0;b<d;b++){var g=i.getTargetNode(u[b],!0);if(n.checkOrdinalId(g)){var y=n.getTypeForInt(g);y!==o&&(c[g]||(t.ordinal=g,e(t),c[g]=!0))}}else{for(var m=n.getEdges(l),O=n.getEdgeCount(l),w=0;w<O;w++){var _=i.getTargetNode(m[w],!0);if(n.checkOrdinalId(_)){var j=n.getEdges(_),x=n.getEdgeCount(_),P=!0,k=n.getName(_);"(Internalized strings)"!==k&&"(External strings)"!==k&&"(Smi roots)"!==k||(P=!1);for(var D=0;D<x;D++){var S=i.getTargetNode(j[D],!0);if(c[S]||(t.ordinal=S,e(t),c[S]=!0),P){var T=i.getTypeForInt(j[D],!0);T!==s&&(this.gcroots++,this.gcroots_map[S]=!0)}}c[_]||(t.ordinal=_,e(t),c[_]=!0)}}for(var C=0;C<d;C++){var A=i.getTargetNode(u[C],!0);c[A]||(t.ordinal=A,e(t),c[A]=!0)}}}}},{key:"buildDistances",value:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){var r,a,n,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this._progress.updateStatus("Building distance…"),t.next=3,this.releaseMemory();case 3:for(r=this.node_count,a=this.node_distances=new Array(r),n=0;n<r;n++)a[n]=e.NO_DISTANCE;return i=new Array(r),o={distance:1,ordinal:0,node_to_visit:i,node_to_visit_length:0,node_distances:a},this.forEachRoot(e.enqueueNode,o,!0),this.bfs(i,o.node_to_visit_length),o.node_to_visit_length=0,o.distance=e.BASE_SYSTEMDISTANCE,this.forEachRoot(e.enqueueNode,o,!1),this.bfs(i,o.node_to_visit_length),t.next=16,this.releaseMemory();case 16:case"end":return t.stop()}}),t,this)})));function r(){return t.apply(this,arguments)}return r}()},{key:"calculateFlags",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,i,o,s,c,l,u,d,p,f,h,v,b,g,y,m,O,w,_,j,x,P,k,D;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this._progress.updateStatus("Calculating flags…"),e.next=3,this.releaseMemory();case 3:t=this.node_count,r=this.first_edge_indexes,a=this.root_index,n=this.edge_field_length,i=this.node_util,o=this.edge_util,s=this.page_object_flag,c=_O.NodeTypes.KSYNTHETIC,l=jO.EdgeTypes,u=l.KELEMENT,d=l.KSHORTCUT,p=l.KWEAK,f=this.flags=new Array(t).fill(0),h=new Array(t),v=0,b=r[a],g=r[a+1];case 16:if(!(b<g)){e.next=38;break}if(v%5e4!==0){e.next=20;break}return e.next=20,this.releaseMemory(5);case 20:if(y=o.getTargetNode(b,!0),i.checkOrdinalId(y)){e.next=23;break}return e.abrupt("continue",35);case 23:if(m=o.getTypeForInt(b,!0),m!==u){e.next=31;break}if(O=i.getTypeForInt(y),w=i.getName(y),O===c&&"(Document DOM trees)"===w){e.next=29;break}return e.abrupt("continue",35);case 29:e.next=33;break;case 31:if(m===d){e.next=33;break}return e.abrupt("continue",35);case 33:h[v++]=y,f[y]|=s;case 35:b+=n,e.next=16;break;case 38:if(!v){e.next=60;break}if(v%5e4!==0){e.next=42;break}return e.next=42,this.releaseMemory(5);case 42:_=h[--v],j=r[_],x=r[_+1],P=j;case 46:if(!(P<x)){e.next=58;break}if(k=o.getTargetNode(P,!0),!(f[k]&s)){e.next=50;break}return e.abrupt("continue",55);case 50:if(D=o.getTypeForInt(P,!0),D!==p){e.next=53;break}return e.abrupt("continue",55);case 53:h[v++]=k,f[k]|=s;case 55:P+=n,e.next=46;break;case 58:e.next=38;break;case 60:return e.next=62,this.releaseMemory();case 62:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"buildPostOrderIndex",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,i,o,s,c,l,u,d,p,f,h,v,b,g,y,m,O,w,_,j,x;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this._progress.updateStatus("Building post order index…"),e.next=3,this.releaseMemory();case 3:t=this.node_count,r=this.first_edge_indexes,a=this.root_index,n=this.edge_util,i=this.flags,o=this.page_object_flag,s=this.edge_field_length,c=new Array(t),l=new Array(t),u=this.post_order_index_to_ordinal=new Array(t),d=this.ordinal_to_post_order_index=new Array(t),p=new Array(t),f=0,h=0,c[0]=a,l[0]=r[a],p[a]=1,v=0;case 21:0,++v;case 23:if(!(h>=0)){e.next=50;break}if(b=c[h],g=l[h],y=r[b+1],!(g<y)){e.next=45;break}if(l[h]+=s,m=n.getTypeForInt(g,!0),this.isEssentialEdge(b,m)){e.next=32;break}return e.abrupt("continue",23);case 32:if(O=n.getTargetNode(g,!0),1!=p[O]){e.next=35;break}return e.abrupt("continue",23);case 35:if(w=i[b]&o,_=i[O]&o,b==a||0==_||0!=w){e.next=39;break}return e.abrupt("continue",23);case 39:++h,c[h]=O,l[h]=r[O],p[O]=1,e.next=48;break;case 45:d[b]=f,u[f++]=b,--h;case 48:e.next=23;break;case 50:if(!(f==t||v>1)){e.next=52;break}return e.abrupt("break",68);case 52:--f,h=0,c[0]=a,l[0]=r[a+1],j=0;case 57:if(!(j<t)){e.next=66;break}if(1!=p[j]&&this.hasOnlyWeakRetainers(j)){e.next=60;break}return e.abrupt("continue",63);case 60:c[++h]=j,l[h]=r[j],p[j]=1;case 63:++j,e.next=57;break;case 66:e.next=21;break;case 68:if(f==t){e.next=81;break}--f,x=0;case 71:if(!(x<t)){e.next=79;break}if(1!=p[x]){e.next=74;break}return e.abrupt("continue",76);case 74:d[x]=f,u[f++]=x;case 76:++x,e.next=71;break;case 79:d[a]=f,u[f++]=a;case 81:return this.ordinal_to_post_order_index=null,e.next=84,this.releaseMemory();case 84:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"buildDominatorTree",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,i,o,s,c,l,u,d,p,f,h,v,b,g;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this._progress.updateStatus("Building dominator tree…"),e.next=3,this.releaseMemory();case 3:t=this.node_count,r=this.first_edge_indexes,a=this.flags,n=this.page_object_flag,i=this.edge_field_length,o=this.edge_util,s=this.root_index,c={count:t,root:s,inbounds:{},outbounds:{}},l=0;case 12:if(!(l<t)){e.next=36;break}if(l%5e4!==0){e.next=16;break}return e.next=16,this.releaseMemory(5);case 16:u=r[l],d=r[l+1],p=a[l]&n,f=u;case 20:if(!(f<d)){e.next=33;break}if(h=o.getTypeForInt(f,!0),this.isEssentialEdge(l,h)){e.next=24;break}return e.abrupt("continue",30);case 24:if(v=o.getTargetNode(f,!0),b=a[v]&n,l==s||0==b||0!=p){e.next=28;break}return e.abrupt("continue",30);case 28:this.setBoundData(c.inbounds,v,l),this.setBoundData(c.outbounds,l,v);case 30:f+=i,e.next=20;break;case 33:++l,e.next=12;break;case 36:return g=new wO(c),e.next=39,this.releaseMemory();case 39:return e.next=41,g.compute();case 41:return e.next=43,this.clear();case 43:this.idominator=g.idominator,this.dominators=g.dominators;case 45:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"calculateRetainedSizes",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,i,o,s,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this._progress.updateStatus("Calculating retained sizes…"),e.next=3,this.releaseMemory();case 3:t=this.node_count,r=this.node_util,a=this.post_order_index_to_ordinal,n=this.retained_sizes=new Array(t).fill(0),i=0;case 8:if(!(i<t)){e.next=15;break}if(r.checkOrdinalId(i)){e.next=11;break}return e.abrupt("continue",12);case 11:n[i]=r.getSelfSize(i);case 12:++i,e.next=8;break;case 15:for(o=0;o<t-1;++o)s=a[o],c=this.idominator[s],null!=c&&(n[c]+=n[s]);return this.post_order_index_to_ordinal=null,e.next=19,this.releaseMemory();case 19:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"clear",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.flags=null,e.next=3,this.releaseMemory();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"releaseMemory",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return new Promise((function(t){return setTimeout(t,e)}))}},{key:"markEdge",value:function(e){var t=this.node_util,r=this.edge_util,a=this.edge_searching_map;if(t.checkOrdinalId(e)){var n=t.getEdges(e),i=!0,o=!1,s=void 0;try{for(var c,l=n[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){var u=c.value,d=r.getTargetNode(u,!0),p=this.createEdgeKey(e,d);a[p]||0===a[p]||(a[p]=u)}}catch(f){o=!0,s=f}finally{try{i||null==l.return||l.return()}finally{if(o)throw s}}}}},{key:"getSortedDominators",value:function(e){var t=this.dominator_map;if(t[e])return t[e];var r=this.dominators,a=this.retained_sizes,n=r[e]||[];n.sort((function(e,t){return a[e]<a[t]?1:-1})),t[e]=n;var i=!0,o=!1,s=void 0;try{for(var c,l=n[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){var u=c.value;this.markEdge(u)}}catch(d){o=!0,s=d}finally{try{i||null==l.return||l.return()}finally{if(o)throw s}}return n}},{key:"getEdgeByParentAndChild",value:function(e,t){var r=this.edge_searching_map,a=this.createEdgeKey(e,t),n=r[a];return n||0===n?n:-1}},{key:"getRetainers",value:function(e){var t=this.ordered_retainers_map,r=this.first_retainer_index,a=this.retaining_nodes,n=this.retaining_edges,i=this.node_distances;if(t[e])return t[e];for(var o=r[e],s=r[e+1],c=s-o,l=new Array(c),u=o;u<s;u++){var d={};d.ordinal=a[u],d.edge=n[u],d.distance=i[d.ordinal],l[u-o]=d}return l.sort((function(e,t){var r=i[e.ordinal],a=i[t.ordinal];return r>a?1:-1})),t[e]=l,l}},{key:"getDominatorsRepeat",value:function(e,t){var r=this.repeat_map,a=this.node_util,n=this.node_distances,i=this.retained_sizes,o=this.root_index,s=this.NodeUtil,c="".concat(e,"::").concat(t);if(r[c])return r[c];var l={count:0,size:0,percent:0},u=s.NodeTypes.KREGEXP,d=a.getNameForInt(t),p=a.getSelfSize(t),f=a.getTypeForInt(t),h=n[t],v=0,b=0,g=[],y=this.getSortedDominators(e),m=!0,O=!1,w=void 0;try{for(var _,j=y[Symbol.iterator]();!(m=(_=j.next()).done);m=!0){var x=_.value,P=a.getNameForInt(x),k=a.getSelfSize(x),D=a.getTypeForInt(x),S=n[x];k===p&&S===h&&(P===d||[u].includes(f)&&D===f)&&(v++,b+=i[x],g.push(x),r["".concat(e,"::").concat(x)]=l)}}catch(A){O=!0,w=A}finally{try{m||null==j.return||j.return()}finally{if(O)throw w}}var T=0,C=i[o];return C&&(T=Number((b/C*100).toFixed(2))),l.count=v,l.size=b,l.percent=T,l.doms=g,l}},{key:"getNativeTypeInfo",value:function(t){var r=this.root_index,a=this.node_util,n=this.dominators,i=this.node_distances,o=this.retained_sizes,s=n[r],c=0,l=0,u=[],d=!0,p=!1,f=void 0;try{for(var h,v=s[Symbol.iterator]();!(d=(h=v.next()).done);d=!0){var b=h.value,g=n[b]||[],y=!0,m=!1,O=void 0;try{for(var w,_=g[Symbol.iterator]();!(y=(w=_.next()).done);y=!0){var j=w.value,x=a.getTypeForInt(j),P=i[j];t.includes(x)&&P<e.BASE_SYSTEMDISTANCE&&(c++,l+=o[j],u.push(j))}}catch(k){m=!0,O=k}finally{try{y||null==_.return||_.return()}finally{if(m)throw O}}}}catch(k){p=!0,f=k}finally{try{d||null==v.return||v.return()}finally{if(p)throw f}}return u.sort((function(e,t){return o[e]<o[t]?1:-1})),{count:c,size:l,doms:u}}},{key:"formateDominator",value:function(e,t,r){var a=this.node_util,n=this.node_distances,i=this.retained_sizes,o=this.getSortedDominators(e),s=i[e],c=a.getSelfSize(e),l=s-c,u=0,d=!0,p=!1,f=void 0;try{for(var h,v=o[Symbol.iterator]();!(d=(h=v.next()).done);d=!0){var b=h.value,g=a.getName(b),y=n[b],m=a.getSelfSize(b),O="".concat(t,"::").concat(g,"::").concat(y,"::").concat(m);if(!r[O]&&!(u/l>.9)){var w=this.getDominatorsRepeat(e,b),_=w.count,j=w.size,x=w.doms;r[O]={name:g,count:_,size:j,distance:y,level:t,key:O,id:b,doms:x},u+=j}}}catch(P){p=!0,f=P}finally{try{d||null==v.return||v.return()}finally{if(p)throw f}}}},{key:"formatLeakNodes",value:function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=function(){var e=Object(O["a"])(i[n],2),a=e[1];if(r.some((function(e){return e.key===a.key})))return"continue";if(r.length<t)return r.push(a),r.sort((function(e,t){return e.size<t.size?1:-1})),"continue";var o=r.pop();if(a.size<=o.size)return r.push(o),"continue";r.push(a),r.sort((function(e,t){return e.size<t.size?1:-1}))},n=0,i=Object.entries(e);n<i.length;n++)a();return r}},{key:"getSuspectedLeakNodes",value:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){var r,a,n,i,o,s,c,l,u,d,p,f,h,v,b,g,y,m,O,w,_,j,x,P,k,D=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=D.length>0&&void 0!==D[0]?D[0]:5,this._progress.updateStatus("Calculating suspected leak points…"),t.next=4,this.releaseMemory();case 4:console.time("--------- leak ---------"),a=this.NodeUtil,n=this.root_index,i=this.retained_sizes,o=a.NodeTypes,s=o.KCODE,c=o.KSTRING,l=o.KSLICED_STRING,u=o.KCONCATENATED_STRING,d=this.getNativeTypeInfo([c,l,u]),p=d.count,f=d.size,h=d.doms,v=this.getNativeTypeInfo([s]),b=v.count,g=v.size,y=v.doms,m={string:{name:"string",key:"1::string",count:p,size:f,doms:h},code:{name:"code",key:"1::code",count:b,size:g,doms:y}},this.formateDominator(n,1,m),O=this.formatLeakNodes(m,r),w=!0,_=!1,j=void 0,t.prev=17,x=O[Symbol.iterator]();case 19:if(w=(P=x.next()).done){t.next=31;break}if(k=P.value,void 0!==k.distance){t.next=23;break}return t.abrupt("continue",28);case 23:if(!(k.distance>=e.BASE_SYSTEMDISTANCE)){t.next=25;break}return t.abrupt("continue",28);case 25:delete m[k.key],O.splice(O.indexOf(k),1),this.formateDominator(k.id,2,m);case 28:w=!0,t.next=19;break;case 31:t.next=37;break;case 33:t.prev=33,t.t0=t["catch"](17),_=!0,j=t.t0;case 37:t.prev=37,t.prev=38,w||null==x.return||x.return();case 40:if(t.prev=40,!_){t.next=43;break}throw j;case 43:return t.finish(40);case 44:return t.finish(37);case 45:return O=this.formatLeakNodes(m,r,O),console.timeEnd("--------- leak ---------"),this.leak_nodes=O.filter((function(e){return e.size/i[n]>.1})),t.next=50,this.releaseMemory();case 50:case"end":return t.stop()}}),t,this,[[17,33,37,45],[38,,40,44]])})));function r(){return t.apply(this,arguments)}return r}()}],[{key:"enqueueNode",value:function(t){t.node_distances[t.ordinal]==e.NO_DISTANCE&&(t.node_distances[t.ordinal]=t.distance,t.node_to_visit[t.node_to_visit_length]=t.ordinal,t.node_to_visit_length+=1)}},{key:"NO_DISTANCE",get:function(){return-5}},{key:"BASE_SYSTEMDISTANCE",get:function(){return 1e8}}]),e}(),PO=function(){function e(t,r){Object(Dm["a"])(this,e),this._reset(),this._progress=t,this._buffer="",this._dataCallback=null,this._done=!1,this._doneCallback=r,this._parseInput()}return Object(Sm["a"])(e,[{key:"dispose",value:function(){this._reset()}},{key:"_reset",value:function(){this._json="",this._snapshot={}}},{key:"close",value:function(){this._done=!0,this._dataCallback&&this._dataCallback("")}},{key:"buildSnapshot",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this._progress.updateStatus("Building dominator tree…"),t=new xO(this._snapshot,this._progress),e.next=4,t.build();case 4:return this._reset(),e.abrupt("return",{idominator:t.idominator,dominators:t.dominators,retainedSizes:t.retained_sizes,gcroots:t.gcroots,nodes:t.nodes.length,edges:t.edges.length,gcrootsMap:t.gcroots_map,rootIndex:t.root_index,leakNodes:t.leak_nodes,nodeUtils:t.node_util,edgeUtils:t.edge_util,NodeUtils:t.NodeUtil,EdgeUtils:t.EdgeUtil,getSortedDominators:t.getSortedDominators.bind(t),getEdgeByParentAndChild:t.getEdgeByParentAndChild.bind(t),searchOrdinalByAddress:t.searchOrdinalByAddress.bind(t),getRetainers:t.getRetainers.bind(t),getDominatorsRepeat:t.getDominatorsRepeat.bind(t),getSuspectedLeakNodes:t.getSuspectedLeakNodes.bind(t)});case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"_parseUintArray",value:function(){var e=0,t="0".charCodeAt(0),r="9".charCodeAt(0),a="]".charCodeAt(0),n=this._json.length;while(1){while(e<n){var i=this._json.charCodeAt(e);if(t<=i&&i<=r)break;if(i===a)return this._json=this._json.slice(e+1),!1;++e}if(e===n)return this._json="",!0;var o=0,s=e;while(e<n){var c=this._json.charCodeAt(e);if(t>c||c>r)break;o*=10,o+=c-t,++e}if(e===n)return this._json=this._json.slice(s),!0;this._array[this._arrayIndex++]=o}}},{key:"_parseStringsArray",value:function(){this._progress.updateStatus("Parsing strings…");var e=this._json.lastIndexOf("]");if(-1===e)throw new Error("Incomplete JSON");this._json=this._json.slice(0,e+1),this._snapshot.strings=JSON.parse(this._json)}},{key:"write",value:function(e){this._buffer+=e,this._dataCallback&&(this._dataCallback(this._buffer),this._dataCallback=null,this._buffer="")}},{key:"_fetchChunk",value:function(){var e=this;return this._done?Promise.resolve(this._buffer):new Promise((function(t){return e._dataCallback=t}))}},{key:"_findToken",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(t,r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=this._json.indexOf(t,r||0),-1===a){e.next=4;break}return e.abrupt("return",a);case 4:return r=this._json.length-t.length+1,e.t0=this._json,e.next=8,this._fetchChunk();case 8:this._json=e.t0+=e.sent,e.next=0;break;case 11:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"_parseArray",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(t,r,a){var n,i,o,s,c,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._findToken(t);case 2:return n=e.sent,e.next=5,this._findToken("[",n);case 5:i=e.sent,this._json=this._json.slice(i+1),this._array=a?new Uint32Array(a):[],this._arrayIndex=0;case 9:if(!this._parseUintArray()){e.next=20;break}return o=this._array.length,s=this._arrayIndex,c=(100*(o?s/o:0)).toFixed(0),this._progress.updateStatus("Loading ".concat(t.slice(1,t.length-1),"…").concat(c,"%")),e.t0=this._json,e.next=17,this._fetchChunk();case 17:this._json=e.t0+=e.sent,e.next=9;break;case 20:return l=this._array,this._array=null,e.abrupt("return",l);case 23:case"end":return e.stop()}}),e,this)})));function t(t,r,a){return e.apply(this,arguments)}return t}()},{key:"_parseInput",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,i,o,s,c,l,u=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t='"snapshot"',e.next=3,this._findToken(t);case 3:if(r=e.sent,-1!==r){e.next=6;break}throw new Error("Snapshot token not found");case 6:this._progress.updateStatus("Loading snapshot info…"),a=this._json.slice(r+t.length+1),this._jsonTokenizer=new OO((function(e){u._json=u._jsonTokenizer.remainder(),u._jsonTokenizer=null,u._snapshot.snapshot=JSON.parse(e)})),this._jsonTokenizer.write(a);case 10:if(!this._jsonTokenizer){e.next=18;break}return e.t0=this._jsonTokenizer,e.next=14,this._fetchChunk();case 14:e.t1=e.sent,e.t0.write.call(e.t0,e.t1),e.next=10;break;case 18:return e.next=20,this._parseArray('"nodes"',"Loading nodes… %d%%",this._snapshot.snapshot.meta.node_fields.length*this._snapshot.snapshot.node_count);case 20:return this._snapshot.nodes=e.sent,e.next=23,this._parseArray('"edges"',"Loading edges… %d%%",this._snapshot.snapshot.meta.edge_fields.length*this._snapshot.snapshot.edge_count);case 23:if(this._snapshot.edges=e.sent,!this._snapshot.snapshot.trace_function_count){e.next=38;break}return e.next=27,this._parseArray('"trace_function_infos"',"Loading allocation traces… %d%%",this._snapshot.snapshot.meta.trace_function_info_fields.length*this._snapshot.snapshot.trace_function_count);case 27:return this._snapshot.trace_function_infos=e.sent,e.next=30,this._findToken(":");case 30:return n=e.sent,e.next=33,this._findToken('"',n);case 33:i=e.sent,o=this._json.indexOf("["),s=this._json.lastIndexOf("]",i),this._snapshot.trace_tree=JSON.parse(this._json.substring(o,s+1)),this._json=this._json.slice(s+1);case 38:if(!this._snapshot.snapshot.meta.sample_fields){e.next=42;break}return e.next=41,this._parseArray('"samples"',"Loading samples…");case 41:this._snapshot.samples=e.sent;case 42:if(!this._snapshot.snapshot.meta["location_fields"]){e.next=48;break}return e.next=45,this._parseArray('"locations"',"Loading locations…");case 45:this._snapshot.locations=e.sent,e.next=49;break;case 48:this._snapshot.locations=[];case 49:return this._progress.updateStatus("Loading strings…"),e.next=52,this._findToken('"strings"');case 52:return c=e.sent,e.next=55,this._findToken("[",c);case 55:l=e.sent,this._json=this._json.slice(l);case 57:if(this._done){e.next=64;break}return e.t2=this._json,e.next=61,this._fetchChunk();case 61:this._json=e.t2+=e.sent,e.next=57;break;case 64:this._parseStringsArray(),this._doneCallback();case 66:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}();function kO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function DO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kO(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kO(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var SO=m("dashboard/file/wrapper"),TO=SO.mapState,CO={created:function(){this.downloadFile({fileId:this.snapshotData.fileId,fileType:this.snapshotData.fileType,fileName:this.snapshotData.fileBasename})},beforeDestroy:function(){this.request&&this.request.abort(),this.request=null},methods:{downloadFile:function(e){var t=e.fileId,r=e.fileType,a=e.fileName,n=this.request=new XMLHttpRequest,i="/file/download?fileId=".concat(t,"&fileType=").concat(r);n.open("GET",i,!0),n.responseType="blob",n.addEventListener("progress",s),n.onload=c,n.send(null);var o=this;function s(e){o.fileSize=e.loaded;var t="".concat(D(e.loaded,2,!1,!0));o.theme=1,o.progress={left:"已下载",right:"".concat(t)},o.loading=!1}function c(){return l.apply(this,arguments)}function l(){return l=Object(f["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=n.status,-1===[0,200,304].indexOf(t)?(r="加载堆快照失败，错误码: ".concat(t),o.error=r):(o.file=new File([this.response],a),o.parseSnapshot());case 2:case"end":return e.stop()}}),e,this)}))),l.apply(this,arguments)}},parseSnapshot:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.theme=0,e.progress="准备解析堆快照",r=new mO(e.file,1e7),a=new PO({updateStatus:function(t){return e.progress=t}},Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.file=null,t.next=3,new Promise((function(e){return setTimeout(e,50)}));case 3:return t.t0=e,t.next=6,a.buildSnapshot();case 6:t.t1=t.sent,t.t0.showResult.call(t.t0,t.t1);case 8:case"end":return t.stop()}}),t)})))),t.next=6,r.read(a);case 6:n=t.sent,n||(e.error=r.error().message);case 8:case"end":return t.stop()}}),t)})))()},showResult:function(e){this.progress=null,this.profile=e}},computed:DO({},TO(["snapshotData"]),{overviewData:function(){var e=this.profile,t=e.retainedSizes,r=e.nodes,a=e.edges,n=e.gcroots;return[{label:"堆快照文件",value:D(this.fileSize)},{label:"堆空间大小",value:D(t[0])},{label:"Heap Objects",value:r},{label:"Heap Edges",value:a},{label:"GC Roots",value:n}]}})},AO=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Tabs",{attrs:{type:"card"},model:{value:e.selectedTab,callback:function(t){e.selectedTab=t},expression:"selectedTab"}},e._l(e.snapshotTabs,(function(e,t){return r("TabPane",{key:t,attrs:{label:e.label,name:e.value}})})),1)],1)},MO=[];function EO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function IO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?EO(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EO(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var NO=m("dashboard/analytics/snapshot"),RO=NO.mapMutations,LO={created:function(){var e=this.$route.query;this.selectedTab=e["snapshotTab"]||"suspected"},methods:IO({},RO(["setSnapshotTab"])),watch:{$route:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];I.call(this,t,"snapshotTab","selectedTab")},selectedTab:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];N.call(this,"snapshotTab","selectedTab",t),this.setSnapshotTab(this.selectedTab)}}};function FO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function $O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?FO(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FO(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var zO=$O({data:function(){return{selectedTab:void 0,snapshotTabs:[{label:"可疑泄漏节点",value:"suspected"},{label:"Dominator",value:"dominator"},{label:"Containment",value:"containment"},{label:"Search",value:"search"}],nessaryQueryArgs:["filterType","page","show-snapshot","snapshotData","snapshotTab"]}}},LO),BO=zO,UO=Object(u["a"])(BO,AO,MO,!1,null,null,null),GO=UO.exports,HO=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("transition",{attrs:{name:"slide-noward"}},[r("keep-alive",[e.snapshotTab?r(e.activeComponent,{tag:"component",attrs:{profile:e.profile}}):e._e()],1)],1)],1)},WO=[];function XO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function qO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?XO(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XO(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var KO=m("dashboard/analytics/snapshot"),YO=KO.mapState,VO={computed:qO({},YO(["snapshotTab"]),{activeComponent:function(){var e="";switch(this.snapshotTab){case"suspected":e="x-suspected";break;case"dominator":e="x-dominator";break;case"containment":e="x-containment";break;case"search":e="x-search";break;default:break}return e}})},QO=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.leakNodes.length?r("div",e._l(e.leakNodes,(function(t,a){return r("div",{key:a,style:e.getIntervalStyle(a)},[r("div",{staticClass:"leak-card"},[r("div",{staticClass:"detail"},[r("div",{staticClass:"card-title"},[e._v(e._s(e.getCardTitle(a)))]),r("div",{staticClass:"card-content"},[1===t.count?r("div",[r("div",{staticClass:"content-interval"},[e._v(" 实例 "),r("strong",[e._v('"'+e._s(t.name)+'"')]),e._v(" 地址 "),r("strong",{ref:"address-"+a,refInFor:!0,staticClass:"leak-address",on:{click:function(t){return e.copyAddress(a)}}},[e._v("@"+e._s(t.address))]),e._v(" 占用了 V8 堆内 "),r("strong",[e._v(e._s(t.formatedSize)+" ("+e._s(t.percentage)+"%)")]),e._v(" 的空间. ")]),r("div",{staticClass:"card-title"},[e._v("关键信息")]),r("div",{staticClass:"card-content"},[e._v(" 实例类型 "),r("strong",[e._v(e._s(t.type)+",")]),e._v(" 总计 "),r("strong",[e._v(e._s(t.edgeCount))]),e._v(" 个边. ")])]):r("div",[r("div",{staticClass:"content-interval"},[r("strong",[e._v(e._s(t.count))]),e._v(" 个 "),r("strong",{staticClass:"leak-address"},[e._v('"'+e._s(t.name)+'"')]),e._v(" 对象占用了 V8 堆内 "),r("strong",[e._v(e._s(t.formatedSize)+" ("+e._s(t.percentage)+"%)")]),e._v(" 的空间. ")]),r("div",{staticClass:"card-title"},[e._v("关键词")]),r("div",{staticClass:"card-content"},[e._v(e._s(t.name))])])])]),r("div",{staticClass:"pie"},[r("x-pie2",{attrs:{percentage:t.percentage,radius:64,pieStrokeWidth:8,descTop:30}},[r("div",{staticClass:"percentage",attrs:{slot:"percentage"},slot:"percentage"},[e._v(" "+e._s(t.percentage)+"% ")])])],1)]),r("div",{staticClass:"leak-doms"},[r("x-dominator",{staticClass:"card-content",attrs:{profile:e.profile,data:e.getInitDoms(t)},on:{expandParent:e.expandParent}})],1),r("textarea",{ref:"input",refInFor:!0,staticClass:"hidden",attrs:{id:"input"}})])})),0):r("div",[r("x-error-message",{directives:[{name:"show",rawName:"v-show",value:!e.leakNodes.length,expression:"!leakNodes.length"}],attrs:{message:"当前堆空间状态良好，不存在可疑内存泄漏节点",top:"calc(40vh - 150px)"}})],1)])},ZO=[],JO=.2,ew={methods:{expandNode:function(e){if(e.expand){e.children||this.$set(e,"children",[]);var t=this.formatEdges(e.id,e.lastIndex,e.parents,e.mark),r=t.children,a=t.lastIndex,n=t.left,i=t.more,o=t.noChild;e.children=e.children.concat(r),this.$set(e,"lastIndex",a),this.$set(e,"more",i),this.$set(e,"left",n),this.$set(e,"noChild",o)}},checkSizeHigh:function(e){var t=this.profile,r=t.retainedSizes,a=t.rootIndex,n=r[a];return n&&e/n>JO},formatNode:function(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{parentRetainedSize:0,parentChilds:0,parentMark:!1},n=a.parentRetainedSize,i=a.parentChilds,o=a.parentMark,s=this.profile,c=s.nodeUtils,l=s.edgeUtils,u=s.retainedSizes,d=s.gcrootsMap,p=s.NodeUtils,f=s.EdgeUtils,h=p.NodeTypes,v=h.KCLOSURE,b=h.KSTRING,g=h.KCONCATENATED_STRING,y=h.KSLICED_STRING,m='<span class="snap-addr">@'.concat(c.getAddress(e),"</span>"),O=c.getType(e),w=c.getTypeForInt(e),_=k(c.getName(e));w===g&&(_=c.getConsStringName(e)),"string"===typeof _&&_.length>100&&(_=_.substr(0,100));var j=["snap-name"];[v].includes(w)&&(_="".concat(_||"anonymous","()"),j.push("snap-closure")),[b,y,g].includes(w)&&j.push("snap-string"),d[e]&&_&&j.push("snap-gcroot"),_='<span class="'.concat(j.join(" "),'">').concat(_,"</span>");var x=u[e],P="size: ".concat(D(x,2,!1,!1," "));this.checkSizeHigh(x)?P='<span class="snap-leak-high">'.concat(P,"</span>"):i&&(this.checkSizeHigh(n)||o)&&x>=n/i&&(P='<span class="snap-leak-warn">'.concat(P,"</span>"));var S="".concat(_," ").concat(m,' <span class="snap-detial">(type: ').concat(O,", ").concat(P,")</span>");if(t||0===t){var T=k(l.getNameOrIndex(t,!0)),C=l.GetType(t,!0),A=l.getTypeForInt(t,!0),M=f.EdgeTypes,E=M.KELEMENT,I=M.KPROPERTY,N=M.KSHORTCUT,R=M.KCONTEXTVARIABLE,L='<span class="snap-hidden">'.concat(T,"</span>");[E,I,N].includes(A)&&(L='<span class="snap-property">'.concat(T,"</span>")),[R].includes(A)&&(L='<span class="snap-context">'.concat(T,"</span>")),S='<span title="'.concat(C,'">').concat(L,'</span> <span class="snap-quto">::</span> ').concat(S)}return r&&r.includes(e)&&(S='<span class="snap-disabled">'.concat(S,"</span>")),{info:S,mark:P.includes("snap-leak")}}}};function tw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function rw(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tw(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tw(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var aw=ew.methods,nw={created:function(){var e=this,t=this.profile,r=t.rootIndex,a=t.retainedSizes,n=t.leakNodes,i=a[r];this.leakNodes=n.map((function(t){return t.percentage=Number((t.size/i*100).toFixed(2)),t.formatedSize=D(t.size),t.count>1?t:(t.address=e.profile.nodeUtils.getAddress(t.id),t.type=e.profile.nodeUtils.getType(t.id),t.edgeCount=e.profile.nodeUtils.getEdgeCount(t.id),t)}))},methods:rw({getCardTitle:function(e){return"可疑点 ".concat(e+1)},getIntervalStyle:function(e){return 0===e?"":"margin-top: 15px"},copyAddress:function(e){var t=this.$refs["address-".concat(e)][0];if(t){var r=this.$refs["input"][0];if(r){var a=t.innerHTML;r.value=a,r.select(),document.execCommand("copy"),this.$Message.success("地址已复制")}}},formatDoms:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,a=e.doms||[],n=Math.min(a.length,t+r),i=[],o=t;o<n;o++){var s=a[o],c=this.formatNode(s),l=c.info,u=c.mark;i.push({id:s,title:l,expand:!1,children:[],lastIndex:0,more:!1,left:0,noChild:!1,parents:[s],mark:u,showHidden:!1,hiddenInfo:""})}return{key:e.key,list:i,lastIndex:n,more:n<a.length,left:a.length-n}},getInitDoms:function(e){var t=this.formatDoms(e);return this.initDoms[e.key]={leak:e,data:t},t},expandParent:function(e){var t=this.initDoms[e.key].leak,r=this.formatDoms(t,e.lastIndex,50),a=r.list,n=r.lastIndex,i=r.more,o=r.left;e.list=e.list.concat(a),e.lastIndex=n,e.more=i,e.left=o}},aw)},iw=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("x-tree",{attrs:{data:e.profileTreeData},on:{expandNode:e.expandNode,showExtra:e.showExtra,hiddenExtra:e.hiddenExtra,expandParent:e.expandParent}})],1)},ow=[];function sw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function cw(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sw(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sw(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var lw=ew.methods,uw={created:function(){this.initTree()},methods:cw({initTree:function(){var e=this.data.list;if(Array.isArray(e)&&e.length)this.profileTreeData=this.data;else{var t=this.profile.rootIndex,r=this.formatNode(t),a=r.info,n=r.mark,i=this.formatEdges(t,0,[t]),o=i.children,s=i.lastIndex,c=i.more,l=i.left,u=i.noChild;this.profileTreeData={list:[{id:t,title:a,expand:!0,children:o,lastIndex:s,more:c,left:l,noChild:u,parents:[t],mark:n,showHidden:!1,hiddenInfo:""}]}}},formatEdges:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:50,i=this.profile,o=i.nodeUtils,s=i.retainedSizes,c=this.profile.getSortedDominators(e),l=Math.min(c.length,t+n),u=[],d=t;d<l;d++){var p=c[d],f=this.profile.getEdgeByParentAndChild(e,p),h=this.formatNode(p,-1===f?null:f,r,{parentRetainedSize:s[e]-o.getSelfSize(e),parentChilds:c.length,parentMark:a}),v=h.info,b=h.mark;u.push({id:p,title:v,parents:[p].concat(r),disabled:r.includes(p),mark:b,showHidden:!1,hiddenInfo:""})}return{children:u,lastIndex:l,more:l<c.length,left:c.length-l,noChild:!c.length}},getHiddenInfo:function(e,t){var r=this.profile.getDominatorsRepeat(e,t),a=r.count,n=r.size,i=r.percent,o="";if(a>1){var s="";i&&(s=" (".concat(i,"%)")),o='<span class="snap-infohidden">重复 '.concat(a," 次，占据 ").concat(D(n,2,!1,!1," ")).concat(s,"</span>")}return o},showExtra:function(e){var t=e.parent,r=e.child;r.hiddenInfoSetted||(r.hiddenInfo=this.getHiddenInfo(t,r.id),r.hiddenInfoSetted=!0),r.showHidden=!0},hiddenExtra:function(e){var t=e.child;t.showHidden=!1},expandParent:function(e){this.$emit("expandParent",e)}},lw)};function dw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function pw(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dw(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dw(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var fw=pw({props:{profile:{type:Object,default:function(){return{}}},data:{type:Object,default:function(){return{list:[]}}}},data:function(){return{profileTreeData:{}}}},uw),hw=fw,vw=Object(u["a"])(hw,iw,ow,!1,null,null,null),bw=vw.exports;function gw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function yw(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gw(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gw(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var mw=yw({props:{profile:{type:Object,default:function(){return{}}}},components:{"x-dominator":bw},data:function(){return{leakNodes:[],initDoms:{}}}},nw),Ow=mw,ww=(r("5665"),Object(u["a"])(Ow,QO,ZO,!1,null,"44a364d7",null)),_w=ww.exports,jw=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("x-tree",{attrs:{data:e.profileTreeData},on:{expandNode:e.expandNode}})],1)},xw=[];function Pw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function kw(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pw(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pw(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Dw=ew.methods,Sw={created:function(){this.initTree()},methods:kw({initTree:function(){var e=this.rootId,t=this.profile.rootIndex;t=-1===e?t:e;var r=this.formatNode(t),a=r.info,n=r.mark,i=this.formatEdges(t,0,[t]),o=i.children,s=i.lastIndex,c=i.more,l=i.left,u=i.noChild;this.profileTreeData={list:[{id:t,title:a,expand:!0,children:o,lastIndex:s,more:c,left:l,noChild:u,parents:[t],mark:n}]}},formatEdges:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:50,i=this.profile,o=i.nodeUtils,s=i.edgeUtils,c=i.retainedSizes,l=o.getSortedEdges(e),u=Math.min(l.length,t+n),d=[],p=t;p<u;p++){var f=l[p],h=s.getTargetNode(f,!0),v=this.formatNode(h,f,r,{parentRetainedSize:c[e]-o.getSelfSize(e),parentChilds:l.length,parentMark:a}),b=v.info,g=v.mark;d.push({id:h,title:b,parents:[h].concat(r),disabled:r.includes(h),mark:g})}return{children:d,lastIndex:u,more:u<l.length,left:l.length-u,noChild:!l.length}}},Dw),watch:{rootId:function(){this.initTree()}}};function Tw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Cw(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Tw(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tw(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Aw=Cw({props:{profile:{type:Object,default:function(){return{}}},rootId:{type:Number,default:-1}},data:function(){return{profileTreeData:{}}}},Sw),Mw=Aw,Ew=Object(u["a"])(Mw,jw,xw,!1,null,null,null),Iw=Ew.exports,Nw=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"search"},[r("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"Enter object address | ID"},on:{"on-focus":e.clearInput},model:{value:e.addressOrId,callback:function(t){e.addressOrId=t},expression:"addressOrId"}}),r("Button",{staticClass:"search-button",attrs:{type:"primary"},on:{click:e.searchAddressOrId}},[e._v("搜索")])],1),r("div",{staticClass:"edge"},[r("div",{staticClass:"section-title"},[e._v("Edge 视图")]),r("x-containment",{attrs:{profile:e.profile,rootId:e.rootId}})],1),r("div",{staticClass:"retainer"},[r("div",{staticClass:"section-title"},[e._v("Retainer 视图")]),r("x-retainer",{attrs:{profile:e.profile,rootId:e.rootId}})],1)])},Rw=[],Lw=(r("2ca0"),{methods:{illegalAddress:function(e){return e&&e.startsWith("@")&&_(e.slice(1))&&Number(e.slice(1))%2===1},illegalId:function(e){return _(e)},searchAddressOrId:function(){var e=this.addressOrId;if(this.illegalAddress(e)){var t=this.profile.searchOrdinalByAddress(e.slice(1));_(t)&&(this.rootId=Number(t))}else this.illegalId(e)?this.rootId=Number(e):this.$Message.error("地址或 ID 不合法")},clearInput:function(){this.addressOrId=null}}}),Fw=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("x-tree",{attrs:{data:e.profileTreeData},on:{expandNode:e.expandNode}})],1)},$w=[];function zw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Bw(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zw(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zw(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Uw=ew.methods,Gw={created:function(){this.initTree()},methods:Bw({initTree:function(){var e=this.rootId,t=this.profile.rootIndex;t=-1===e?t:e;var r=this.formatNode(t),a=r.info,n=r.mark,i=this.formatEdges(t,0,[t]),o=i.children,s=i.lastIndex,c=i.more,l=i.left,u=i.noChild;this.profileTreeData={list:[{id:t,title:a,expand:!0,children:o,lastIndex:s,more:c,left:l,noChild:u,parents:[t],mark:n}]}},formatEdges:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=(arguments.length>3&&arguments[3],arguments.length>4&&void 0!==arguments[4]?arguments[4]:50),n=this.profile.getRetainers(e),i=Math.min(n.length,t+a),o=[],s=t;s<i;s++){var c=n[s],l=c.ordinal,u=this.formatNode(l,c.edge,r),d=u.info,p=u.mark;o.push({id:l,title:d,parents:[l].concat(r),disabled:r.includes(l),mark:p})}return{children:o,lastIndex:i,more:i<n.length,left:n.length-i,noChild:!n.length}}},Uw),watch:{rootId:function(){this.initTree()}}};function Hw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Ww(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Hw(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hw(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Xw=Ww({props:{profile:{type:Object,default:function(){return{}}},rootId:{type:Number,default:-1}},data:function(){return{profileTreeData:{}}}},Gw),qw=Xw,Kw=Object(u["a"])(qw,Fw,$w,!1,null,null,null),Yw=Kw.exports;function Vw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Qw(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vw(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vw(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Zw=Qw({props:{profile:{type:Object,default:function(){return{}}}},components:{"x-containment":Iw,"x-retainer":Yw},data:function(){return{addressOrId:null,rootId:-1}}},Lw),Jw=Zw,e_=(r("adc9"),Object(u["a"])(Jw,Nw,Rw,!1,null,"3d0ac51f",null)),t_=e_.exports;function r_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function a_(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?r_(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var n_=a_({props:{profile:{type:Object,default:function(){return{}}}},components:{"x-suspected":_w,"x-dominator":bw,"x-containment":Iw,"x-search":t_}},VO),i_=n_,o_=Object(u["a"])(i_,HO,WO,!1,null,null,null),s_=o_.exports;function c_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function l_(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c_(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var u_=l_({components:{"x-overview":Ev,"x-snapshot-tab":GO,"x-snapshot-content":s_},data:function(){return{loading:!0,theme:0,progress:null,error:null,request:null,file:null,profile:null,fileSize:null}}},CO),d_=u_,p_=(r("b652"),Object(u["a"])(d_,gO,yO,!1,null,"7e58acbb",null)),f_=p_.exports;function h_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function v_(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h_(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var b_=v_({components:{"x-diag":Hg,"x-gc":cm,"x-trend":xm,"x-flamegraph":bO,"x-snapshot":f_},data:function(){return{diagDrawerKey:"diag-analytics",gcDrawerKey:"gc-analytics",trendDrawerKey:"show-trend",flamegraphDrawerKey:"show-flamegraph",snapshotDrawerKey:"show-snapshot",whiteQueryKeys:["filterType","page"],forceGoBack:!0}}},gv),g_=b_,y_=(r("5e53"),Object(u["a"])(g_,Hh,Wh,!1,null,"12a23e1c",null)),m_=y_.exports;function O_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function w_(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O_(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var __=w_({props:{appName:String,title:String,currentUserIsOwner:Boolean},components:{"x-uploader":kp,"x-type-filter":Bp,"x-file-list":Gh,"x-analytics":m_}},Xd),j_=__,x_=(r("b28f"),Object(u["a"])(j_,Hd,Wd,!1,null,"7276bf3b",null)),P_=x_.exports,k_=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"detail-content"},[r("x-dashboard-title",{attrs:{appName:e.appName,dashboardTitle:e.title,owner:e.currentUserIsOwner,line:"",jump:""}}),r("Alert",{staticClass:"x-alert tip",attrs:{type:"info"}},[r("div",{staticClass:"alert-group"},[r("Icon",{staticStyle:{color:"#2376b7"},attrs:{type:"ios-alert-outline"}}),r("div",{staticClass:"alert-desc"},[e._v("您可以将应用授权给其它成员进行管理，团队成员可以查看完整的应用监控数据，也可以访问生成的性能分析文件，方便协作定位 Node.js 应用故障")])],1)]),r("div",{staticClass:"addition-wrapper"},[r("div",{staticClass:"addition"},[r("Input",{staticClass:"add-team-member",attrs:{placeholder:"请输入需要邀请的用户工号"},model:{value:e.invitedUserId,callback:function(t){e.invitedUserId=t},expression:"invitedUserId"}},[r("span",{staticClass:"addition-tip",attrs:{slot:"prepend"},slot:"prepend"},[e._v("邀请新成员")])]),r("Button",{staticClass:"addition-confirm",attrs:{long:"",type:"info"},on:{click:e.inviteMember}},[e._v("确认邀请")])],1)]),r("div",[r("x-loading",{attrs:{loading:e.members_loading,type:"dot",size:"middle",top:"calc(40vh - 105px)"}}),r("x-error-message",{directives:[{name:"show",rawName:"v-show",value:e.members_load_error,expression:"members_load_error"}],attrs:{message:e.members_load_error,top:"calc(40vh -  115px)"}}),r("transition",{attrs:{name:"slide-noward"}},[e.members_loading||e.members_load_error?e._e():r("x-members",{staticClass:"members"})],1)],1),r("x-team-confirm")],1)},D_=[];function S_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function T_(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S_(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var C_=m("dashboard/team"),A_=C_.mapState,M_=C_.mapGetters,E_=C_.mapMutations,I_=C_.mapActions,N_={created:function(){this.cancelToken=C(),this.getTeamMembers({cancelToken:this.cancelToken.token})},beforeDestroy:function(){A(this.cancelToken)},methods:T_({},E_(["setConfirmModal"]),{},I_(["getTeamMembers"]),{inviteMember:function(){if(this.invitedUserId){var e=this.createConfirmData("invitation","邀请成员","将邀请用户 <strong>".concat(this.invitedUserId,"</strong> 至本应用，请注意这里需要输入正确的用户工号"),{userId:this.invitedUserId});this.setConfirmModal({status:!0,data:e})}else this.$Message.error("填写的邀请用户工号不能为空")}}),computed:T_({},A_(["members_loading","members_load_error","confirmModal","confirmData"]),{},M_(["createConfirmData"])),watch:{confirmModal:function(){if(!this.confirmModal){var e=this.confirmData,t=e.type,r=e.success;"invitation"===t&&(this.invitedUserId=void 0),r&&("leaveTeam"===t?this.$router.push({path:"/console",query:{type:"joinedApps"}}):this.getTeamMembers({cancelToken:this.cancelToken.token}))}}}},R_=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("x-table",{attrs:{columns:e.columns,data:e.members,noDataText:"应用下暂无团队成员","no-data-head":""},scopedSlots:e._u([{key:"userInfo",fn:function(t){var a=t.row;return[r("div",{staticClass:"padding"},[e._v(e._s(a.userInfo))])]}},{key:"status",fn:function(t){var a=t.row;return[r("div",{staticClass:"padding"},[e._v(e._s(e.formatStatus(a.status)))])]}},{key:"timestamp",fn:function(t){var a=t.row;return[r("div",{staticClass:"padding"},[e._v(e._s(e.formatTime(a.timestamp)))])]}},{key:"operation",fn:function(t){var a=t.row;return[e.currentUserId===e.appOwnerId?r("div",[1===a.status?r("Button",{staticClass:"button-label",attrs:{type:"warning",size:"small"},on:{click:function(t){return e.cancelInvitation(a)}}},[e._v("撤回邀请")]):e._e(),2===a.status?r("Button",{staticClass:"button-label",attrs:{type:"info",size:"small"},on:{click:function(t){return e.transferOwnership(a)}}},[e._v("转交应用")]):e._e(),2===a.status?r("Button",{staticClass:"button-label second-button",attrs:{type:"error",size:"small"},on:{click:function(t){return e.deleteMember(a)}}},[e._v("移除成员")]):e._e()],1):r("div",[a.userId===e.currentUserId?r("Button",{staticClass:"button-label",attrs:{type:"warning",size:"small"},on:{click:function(t){return e.leaveTeam()}}},[e._v("离开团队")]):e._e()],1)]}}])})],1)},L_=[];function F_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function $_(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F_(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var z_=m("dashboard/team"),B_=z_.mapState,U_=z_.mapGetters,G_=z_.mapMutations,H_={methods:$_({},G_(["setConfirmModal"]),{formatStatus:function(e){var t="未知";switch(e){case 0:t="管理员";break;case 1:t="邀请中";break;case 2:t="已加入";break;default:break}return t},formatTime:function(e){return Qn()(e).format("YYYY-MM-DD HH:mm:ss")},cancelInvitation:function(e){var t=e.userId,r=e.userInfo,a=this.createConfirmData("cancelInvitation","撤销邀请","撤销对用户 <strong>".concat(r,"</strong> 的邀请，后续您仍然可以邀请此用户加入本应用"),{userId:t});this.setConfirmModal({status:!0,data:a})},deleteMember:function(e){var t=e.userId,r=e.userInfo,a=this.createConfirmData("deleteMember","移除成员","将用户 <strong>".concat(r,"</strong> 移出本应用，后续您仍然可以邀请此用户加入本应用"),{userId:t});this.setConfirmModal({status:!0,data:a})},transferOwnership:function(e){var t=e.userId,r=e.userInfo,a=this.createConfirmData("transferOwnership","转交应用","将本应用管理员角色转交给 <strong>".concat(r,"</strong>，转交后您的角色将变更为应用普通成员"),{userId:t});this.setConfirmModal({status:!0,data:a})},leaveTeam:function(){var e=this.createConfirmData("leaveTeam","离开团队","将离开本应用团队，离开团队后您无法继续查看应用的监控数据");this.setConfirmModal({status:!0,data:e})}}),computed:$_({},B_(["members_data"]),{},U_(["createConfirmData"]),{members:function(){var e=this.members_data.list;return e.sort((function(e,t){return e.status>t.status?1:e.status===t.status&&e.timestamp>t.timestamp?1:-1})),e},appOwnerId:function(){var e=this.members_data.list,t=e.filter((function(e){return 0===e.status}));return t.length&&(t=t[0].userId),t},currentUserId:function(){var e=this.members_data.currentUserId;return e}})};function W_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function X_(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W_(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var q_=X_({data:function(){return{columns:[{title:"成员信息",value:"userInfo",left:23},{title:"当前状态",value:"status",align:"center"},{title:"邀请 / 加入时间",value:"timestamp",align:"center"},{title:"团队操作",value:"operation",align:"center",width:205}]}}},H_),K_=q_,Y_=(r("fa60"),Object(u["a"])(K_,R_,L_,!1,null,"59019c2d",null)),V_=Y_.exports,Q_=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("x-modal",{ref:"confirm",attrs:{title:e.confirmData.title,padding:0,width:600,"hide-footer":""},on:{canceled:e.closeConfirmModal}},[r("x-confirm-content",{attrs:{slot:"content"},slot:"content"})],1)],1)},Z_=[];function J_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ej(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J_(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var tj=m("dashboard/team"),rj=tj.mapState,aj=tj.mapMutations,nj=U("modalQueryKey","confirmModal","confirm","setConfirmModal"),ij=nj.mapMethods,oj=nj.mapWatch,sj=nj.handleMounted,cj={mounted:function(){sj.call(this,"handleConfirmModal")},methods:ej({},aj(["setConfirmModal"]),{},ij("handleConfirmModal"),{closeConfirmModal:function(){this.setConfirmModal({status:!1})}}),computed:ej({},rj(["confirmModal","confirmData"])),watch:ej({},oj,{$route:function(e){this.handleConfirmModal(e.query)}})},lj=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"x-modal-content"},[r("x-loading",{attrs:{loading:e.confirmData.loading,type:"dot",size:"middle"}}),r("x-error-message",{directives:[{name:"show",rawName:"v-show",value:e.confirmData.error,expression:"confirmData.error"}],attrs:{message:e.confirmData.error}}),e.confirmData.loading||e.confirmData.error||e.confirmData.success?e._e():r("div",{staticClass:"confirm",domProps:{innerHTML:e._s(e.confirmData.content)}})],1),r("div",{staticClass:"x-modal-footer"},[e.confirmData.loading?e._e():r("div",[r("Button",{attrs:{type:"primary",ghost:""},on:{click:e.closeConfirmModal}},[e._v("关闭")]),e.confirmData.error||e.confirmData.success?e._e():r("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary"},on:{click:e.submitRequest}},[e._v("确认")])],1)])])},uj=[];function dj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function pj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dj(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dj(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var fj=m("dashboard/team"),hj=fj.mapState,vj=fj.mapMutations,bj=fj.mapActions,gj={created:function(){this.cancelToken=C()},beforeDestroy:function(){A(this.cancelToken)},methods:pj({},vj(["setConfirmModal"]),{},bj(["inviteMember","deleteMember","transferOwnership","leaveTeam"]),{closeConfirmModal:function(){this.setConfirmModal({status:!1})},submitRequest:function(){var e=this.confirmData,t=e.type,r=e.data;if("invitation"===t){var a=r.userId;this.inviteMember({cancelToken:this.cancelToken.token,userId:a})}if("cancelInvitation"===t){var n=r.userId;this.deleteMember({cancelToken:this.cancelToken.token,userId:n})}if("deleteMember"===t){var i=r.userId;this.deleteMember({cancelToken:this.cancelToken.token,userId:i})}if("transferOwnership"===t){var o=r.userId;this.transferOwnership({cancelToken:this.cancelToken.token,userId:o})}"leaveTeam"===t&&this.leaveTeam({cancelToken:this.cancelToken.token})}}),computed:pj({},hj(["confirmModal","confirmData"]))};function yj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function mj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yj(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yj(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Oj=mj({},gj),wj=Oj,_j=Object(u["a"])(wj,lj,uj,!1,null,null,null),jj=_j.exports;function xj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Pj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xj(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xj(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var kj=Pj({components:{"x-confirm-content":jj},data:function(){return{modalQueryKey:"operation-confirm"}}},cj),Dj=kj,Sj=Object(u["a"])(Dj,Q_,Z_,!1,null,null,null),Tj=Sj.exports;function Cj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Aj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Cj(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cj(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Mj=Aj({props:{appName:String,title:String,currentUserIsOwner:Boolean},components:{"x-members":V_,"x-team-confirm":Tj},data:function(){return{invitedUserId:void 0}}},N_),Ej=Mj,Ij=(r("fbb9"),Object(u["a"])(Ej,k_,D_,!1,null,"468ce5d4",null)),Nj=Ij.exports,Rj=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"detail-content alarm-content"},[r("x-dashboard-title",{attrs:{appName:e.appName,dashboardTitle:e.title,owner:e.currentUserIsOwner,line:"",jump:""}}),r("Alert",{staticClass:"x-alert tip",attrs:{type:"info"}},[r("div",{staticClass:"alert-group"},[r("Icon",{staticStyle:{color:"#2376b7"},attrs:{type:"ios-alert-outline"}}),r("div",{staticClass:"alert-desc"},[r("span",[e._v("在这里您可以基于自定义")]),r("a",{attrs:{href:"https://github.com/jacksonTian/boolex",target:"_blank"}},[r("code",[e._v(" DSL ")])]),r("span",[e._v("灵活地配置基础告警规则，以便在应用遇到问题时及时感知")])])],1)]),r("x-alarm-configure"),r("div",{staticClass:"divide-line"}),r("x-alarm-rules"),r("x-modal",{ref:"tip",attrs:{title:e.tipData.title,padding:0,"hide-footer":"",top:"calc(50vh - 120px)"},on:{canceled:e.closeTipModal}},[r("x-tip-content",{attrs:{slot:"content"},slot:"content"})],1),r("x-modal",{ref:"contacts",attrs:{title:"配置告警联系人",padding:0,width:600,"hide-footer":""},on:{canceled:e.closeContactsModal}},[r("x-contacts",{attrs:{slot:"content"},slot:"content"})],1),r("x-drawer",{ref:"history",on:{close:function(t){return e.closeHistoryDrawer()}}},[r("x-history",{attrs:{slot:"content"},slot:"content"})],1)],1)},Lj=[];function Fj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function $j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fj(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fj(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var zj=m("dashboard/alarm"),Bj=zj.mapState,Uj=zj.mapMutations,Gj=U("modalTip","tipModal","tip","setTipModal"),Hj=Gj.mapMethods,Wj=Gj.mapWatch,Xj=Gj.handleMounted,qj=U("modalContacts","contactsModal","contacts","setContactsModal"),Kj=qj.mapMethods,Yj=qj.mapWatch,Vj=qj.handleMounted,Qj=B("drawerHistory","historyDrawer","history","setHistoryDrawer","historyData"),Zj=Qj.mapMethods,Jj=Qj.mapWatch,ex=Qj.handleMounted,tx={mounted:function(){Xj.call(this,"handleTipModal"),Vj.call(this,"handleContactsModal"),ex.call(this,"handleHistoryDrawer",!0)},beforeDestroy:function(){this.resetState()},methods:$j({},Uj(["resetState","setTipModal","setContactsModal","setHistoryDrawer"]),{},Hj("handleTipModal"),{},Kj("handleContactsModal"),{},Zj("handleHistoryDrawer"),{closeTipModal:function(){this.setTipModal({status:!1})},closeContactsModal:function(){this.setContactsModal({status:!1})},closeHistoryDrawer:function(){this.setHistoryDrawer({status:!1})}}),computed:$j({},Bj(["tipModal","tipData","contactsModal","historyDrawer","historyData"])),watch:$j({},Wj,{},Yj,{},Jj,{$route:function(e){this.handleTipModal(e.query),this.handleContactsModal(e.query),this.handleHistoryDrawer(e.query)}})},rx=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._m(0),e._l(e.configures,(function(t,a){return r("div",{key:a,staticClass:"configure-wrapper",style:0!==a&&e.checkNeedShow(t,"label")?"margin-top: 15px;":""},[r("div",{staticClass:"label-group"},[r("transition",{attrs:{name:"slide-noward"}},[e.checkNeedShow(t,"label")?r("div",{staticClass:"label"},[e._v(e._s(t.label))]):e._e()])],1),r("transition",{attrs:{name:"slide-noward"}},[e.checkNeedShow(t,"selector")?r("div",{staticClass:"selector-group"},[r("div",{staticClass:"selector"},[r("Select",{staticClass:"agent-selector context-selector",style:t.width?"width: "+t.width+"px;":"",attrs:{placeholder:t.placeholder,clearable:""},model:{value:e.modelMap[t.value],callback:function(r){e.$set(e.modelMap,t.value,r)},expression:"modelMap[cfg.value]"}},e._l(e.optionMap[t.value],(function(t){return r("Option",{key:t.value,attrs:{value:t.value,disabled:t.disabled}},[e._v(e._s(t.label))])})),1)],1)]):e._e()]),r("transition",{attrs:{name:"slide-noward"}},[e.checkNeedShow(t,"input")?r("div",{staticClass:"input-group"},[r("Input",{staticClass:"input",attrs:{placeholder:e.getPlaceholder(t),clearable:""},model:{value:e.modelMap[t.value],callback:function(r){e.$set(e.modelMap,t.value,r)},expression:"modelMap[cfg.value]"}})],1):e._e()]),"webhook"===t.type?r("div",{staticClass:"webhook-group"},[r("div",{staticClass:"webhook"},[r("Checkbox",{model:{value:e.checkboxMap[t.value],callback:function(r){e.$set(e.checkboxMap,t.value,r)},expression:"checkboxMap[cfg.value]"}},[r("span",{staticStyle:{"margin-left":"5px"}},[e._v("启用")])])],1)]):e._e(),"button"===t.type?r("div",{staticClass:"button-group"},[e.editModel?r("div",[r("Button",{staticClass:"button",attrs:{type:"info",ghost:""},on:{click:e.cancelEdit}},[e._v("取消")]),r("Button",{staticClass:"button",attrs:{type:"info",loading:e.updateRuleLoading},on:{click:function(t){return e.operateRule("update")}}},[e._v("更新规则")])],1):r("div",[r("Button",{staticClass:"button",attrs:{type:"info",loading:e.addRuleLoading},on:{click:function(t){return e.operateRule("add")}}},[e._v("添加规则")])],1)]):e._e()],1)}))],2)},ax=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"alarm-wrapper"},[r("div",{staticClass:"section-title alarm"},[e._v("配置告警规则")])])}];function nx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ix(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nx(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nx(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ox=m("dashboard/alarm"),sx=ox.mapState,cx=ox.mapMutations,lx=ox.mapActions,ux={created:function(){this.cancelToken=C()},beforeDestroy:function(){A(this.cancelToken)},methods:ix({},cx(["resetState","setTipModal"]),{},lx(["getRules","postRule","putRule"]),{reset:function(){var e=this.modelMap;e.contextType="xprofiler_log",e.pushType="p3",e.webhookType="dingtalk",e.webhookAddress=void 0,e.webhookSign=void 0,e.fastRules=void 0,e.customRuleExpr=void 0,e.customRuleDesc=void 0,this.checkboxMap.webhookPush=!1,this.resetState()},checkNeedShow:function(e,t){var r=e.type,a=e.value,n=e.dependent,i=e.dependentValue,o=e.placeholderValue,s="label"===t||r===t;if("checkbox"===n){var c=this["".concat(a,"PlaceholderMap")],l=!c||c[this.modelMap[o]];return s&&l&&this.checkboxMap[i]}return s},checkRequired:function(e,t,r){return!!e[t]||(this.$Message.error(r),!1)},cancelEdit:function(){this.reset()},operateRule:function(e){var t=this,r=this.modelMap,a=this.checkRequired(r,"contextType","判定上下文类型不能为空")&&this.checkRequired(r,"pushType","消息推送级别不能为空")&&this.checkRequired(r,"customRuleExpr","自定义阈值表达式不能为空")&&this.checkRequired(r,"customRuleDesc","告警推送内容不能为空");if(a){if(this.checkboxMap.webhookPush){var n=this.checkRequired(r,"webhookType","webhook 类型不能为空")&&this.checkRequired(r,"webhookAddress","webhook 地址不能为空");if(!n)return}var i="",o="",s="";"add"===e&&(o="addRuleLoading",i="postRule",s="添加规则失败"),"update"===e&&(o="updateRuleLoading",i="putRule",s="更新规则失败"),this[o]=!0,this[i]({cancelToken:this.cancelToken.token,data:{strategyId:this.editData.strategyId,contextType:r.contextType,pushType:r.pushType,customRuleExpr:r.customRuleExpr,customRuleDesc:r.customRuleDesc,webhookPush:this.checkboxMap.webhookPush,webhookType:r.webhookType,webhookAddress:r.webhookAddress,webhookSign:r.webhookSign}}).then((function(){t.getRules({cancelToken:t.cancelToken.token}),t[o]=!1,t.reset()})).catch((function(e){var r={title:s,error:e.message,loading:!1};t.setTipModal({status:!0,data:r})})).then((function(){return t[o]=!1}))}},getPlaceholder:function(e){var t=this.modelMap,r=e.value,a=e.placeholder,n=e.placeholderValue;return a||this["".concat(r,"PlaceholderMap")][t[n]]}}),computed:ix({},sx(["editModel","editData"])),watch:{"modelMap.fastRules":function(){var e=this.modelMap,t=e.fastRules;switch(t){case"fast_rule_memory":e.contextType="xprofiler_log",e.customRuleExpr="@heap_used / @heap_limit > 0.7",e.customRuleDesc="已用堆内存超过堆上限的 70%，当前为 ${@heap_used / @heap_limit * 100}%";break;case"fast_rule_cpu":e.contextType="xprofiler_log",e.customRuleExpr="@cpu_300 > 95",e.customRuleDesc="5 分钟内 CPU 使用率超过 95%，当前为 ${@cpu_300}%";break;case"fast_rule_gc":e.contextType="xprofiler_log",e.customRuleExpr="@gc_60 > 15",e.customRuleDesc="1 分钟内 GC 消耗超过 15%，当前为 ${@gc_60}%";break;case"fast_rule_expired_request":e.contextType="system_log",e.customRuleExpr="@expired_request > 0",e.customRuleDesc="1 分钟内响应超过 30s 时请求出现 ${@expired_request} 个，请多加关注";break;case"fast_rule_illegal_request":e.contextType="system_log",e.customRuleExpr="@code_4xx / @http_response_sent + @code_5xx / @http_response_sent > 0.5",e.customRuleDesc="1 分钟内 4xx 和 5xx 请求数占比超过 50%，当前为 (${@code_4xx}, ${@code_5xx}) / ${@http_response_sent}";break;case"fast_rule_os_memory":e.contextType="system_log",e.customRuleExpr="@os_mem_usage > 80",e.customRuleDesc="系统内存整体使用率超过 80%，当前为 ${@os_mem_usage}%";break;case"fast_rule_os_cpu":e.contextType="system_log",e.customRuleExpr="@os_cpu_usage > 80",e.customRuleDesc="系统 CPU 整体使用率超过 80%，当前为 ${@os_cpu_usage}%";break;case"fast_rule_disk_usage":e.contextType="system_log",e.customRuleExpr="@disk_usage > 85",e.customRuleDesc="磁盘 (${@mounted_on}) 占比超过 85%：为 ${@disk_usage}%";break;case"fast_rule_error_log_content":e.contextType="error_log",e.customRuleExpr='@error_type == "TypeError" || @error_type ==  "SyntaxError"',e.customRuleDesc="发生错误 ${@error_type}，堆栈是：${@stack}";break;case"fast_rule_dependence_security_risk":e.contextType="xtransit_notification",e.customRuleExpr="@critical > 0 || @high > 0",e.customRuleDesc="项目依赖发现极危漏洞 ${@critical} 个，高危漏洞 ${@high} 个，请尽快升级修复";break;case"fast_rule_coredump":e.contextType="xtransit_notification",e.customRuleExpr="@core_count > 0",e.customRuleDesc="服务器在 1 分钟内生成 ${@core_count} 个 core 文件，分别为：${@core_files}，请分析查看原因！";break;case"fast_rule_agent_offline":e.contextType="xtransit_notification",e.customRuleExpr="@agentOffline",e.customRuleDesc="实例 ${@agentId} 下线，请判断是否符合预期！";break;default:e.contextType="xprofiler_log",e.customRuleExpr=void 0,e.customRuleDesc=void 0;break}},editData:function(){var e=this.modelMap,t=this.checkboxMap,r=this.editData,a=r.contextType,n=r.pushType,i=r.webhookPush,o=r.webhookType,s=r.webhookAddress,c=r.webhookSign,l=r.expression,u=r.alarmContent;e.contextType=a||"xprofiler_log",e.pushType=n||"p3",t.webhookPush=i||!1,e.webhookType=o||"dingtalk",e.webhookAddress=s,e.webhookSign=c,e.customRuleExpr=l,e.customRuleDesc=u}}};function dx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function px(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dx(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dx(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var fx=px({data:function(){return{addRuleLoading:!1,updateRuleLoading:!1,configures:[{label:"判定上下文类型",type:"selector",value:"contextType"},{label:"消息推送级别",type:"selector",value:"pushType"},{label:"附加 webhook 推送",type:"webhook",value:"webhookPush"},{label:"webhook 类型",type:"selector",value:"webhookType",dependent:"checkbox",dependentValue:"webhookPush"},{label:"webhook 地址",type:"input",value:"webhookAddress",dependent:"checkbox",dependentValue:"webhookPush",placeholderValue:"webhookType"},{label:"webhook 签名",type:"input",value:"webhookSign",dependent:"checkbox",dependentValue:"webhookPush",placeholderValue:"webhookType"},{label:"预设规则列表",type:"selector",value:"fastRules",placeholder:"自定义表达式",width:500},{label:"自定义阈值表达式",type:"input",value:"customRuleExpr",placeholder:"eg. @heap_used / @heap_limit > 0.7"},{label:"告警推送内容",type:"input",value:"customRuleDesc",placeholder:"已用堆内存超过堆上限的 70%，当前为 ${@heap_used / @heap_limit * 100}%"},{label:"",type:"button"}],checkboxMap:{webhookPush:!1},modelMap:{contextType:"xprofiler_log",pushType:"p3",webhookType:"dingtalk",webhookAddress:void 0,webhookSign:void 0,fastRules:void 0,customRuleExpr:void 0,customRuleDesc:void 0},optionMap:{contextType:[{value:"xprofiler_log",label:"X-Profiler 插件日志"},{value:"xtransit_notification",label:"X-Transit 通知信息"},{value:"system_log",label:"操作系统指标日志"},{value:"error_log",label:"Node 应用错误日志"}],pushType:[{value:"p1",label:"P1 (致电)"},{value:"p2",label:"P2 (短信)"},{value:"p3",label:"P3 (邮件通知)"},{value:"p4",label:"P4 (数据记录)"}],webhookType:[{value:"dingtalk",label:"钉钉推送"},{value:"qywx",label:"企业微信"},{value:"feishu",label:"飞书通知"}],fastRules:[{value:"fast_rule_memory",label:"进程 Heap Memory 预警"},{value:"fast_rule_cpu",label:"进程 CPU 使用率预警"},{value:"fast_rule_gc",label:"进程 GC 开销过大预警"},{value:"fast_rule_expired_request",label:"进程慢响应预警 (超过 30s)"},{value:"fast_rule_illegal_request",label:"进程异常请求预警 (4xx 5xx 占比过高)"},{value:"fast_rule_os_memory",label:"系统可用 Memory 预警"},{value:"fast_rule_os_cpu",label:"系统整体 CPU 使用率预警"},{value:"fast_rule_disk_usage",label:"系统磁盘使用率预警"},{value:"fast_rule_error_log_content",label:"应用生成特定错误日志预警"},{value:"fast_rule_dependence_security_risk",label:"应用依赖的 Npm 模块安全漏洞预警"},{value:"fast_rule_coredump",label:"Coredump 文件生成预警"},{value:"fast_rule_agent_offline",label:"实例下线预警"}]},webhookAddressPlaceholderMap:{dingtalk:"https://oapi.dingtalk.com/robot/send?access_token=xxxxxx",qywx:"https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=xxxxxx",feishu:"https://open.feishu.cn/open-apis/bot/v2/hook/xxxxxx"},webhookSignPlaceholderMap:{dingtalk:"签名秘钥（机器人设置 — 安全设置 — 加签）"}}}},ux),hx=fx,vx=(r("9be8"),Object(u["a"])(hx,rx,ax,!1,null,"3fb80234",null)),bx=vx.exports,gx=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._m(0),r("div",[r("x-loading",{attrs:{loading:e.rules_loading,type:"dot",size:"middle",top:35}}),r("x-error-message",{directives:[{name:"show",rawName:"v-show",value:e.rules_load_error,expression:"rules_load_error"}],attrs:{message:e.rules_load_error,top:20}}),r("transition",{attrs:{name:"slide-noward"}},[e.rules_loading||e.rules_load_error?e._e():r("x-setted-rules",{on:{refreshRules:e.refreshRules}})],1)],1)])},yx=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"alarm-wrapper"},[r("div",{staticClass:"section-title alarm"},[e._v("已配置规则项")])])}];function mx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Ox(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mx(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mx(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var wx=m("dashboard/alarm"),_x=wx.mapState,jx=wx.mapMutations,xx=wx.mapActions,Px={created:function(){this.cancelToken=C(),this.getRules({cancelToken:this.cancelToken.token})},beforeDestroy:function(){A(this.cancelToken)},methods:Ox({},jx(["resetState"]),{},xx(["getRules"]),{refreshRules:function(){this.getRules({cancelToken:this.cancelToken.token}),this.resetState()}}),computed:Ox({},_x(["rules_loading","rules_load_error"]))},kx=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("x-table",{attrs:{columns:e.columns,data:e.rules,noDataText:"应用下暂无已配置告警规则","no-data-head":"",hover:""},scopedSlots:e._u([{key:"pushType",fn:function(t){var a=t.row;return[r("div",{class:"rule-content"+(a.disabled?" rule-disabled":"")},[e._v(e._s(e.formatPushType(a.pushType)))])]}},{key:"contextType",fn:function(t){var a=t.row;return[r("div",{class:"rule-content"+(a.disabled?" rule-disabled":"")},[e._v(e._s(e.formatContextType(a.contextType)))])]}},{key:"expression",fn:function(t){var a=t.row;return[r("code",{class:a.disabled?" rule-disabled":""},[e._v(e._s(a.expression))])]}},{key:"alarmContent",fn:function(t){var a=t.row;return[r("div",{class:"rule-content"+(a.disabled?" rule-disabled":"")},[e._v(e._s(a.alarmContent))])]}},{key:"alarms",fn:function(t){var a=t.row;return[r("Badge",{staticClass:"setted-rule",attrs:{count:a.alarmCount,"overflow-count":"999",type:a.disabled?"normal":"error"}},[r("Button",{staticClass:"button",attrs:{type:"info",ghost:"",size:"small",disabled:a.disabled},on:{click:function(t){return e.openHistoryDrawer(a)}}},[e._v("告警历史")])],1)]}},{key:"operations",fn:function(t){var a=t.row;return[r("div",{staticClass:"operations"},[r("Button",{staticClass:"button",attrs:{type:"info",ghost:"",size:"small",disabled:a.disabled},on:{click:function(t){return e.openContactsModal(a)}}},[e._v("配置联系人")]),a.disabled?r("Button",{staticClass:"button",staticStyle:{width:"42px"},attrs:{size:"small",type:"success"},on:{click:function(t){return e.operateRule("enable",a)}}},[e._v("启用")]):r("x-dropdown",{ref:"dropdown-"+a.index,attrs:{transformY:8,color:"#2376b7",minWidth:85}},[r("div",{staticClass:"dropdown-title rule-label",attrs:{slot:"title"},slot:"title"},[e._v("更多")]),r("div",{attrs:{slot:"content"},slot:"content"},e._l(e.operations,(function(t,n){return r("div",{key:n,staticClass:"x-dropdown-li operation-wrapper",on:{click:function(r){return e.operateRule(t.value,a)}}},[r("div",{staticClass:"operation"},[e._v(e._s(t.label))])])})),0)])],1)]}}])})],1)},Dx=[];function Sx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Tx(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Sx(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sx(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Cx=m("dashboard/alarm"),Ax=Cx.mapState,Mx=Cx.mapGetters,Ex=Cx.mapMutations,Ix=Cx.mapActions,Nx={created:function(){this.cancelToken=C(),this.updateRules()},beforeDestroy:function(){A(this.cancelToken)},methods:Tx({},Ex(["setTipModal","setContactsModal","setEditModel","setHistoryDrawer"]),{},Ix(["deleteRule","putRuleStatus"]),{formatPushType:function(e){var t="";switch(e){case"p1":t="P1 (致电)";break;case"p2":t="P2 (短信)";break;case"p3":t="P3 (邮件通知)";break;case"p4":t="P4 (数据记录)";break;default:break}return t},updateRules:function(){var e=this.rules_data;Array.isArray(e)&&(this.rules=e.map((function(e,t){var r=Object.assign({disabled:0===Number(e.status),index:t},e);return r})))},openHistoryDrawer:function(e){var t=e.strategyId,r=e.expression;this.setHistoryDrawer({status:!0,historyData:{strategyId:t,expression:r}})},openContactsModal:function(e){this.setContactsModal({status:!0,data:e})},doAction:function(e,t,r){var a=this,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4?arguments[4]:void 0,o={title:e,error:void 0,loading:!1};this.setTipModal({status:!0,data:o}),o.loading=!0,this[t]({cancelToken:this.cancelToken.token,data:Tx({},r)}).then((function(){a.setTipModal({status:!1}),n&&a.$emit("refreshRules"),"function"===typeof i&&i()})).catch((function(e){o.loading=!1,o.error=e.message}))},delete:function(e){var t=e.strategyId;this.doAction("删除规则","deleteRule",{strategyId:t})},updateStatus:function(e,t){var r=e.strategyId,a=0===t?"禁用规则":"启用规则";this.doAction(a,"putRuleStatus",{strategyId:r,status:t},!1,(function(){return e.disabled=!t}))},operateRule:function(e,t){"edit"===e&&this.setEditModel({status:!0,data:t}),"delete"===e&&this.delete(t),"disable"===e&&this.updateStatus(t,0),"enable"===e&&this.updateStatus(t,1);var r=this.$refs["dropdown-".concat(t.index)];r&&r.mouseout()}}),computed:Tx({},Ax(["rules_data"]),{},Mx(["formatContextType"])),watch:{rules_data:function(){this.updateRules()}}};function Rx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Lx(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rx(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rx(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Fx=Lx({data:function(){return{columns:[{title:"推送级别",value:"pushType",width:130,left:20},{title:"上下文类型",value:"contextType",width:154},{title:"阈值表达式",value:"expression",width:300},{title:"告警推送内容",value:"alarmContent"},{title:"已触发告警",value:"alarms",width:105,align:"center"},{title:"操作",value:"operations",width:185,align:"center"}],operations:[{label:"编辑",value:"edit"},{label:"删除",value:"delete"},{label:"禁用",value:"disable"}],rules:[]}}},Nx),$x=Fx,zx=(r("cb41"),Object(u["a"])($x,kx,Dx,!1,null,"691ef998",null)),Bx=zx.exports;function Ux(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Gx(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ux(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ux(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Hx=Gx({components:{"x-setted-rules":Bx}},Px),Wx=Hx,Xx=(r("858e"),Object(u["a"])(Wx,gx,yx,!1,null,"36e937c0",null)),qx=Xx.exports,Kx=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"x-modal-content"},[r("x-loading",{attrs:{loading:e.tipData.loading,type:"dot",size:"middle"}}),r("x-error-message",{directives:[{name:"show",rawName:"v-show",value:e.tipData.error,expression:"tipData.error"}],attrs:{message:e.tipData.error}})],1),r("div",{staticClass:"x-modal-footer"},[e.tipData.loading?e._e():r("Button",{attrs:{type:"primary",ghost:""},on:{click:e.closeTipModal}},[e._v("关闭")])],1)])},Yx=[];function Vx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Qx(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vx(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vx(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Zx=m("dashboard/alarm"),Jx=Zx.mapState,eP=Zx.mapMutations,tP={methods:Qx({},eP(["setTipModal"]),{closeTipModal:function(){this.setTipModal({status:!1})}}),computed:Qx({},Jx(["tipData"]))};function rP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function aP(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rP(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rP(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var nP=aP({},tP),iP=nP,oP=Object(u["a"])(iP,Kx,Yx,!1,null,null,null),sP=oP.exports,cP=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"x-modal-content"},[r("x-loading",{attrs:{loading:e.contacts_loading,type:"dot",size:"middle"}}),r("x-error-message",{directives:[{name:"show",rawName:"v-show",value:e.contacts_load_error,expression:"contacts_load_error"}],attrs:{message:e.contacts_load_error}}),r("transition",{attrs:{name:"slide-noward"}},[e.contacts_loading||e.contacts_load_error?e._e():r("x-contacts-settings")],1)],1),r("div",{staticClass:"x-modal-footer"},[r("Button",{directives:[{name:"show",rawName:"v-show",value:!e.contacts_loading,expression:"!contacts_loading"}],attrs:{type:"primary",ghost:""},on:{click:e.closeContactsModal}},[e._v("关闭")])],1)])},lP=[];function uP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function dP(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?uP(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uP(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var pP=m("dashboard/alarm"),fP=pP.mapState,hP=pP.mapMutations,vP=m("dashboard/alarm/contact"),bP=vP.mapState,gP=vP.mapActions,yP={created:function(){this.cancelToken=C();var e=this.contactsData.strategyId;this.getContacts({cancelToken:this.cancelToken.token,strategyId:e})},beforeDestroy:function(){A(this.cancelToken)},methods:dP({},hP(["setContactsModal"]),{},gP(["getContacts"]),{closeContactsModal:function(){this.setContactsModal({status:!1})}}),computed:dP({},fP(["contactsData"]),{},bP(["contacts_loading","contacts_load_error"]))},mP=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Alert",{staticClass:"x-alert tip",attrs:{type:"info"}},[r("div",{staticClass:"alert-group"},[r("Icon",{staticStyle:{color:"#2376b7"},attrs:{type:"ios-alert-outline"}}),r("div",{staticClass:"alert-desc"},[r("span",[e._v("规则")]),r("code",{staticClass:"expression"},[e._v(" "+e._s(e.contactsData.expression)+" ")]),r("span",[e._v("联系人信息")])])],1)]),r("div",{staticClass:"alarm-section"},[e._v("已添加联系人")]),r("x-table",{attrs:{columns:e.contactsColumns,data:e.contacts,noDataText:"规则下未添加告警联系人","no-data-head":""},scopedSlots:e._u([{key:"userInfo",fn:function(t){var a=t.row;return[r("div",{staticClass:"content"},[e._v(e._s(a.userInfo))])]}},{key:"operation",fn:function(t){var a=t.row;return[r("Button",{staticClass:"button",attrs:{type:"info",ghost:"",size:"small",loading:a.loading},on:{click:function(t){return e.remove(a)}}},[e._v("移出联系人列表")])]}}])}),r("div",{staticClass:"alarm-section"},[e._v("可添加联系人")]),r("x-table",{attrs:{columns:e.remainMemberColumns,data:e.remainMembers,noDataText:"没有剩余可添加的联系人","no-data-head":""},scopedSlots:e._u([{key:"userInfo",fn:function(t){var a=t.row;return[r("div",{staticClass:"content"},[e._v(e._s(a.userInfo))])]}},{key:"operation",fn:function(t){var a=t.row;return[r("Button",{staticClass:"button",attrs:{type:"info",ghost:"",size:"small",loading:a.loading},on:{click:function(t){return e.add(a)}}},[e._v("添加至联系人项")])]}}])})],1)},OP=[];function wP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function _P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wP(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wP(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var jP=m("dashboard/alarm"),xP=jP.mapState,PP=jP.mapMutations,kP=m("dashboard/alarm/contact"),DP=kP.mapState,SP=kP.mapActions,TP={created:function(){this.cancelToken=C(),this.updateContacts()},beforeDestroy:function(){A(this.cancelToken)},methods:_P({},PP(["setTipModal"]),{},SP(["removeContact","addContact"]),{formatList:function(e){var t=e.map((function(e,t){var r=Object.assign({loading:!1,index:t},e);return r}));return t.sort((function(e,t){return Number(e.userId)>Number(t.userId)?1:-1})),t},updateContacts:function(){var e=this.contacts_data,t=e.contacts,r=e.remainMembers;Array.isArray(t)&&(this.contacts=this.formatList(t)),Array.isArray(r)&&(this.remainMembers=this.formatList(r))},doAction:function(e,t,r,a){var n=this;e.loading=!0,this[t]({cancelToken:this.cancelToken.token,data:{strategyId:this.contactsData.strategyId,userId:e.userId}}).then((function(){return a()})).catch((function(e){var t={title:r,error:e.message,loading:!1};n.setTipModal({status:!0,data:t})})).then((function(){return e.loading=!1}))},remove:function(e){var t=this;this.doAction(e,"removeContact","移除联系人",(function(){t.contacts_data.contacts.splice(e.index,1);var r={userId:e.userId,userInfo:e.userInfo};t.contacts_data.remainMembers.push(r)}))},add:function(e){var t=this;this.doAction(e,"addContact","添加联系人",(function(){t.contacts_data.remainMembers.splice(e.index,1);var r={userId:e.userId,userInfo:e.userInfo};t.contacts_data.contacts.push(r)}))}}),computed:_P({},xP(["contactsData"]),{},DP(["contacts_data"])),watch:{"contacts_data.contacts":function(){this.updateContacts()},"contacts_data.remainMembers":function(){this.updateContacts()}}};function CP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function AP(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?CP(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CP(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var MP=AP({data:function(){return{contacts:[],contactsColumns:[{title:"成员信息",value:"userInfo",left:23},{title:"操作",value:"operation",align:"center",width:150}],remainMembers:[],remainMemberColumns:[{title:"成员信息",value:"userInfo",left:23},{title:"操作",value:"operation",align:"center",width:150}]}}},TP),EP=MP,IP=(r("3dc7"),Object(u["a"])(EP,mP,OP,!1,null,"47035cb2",null)),NP=IP.exports;function RP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function LP(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?RP(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RP(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var FP=LP({components:{"x-contacts-settings":NP}},yP),$P=FP,zP=Object(u["a"])($P,cP,lP,!1,null,null,null),BP=zP.exports,UP=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"history"},[r("div",{staticClass:"header"},[r("span",[e._v("规则")]),r("code",[e._v(" "+e._s(e.historyData.expression)+" ")]),r("span",[e._v("在 24h 内存在以下")]),r("code",[e._v(" "+e._s(e.totalCount)+" ")]),r("span",[e._v("条告警历史记录")])]),r("div",{staticClass:"content"},[r("x-loading",{attrs:{loading:e.history_loading,type:"dot",size:"middle",top:"calc(40vh)"}}),r("x-error-message",{directives:[{name:"show",rawName:"v-show",value:e.history_load_error,expression:"history_load_error"}],attrs:{message:e.history_load_error,top:"calc(40vh - 22px)"}}),r("transition",{attrs:{name:"slide-noward"}},[r("x-history-content",{directives:[{name:"show",rawName:"v-show",value:!e.history_loading&&!e.history_load_error,expression:"!history_loading && !history_load_error"}],on:{historyCount:e.updateCount}})],1)],1)])},GP=[];function HP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function WP(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?HP(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HP(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var XP=m("dashboard/alarm"),qP=XP.mapState,KP=m("dashboard/alarm/history"),YP=KP.mapState,VP={methods:{updateCount:function(e){this.totalCount=e}},computed:WP({},qP(["historyData"]),{},YP(["history_loading","history_load_error"]))},QP=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"history-content"},[r("x-table",{attrs:{columns:e.columns,data:e.history,noDataText:"规则下暂无告警历史记录","no-data-head":"",stribe:""},scopedSlots:e._u([{key:"time",fn:function(t){var a=t.row;return[r("div",{staticClass:"alarm-content"},[e._v(e._s(e.formatTime(a.time)))])]}},{key:"contextType",fn:function(t){var a=t.row;return[r("div",{staticClass:"alarm-content"},[e._v(e._s(e.formatContextType(a.contextType)))])]}},{key:"appInfo",fn:function(t){var a=t.row;return[r("div",{staticClass:"alarm-content"},[e._v(e._s(a.appInfo))])]}},{key:"agentId",fn:function(t){var a=t.row;return[r("div",{staticClass:"alarm-content"},[e._v(e._s(a.agentId))])]}},{key:"alarmContent",fn:function(t){var a=t.row;return[r("div",{staticClass:"alarm-content"},[e._v(e._s(a.alarmContent))])]}},{key:"operation",fn:function(t){var a=t.row;return[r("Button",{staticClass:"button",attrs:{type:"info",size:"small",to:a.detailPath,target:"_blank"}},[e._v("查看详情")])]}}])}),e.totaHistoryCount?r("div",{staticClass:"pagination"},[r("Page",{attrs:{total:e.totaHistoryCount,"page-size":e.pageSize,current:e.currentPage,size:"small","show-elevator":""},on:{"on-change":e.changeHistoryPage}})],1):e._e()],1)},ZP=[];function JP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ek(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?JP(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JP(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var tk=m("dashboard/alarm"),rk=tk.mapState,ak=tk.mapGetters,nk=m("dashboard/alarm/history"),ik=nk.mapState,ok=nk.mapActions,sk={created:function(){this.cancelToken=C();var e=this.$route.query;e.page?this.currentPage=Number(e.page):this.currentPage=1},beforeDestroy:function(){A(this.cancelToken)},methods:ek({},ok(["getAlarmHistory"]),{formatTime:function(e){return Qn()(e).format("YYYY-MM-DD HH:mm:ss")},refreshAlarmHistory:function(){var e=this.historyData.strategyId;this.getAlarmHistory({cancelToken:this.cancelToken.token,data:{strategyId:e,currentPage:this.currentPage,pageSize:this.pageSize}})},changeHistoryPage:function(e){this.currentPage=e}}),computed:ek({},rk(["historyData"]),{},ak(["formatContextType"]),{},ik(["history_data"])),watch:{history_data:function(){var e=this.history_data,t=e.list,r=e.count;Array.isArray(t)&&(_(r)&&(this.totaHistoryCount=r,this.$emit("historyCount",r)),this.history=t.map((function(e){var t=Object.assign({},e);return t})))},totaHistoryCount:function(){if(this.totaHistoryCount){var e=Math.ceil(this.totaHistoryCount/this.pageSize);this.currentPage>e&&(this.currentPage=e)}},$route:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];I.call(this,t,"page","currentPage")},currentPage:function(){if(this.currentPage){this.refreshAlarmHistory();for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];N.call(this,"page","currentPage",t)}}}};function ck(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function lk(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ck(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ck(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var uk=lk({data:function(){return{currentPage:void 0,pageSize:50,totaHistoryCount:0,nessaryQueryArgs:["alarm-history","historyData"],columns:[{title:"告警时间",value:"time",width:165},{title:"上下文类型",value:"contextType",width:155},{title:"实例 ID",value:"agentId",width:250},{title:"消息内容",value:"alarmContent"},{title:"操作",value:"operation",align:"center",width:110}],history:[]}}},sk),dk=uk,pk=(r("c755"),Object(u["a"])(dk,QP,ZP,!1,null,"33127376",null)),fk=pk.exports;function hk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function vk(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hk(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hk(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var bk=vk({components:{"x-history-content":fk},data:function(){return{totalCount:0}}},VP),gk=bk,yk=(r("2ac1"),Object(u["a"])(gk,UP,GP,!1,null,"6607d5d8",null)),mk=yk.exports;function Ok(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function wk(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ok(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ok(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _k=wk({props:{appName:String,title:String,currentUserIsOwner:Boolean},components:{"x-alarm-configure":bx,"x-alarm-rules":qx,"x-tip-content":sP,"x-contacts":BP,"x-history":mk},data:function(){return{modalTip:"alarm-tip",modalContacts:"alarm-contacts",drawerHistory:"alarm-history",blackQueryKeys:["page"],forceGoBack:!0}}},tx),jk=_k,xk=(r("8018"),Object(u["a"])(jk,Rj,Lj,!1,null,"4788dd5e",null)),Pk=xk.exports,kk=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"detail-content"},[r("x-dashboard-title",{attrs:{appName:e.appName,dashboardTitle:e.title,owner:e.currentUserIsOwner,line:"",jump:""}}),r("x-loading",{attrs:{loading:e.settings_loading,type:"dot",size:"middle",top:"calc(40vh - 45px)"}}),r("x-error-message",{directives:[{name:"show",rawName:"v-show",value:e.settings_load_error,expression:"settings_load_error"}],attrs:{message:e.settings_load_error,top:"calc(40vh -  70px)"}}),r("transition",{attrs:{name:"slide-noward"}},[e.settings_loading||e.settings_load_error?e._e():r("x-settings-content")],1),r("x-modal",{ref:"modify",attrs:{title:"修改应用名称",padding:0,"hide-footer":""},on:{canceled:e.closeModifyModal}},[r("x-name-modify",{attrs:{slot:"content"},slot:"content"})],1),r("x-modal",{ref:"delete",attrs:{title:"删除应用",padding:0,width:650,"hide-footer":""},on:{canceled:e.closeDeleteModal}},[r("x-app-delete",{attrs:{slot:"content"},slot:"content"})],1)],1)},Dk=[];function Sk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Tk(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Sk(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sk(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ck=m("dashboard/settings"),Ak=Ck.mapState,Mk=Ck.mapMutations,Ek=Ck.mapActions,Ik=U("modalModify","modifyModal","modify","setModifyModal"),Nk=Ik.mapMethods,Rk=Ik.mapWatch,Lk=Ik.handleMounted,Fk=U("modalDelete","deleteModal","delete","setDeleteModal"),$k=Fk.mapMethods,zk=Fk.mapWatch,Bk=Fk.handleMounted,Uk={created:function(){this.cancelToken=C(),this.getSettingsInfo({cancelToken:this.cancelToken.token})},mounted:function(){Lk.call(this,"handleModifyModal"),Bk.call(this,"handleDeleteModal")},beforeDestroy:function(){A(this.cancelToken)},methods:Tk({},Mk(["setModifyModal","setDeleteModal"]),{},Ek(["getSettingsInfo"]),{},Nk("handleModifyModal"),{},$k("handleDeleteModal"),{closeModifyModal:function(){this.setModifyModal({status:!1})},closeDeleteModal:function(){this.setDeleteModal({status:!1})}}),computed:Tk({},Ak(["settings_loading","settings_load_error","modifyModal","deleteModal"])),watch:Tk({},Rk,{},zk,{$route:function(e){this.handleModifyModal(e.query),this.handleDeleteModal(e.query)}})},Gk=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"content"},[e._l(e.settings,(function(t,a){return r("div",{key:a,staticClass:"wrapper",style:0!==a?"margin-top: 15px;":""},[r("div",{staticClass:"item-label"},[e._v(e._s(t.label)+":")]),r("div",{staticClass:"item-value"},[e._v(e._s(e.settings_data[t.value]))])])})),r("div",{staticClass:"wrapper operations"},[r("div",{staticClass:"item-label"}),r("div",{staticClass:"item-value"},[r("Button",{staticClass:"button",attrs:{type:"info",size:"small"},on:{click:e.openNameModifyModal}},[e._v("修改名称")]),r("Button",{staticClass:"button",staticStyle:{"margin-left":"11px"},attrs:{type:"error",size:"small"},on:{click:e.openDeleteAppModal}},[e._v("删除应用")])],1)])],2)},Hk=[];function Wk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Xk(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wk(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wk(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var qk=m("dashboard/settings"),Kk=qk.mapState,Yk=qk.mapMutations,Vk={methods:Xk({},Yk(["setModifyModal","setDeleteModal"]),{openNameModifyModal:function(){this.setModifyModal({status:!0})},openDeleteAppModal:function(){this.setDeleteModal({status:!0})}}),computed:Xk({},Kk(["settings_data"]))};function Qk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Zk(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qk(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qk(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Jk=Zk({data:function(){return{settings:[{label:"应用名称",value:"name"},{label:"应用 ID",value:"appId"},{label:"应用秘钥",value:"secret"}]}}},Vk),eD=Jk,tD=(r("3585"),Object(u["a"])(eD,Gk,Hk,!1,null,"39225e45",null)),rD=tD.exports,aD=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"x-modal-content",staticStyle:{"min-height":"120px"}},[r("x-loading",{attrs:{loading:e.loading,type:"dot",size:"middle",top:30}}),r("x-error-message",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}],attrs:{message:e.error,top:10}}),e.loading||e.error?e._e():r("div",{staticClass:"x-modal-results new-app"},[r("Input",{attrs:{placeholder:"请输入新的应用名称"},model:{value:e.newAppName,callback:function(t){e.newAppName=t},expression:"newAppName"}},[r("span",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("应用名称")])]),e._m(0)],1)],1),r("div",{staticClass:"x-modal-footer"},[e.error?r("Button",{attrs:{type:"primary",ghost:""},on:{click:e.closeModifyModal}},[e._v("关闭")]):e._e(),e.loading||e.error?e._e():r("Button",{attrs:{type:"primary",ghost:""},on:{click:e.closeModifyModal}},[e._v("取消")]),e.loading||e.error?e._e():r("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary"},on:{click:e.submitNewAppName}},[e._v("提交")])],1)])},nD=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("p",{staticClass:"modal-attention"},[r("strong",[e._v("注意:")]),r("span",{staticStyle:{"margin-left":"10px"}},[e._v("应用名称最大长度不能超过 30 个字符")])])}];function iD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function oD(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?iD(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iD(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var sD=m("dashboard/settings"),cD=sD.mapMutations,lD=sD.mapActions,uD={created:function(){this.cancelToken=C()},beforeDestroy:function(){A(this.cancelToken)},methods:oD({},cD(["setModifyModal","updateSettingsAppName"]),{},lD(["putNewAppName"]),{closeModifyModal:function(){this.setModifyModal({status:!1})},submitNewAppName:function(){var e=this,t=this.newAppName.trim();t?t.length>30?this.$Message.error("应用名称不能超过 30 个字符！"):(this.loading=!0,this.putNewAppName({cancelToken:this.cancelToken.token,newAppName:t}).then((function(){e.setModifyModal({status:!1}),e.updateSettingsAppName(t)})).catch((function(t){e.error=t.message,e.loading=!1}))):this.$Message.error("应用名称不能为空！")}})};function dD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function pD(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dD(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dD(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var fD=pD({data:function(){return{loading:!1,error:void 0,newAppName:""}}},uD),hD=fD,vD=(r("123e"),Object(u["a"])(hD,aD,nD,!1,null,"8fe84b32",null)),bD=vD.exports,gD=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"x-modal-content"},[r("x-loading",{attrs:{loading:e.loading,type:"dot",size:"middle",top:30}}),r("x-error-message",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}],attrs:{message:e.error,top:10}}),e.loading||e.error?e._e():r("div",{staticClass:"warning"},[r("Icon",{staticClass:"warning-icon",attrs:{type:"md-warning"}}),r("div",{staticClass:"warning-label"},[e._v("删除应用后所有实例都会断开连接，且监控数据、性能分析文件等都会丢失，请谨慎操作！")])],1)],1),r("div",{staticClass:"x-modal-footer"},[e.error?r("Button",{attrs:{type:"primary",ghost:""},on:{click:e.closeDeleteModal}},[e._v("关闭")]):e._e(),e.loading||e.error?e._e():r("Button",{attrs:{type:"primary",ghost:""},on:{click:e.closeDeleteModal}},[e._v("取消")]),e.loading||e.error?e._e():r("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary"},on:{click:e.submitAppDeletion}},[e._v("确认删除")])],1)])},yD=[];function mD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function OD(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mD(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mD(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var wD=m("dashboard/settings"),_D=wD.mapMutations,jD=wD.mapActions,xD={created:function(){this.cancelToken=C()},beforeDestroy:function(){A(this.cancelToken)},methods:OD({},_D(["setDeleteModal"]),{},jD(["deleteApp"]),{closeDeleteModal:function(){this.setDeleteModal({status:!1})},submitAppDeletion:function(){var e=this;this.loading=!0,this.deleteApp({cancelToken:this.cancelToken.token}).then((function(){e.setDeleteModal({status:!1}),e.$router.push({path:"/console",query:{type:"myApps"}})})).catch((function(t){e.error=t.message,e.loading=!1}))}})};function PD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function kD(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?PD(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PD(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var DD=kD({data:function(){return{loading:!1,error:void 0}}},xD),SD=DD,TD=(r("ff4a"),Object(u["a"])(SD,gD,yD,!1,null,"33406fb0",null)),CD=TD.exports;function AD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function MD(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?AD(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AD(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ED=MD({props:{appName:String,title:String,currentUserIsOwner:Boolean},components:{"x-settings-content":rD,"x-name-modify":bD,"x-app-delete":CD},data:function(){return{modalModify:"name-modify",modalDelete:"app-delete"}}},Uk),ID=ED,ND=Object(u["a"])(ID,kk,Dk,!1,null,null,null),RD=ND.exports;function LD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function FD(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?LD(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LD(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var $D=FD({components:{"x-header":ca,"x-sider":Rn,"x-instance":Gd,"x-file":P_,"x-team":Nj,"x-alarm":Pk,"x-setting":RD},data:function(){return{appName:y(Nr.nameUnknown),currentUserIsOwner:!1,menuTab:null,activeContent:{},contentGroup:[{component:"x-instance",value:"instance",title:y(Nr.instanceTitle)},{component:"x-file",value:"file",title:y(Nr.fileTitle)},{component:"x-team",value:"team",title:y(Nr.teamTitle)},{component:"x-alarm",value:"alarm",title:y(Nr.alarmTitle)},{component:"x-setting",value:"setting",title:y(Nr.settingTitle)}]}}},kn),zD=$D,BD=(r("fba0"),Object(u["a"])(zD,yn,mn,!1,null,"5b64b8a4",null)),UD=BD.exports,GD=[{path:"/",redirect:{path:"/console"}},{path:"/console",component:gn},{path:"/app/:appId/:menuTab",component:UD}],HD=r("f825"),WD=r.n(HD),XD=r("2113"),qD=r.n(XD),KD=(r("f8ce"),r("1ccf"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{position:"relative"}},[r("div",{ref:"chartip",staticClass:"chartip box-shadow",style:e.chartipStyle},[r("div",{class:e.type},[e._t("header"),e._t("content"),e._t("footer")],2)])])}),YD=[],VD={props:{noArrow:Boolean,maxWidth:Number,minWidth:Number},data:function(){return{type:""}},mounted:function(){this.chartip=this.$refs.chartip},methods:{show:function(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=this.chartip.style;n["opacity"]=1,n["z-index"]=1200;var i=this.tipComputedStyle,o=parseInt(i.width,10),s=parseInt(i.height),c=e.offsetX,l=e.offsetY,u=12,d=10;c+o+u<r?(n["left"]=c+u+"px",n["right"]="unset",this.noArrow||(this.type="left")):(n["left"]="unset",n["right"]=a+r-c+u+"px",this.noArrow||(this.type="right")),n["top"]=l-s/2>t?l-s/2-d+"px":"0"},hidden:function(){var e=this.chartip.style;e["opacity"]=0,e["z-index"]=-9999}},computed:{tipComputedStyle:function(){return window.getComputedStyle(this.chartip)},chartipStyle:function(){var e="";return this.noArrow||(e+="padding: 0 5px;",e+="border-radius: 3px;"),_(this.maxWidth)&&(e+="max-width: "+this.maxWidth+"px;"),_(this.minWidth)&&(e+="min-width: "+this.minWidth+"px;"),e}}},QD=VD,ZD=(r("2dc3"),Object(u["a"])(QD,KD,YD,!1,null,"7f5bb246",null)),JD=ZD.exports,eS=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"detail-title"},[e.jump?r("div",{staticClass:"detail-app-name",on:{click:function(t){return e.jumpTo("/console")}}},[e._v(" "+e._s(e.appName)+" ")]):r("div",{staticClass:"detail-app-name-nojump"},[e._v(e._s(e.appName))]),r("div",{staticClass:"detail-app-seg"},[r("Icon",{attrs:{type:"ios-arrow-forward"}})],1),r("div",[e._v(e._s(e.dashboardTitle))]),e._t("extra")],2),e.line?r("div",{staticClass:"line"}):e._e()])},tS=[],rS={props:{appName:String,dashboardTitle:String,line:Boolean,jump:Boolean,owner:{type:Boolean,default:!0}},methods:{jumpTo:function(e){var t={};this.owner?t.type="myApps":t.type="joinedApps",this.$router.push({path:e,query:t})}}},aS=rS,nS=(r("9f6d"),Object(u["a"])(aS,eS,tS,!1,null,"bd57d998",null)),iS=nS.exports,oS=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("transition",{attrs:{name:"drawer"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"},{name:"dom-portal",rawName:"v-dom-portal"}],staticClass:"mask"},[r("transition",{attrs:{name:"drawer-container"}},[e.show?r("div",{staticClass:"container"},[r("div",{staticClass:"wrapper"},[r("div",{staticClass:"close",on:{click:e.close}},[r("Icon",{staticClass:"close-icon",attrs:{type:"md-archive"}})],1),r("div",{staticClass:"content"},[r("div",[e._t("header")],2),r("div",[e._t("content")],2)])])]):e._e()])],1)])},sS=[],cS={data:function(){return{show:!1}},methods:{open:function(){if(!this.show){var e=function(e){e.preventDefault()};document.body.style.overflow="hidden",document.body.style.poxition="fixed",document.addEventListener("touchmove",e,!1),this.show=!0}},close:function(){if(this.show){var e=function(e){e.preventDefault()};document.body.style.overflow="unset",document.removeEventListener("touchmove",e,!1),this.show=!1,this.$emit("close")}}}},lS=cS,uS=(r("176e"),Object(u["a"])(lS,oS,sS,!1,null,"704f6649",null)),dS=uS.exports,pS=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"dropdown",style:e.dropdownStyle,on:{mouseover:function(t){return e.mouseover()},mousemove:function(t){return e.mousemove()},mouseout:function(t){return e.mouseout()}}},[r("div",{staticClass:"dropdown-list"},[e._t("title",[r("div",{style:e.titleStyle},[e._v(e._s(e.title))])]),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.notShowArrow,expression:"!notShowArrow"}],staticClass:"dropdown-icon-translate"},[r("Icon",{staticClass:"dropdown-icon-rotate",attrs:{type:"ios-arrow-down"}})],1)],2),r("div",{ref:"dropdown-content",class:"dropdown-content box-shadow "+e.posit,style:e.contentStyle},[e._t("content")],2)])},fS=[],hS={props:{title:String,position:String,transformY:Number,color:String,minWidth:Number,fontSize:Number,paddingBottom:Number,notShowArrow:{type:Boolean,default:!1},rawTop:{type:Number,default:18},contentTop:{type:Number,default:15},contentBottom:{type:Number,default:15},contentLeft:{type:Number,default:0},contentRight:{type:Number,default:0}},mounted:function(){this.style=this.$refs["dropdown-content"].style},methods:{mouseover:function(){var e=this.style;e["opacity"]=1,e["pointer-events"]="inherit",e["transform"]="translateY(".concat(this.ty,")")},mousemove:function(){var e=this.style;e["opacity"]=1,e["pointer-events"]="inherit",e["transform"]="translateY(".concat(this.ty,")")},mouseout:function(){var e=this.style;e["opacity"]=0,e["pointer-events"]="none",e["transform"]="translateY(0)"}},computed:{posit:function(){return this.position||"right"},ty:function(){return(this.transformY||6)+"px"},dropdownStyle:function(){var e="";return this.color&&(e+="color: ".concat(this.color,";")),e},contentStyle:function(){var e="";_(this.minWidth)?e+="min-width: ".concat(this.minWidth,"px;"):e+="min-width: 100px;";var t="top: ".concat(this.rawTop,"px;"),r="padding: ".concat(this.contentTop,"px ").concat(this.contentRight,"px ").concat(this.contentBottom,"px ").concat(this.contentLeft,"px;");return e+=t+r,e},titleStyle:function(){var e="width: 100%; text-align: center;",t=this.fontSize||12,r=_(this.paddingBottom)?this.paddingBottom:6,a="padding-bottom: ".concat(r,"px;font-size: ").concat(t,"px;");return e+a}}},vS=hS,bS=(r("3c4e"),Object(u["a"])(vS,pS,fS,!1,null,"5ca0be61",null)),gS=bS.exports,yS=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"error",style:e.style},[r("transition",{attrs:{name:"slide-noward"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:0===e.theme,expression:"theme === 0"}],staticClass:"container"},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.icon,expression:"icon"}],staticClass:"icon-wrapper"},[r("Icon",{staticClass:"icon",attrs:{type:"ios-alert-outline"}})],1),r("span",[e._v(e._s(e.message))])])]),r("transition",{attrs:{name:"slide-noward"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:1===e.theme,expression:"theme === 1"}],staticStyle:{width:"100%"}},[r("div",{staticClass:"theme-1 leftpart"},[e._v(e._s(e.message&&e.message.left))]),r("div",{staticClass:"theme-1 rightpart"},[e._v(e._s(e.message&&e.message.right))])])])],1)},mS=[],OS={props:{message:[String,Object],top:[Number,String],theme:{type:Number,default:0},icon:{type:Boolean,default:!0}},computed:{style:function(){var e="";return this.top&&(_(this.top)?e+="margin-top: "+this.top+"px;":e+="margin-top: "+this.top+";"),e}}},wS=OS,_S=(r("44c2"),Object(u["a"])(wS,yS,mS,!1,null,"31364cc3",null)),jS=_S.exports,xS=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",["spin"===e.loadingType?r("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"spin-loading",style:e.style},[r("Spin",{attrs:{size:e.spinSize}})],1):e._e(),"dot"===e.loadingType?r("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"dot-loading",style:e.style},["small"===e.spinSize?r("div",{staticClass:"dot-pulse-base dot-pulse-small"}):"middle"===e.spinSize?r("div",{staticClass:"dot-pulse-base dot-pulse-middle"}):r("div",{staticClass:"dot-pulse-base dot-pulse"})]):e._e()])},PS=[],kS={props:{loading:Boolean,top:[Number,String],size:String,type:String},computed:{style:function(){var e="";return this.top&&(_(this.top)?e+="margin-top: "+this.top+"px;":e+="margin-top: "+this.top+";"),e},spinSize:function(){var e=this.size||"large";return["large","middle","small"].includes(e)||(e=void 0),e},loadingType:function(){var e=this.type||"spin";return e}}},DS=kS,SS=(r("1574"),Object(u["a"])(DS,xS,PS,!1,null,"e8a1616e",null)),TS=SS.exports,CS=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Modal",{staticClass:"x-modal",attrs:{styles:e.modalStyle,"mask-closable":!1,width:e.width,"footer-hide":e.hideFooter,fullscreen:e.fullscreen},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[r("template",{slot:"header"},[r("div",[r("Icon",{staticClass:"modal-title-icon",attrs:{type:e.iconType}}),r("span",{staticStyle:{"user-select":"none"}},[e._v(e._s(e.title))])],1)]),r("template",{slot:"close"},[r("Icon",{staticClass:"modal-title-close",attrs:{type:"md-close"}})],1),r("transition",{attrs:{name:"modal-content"}},[e.show?r("div",{style:e.contentStyle},[e._t("content")],2):e._e()]),r("template",{slot:"footer"},[e._t("footer",[r("Button",{staticStyle:{"margin-right":"2px"},attrs:{type:"primary",ghost:""},on:{click:e.cancelModal}},[e._v(e._s(e.cancel))]),r("Button",{attrs:{type:"primary",loading:e.loading},on:{click:e.submitModal}},[e._v(e._s(e.submit))])])],2)],2)],1)},AS=[],MS={props:{type:String,title:String,okText:String,okLoadingText:String,cancelText:String,loading:Boolean,width:Number,hideFooter:Boolean,padding:Number,fullscreen:Boolean,top:[Number,String]},data:function(){return{show:!1}},methods:{showModal:function(){this.show=!0},cancelModal:function(e){this.show=!1,e&&this.$emit("canceled")},submitModal:function(){!1!==this.loading&&!0!==this.loading&&(this.showModal=!1),this.$emit("submited")}},computed:{iconType:function(){var e="md-information-circle";return"error"===this.type&&(e="md-alert"),"error"===this.type&&(e="md-close-circle"),e},submit:function(){return this.loading&&this.okLoadingText?this.okLoadingText:this.okText||"确定"},cancel:function(){return this.cancelText||"取消"},contentStyle:function(){var e="",t=16;return _(this.padding)&&(t=this.padding),e+="padding: "+t+"px;",e},modalStyle:function(){var e={};return this.top&&(_(this.top)?e.top=this.top+"px":e.top=this.top),e}},watch:{show:function(){this.show||this.cancelModal(!0)}}},ES=MS,IS=Object(u["a"])(ES,CS,AS,!1,null,null,null),NS=IS.exports,RS=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("table",{staticClass:"table",style:e.getTableStyle},[r("thead",{staticClass:"table-background"},[e.data&&(e.noDataHead||e.data.length)?r("tr",e._l(e.columns,(function(t,a){return r("th",{key:a,style:e.getCellStyle(t,!0)},[e._v(e._s(t.title))])})),0):e._e()]),r("tbody",[e.data&&e.data.length?e._e():r("tr",[r("td",{staticClass:"no-data",attrs:{colspan:e.columns.length}},[e._v(e._s(e.noDataText||"暂无信息"))])]),e._l(e.data,(function(t,a){return r("tr",{key:a,class:e.getClasses(a)},e._l(e.columns,(function(n,i){return r("td",{key:i,staticClass:"row-data",style:e.getCellStyle(n)},[e._t(n.value,[e._v(e._s(t[n.value]))],{row:t,index:a})],2)})),0)}))],2)])},LS=[],FS={props:{columns:Array,data:Array,noDataText:String,noDataHead:Boolean,hover:Boolean,stribe:Boolean,stribe2:Boolean,border:Boolean,fontSize:[Number,String]},methods:{getCellStyle:function(e,t){var r="";return _(e.width)?r+="width: "+e.width+"px;":e.width&&(r+="width: "+e.width+";"),_(e.left)&&(r+="padding-left: "+e.left+"px;"),_(e.titleLeft)&&t&&(r+="padding-left: "+e.titleLeft+"px;"),e.align&&(r+="text-align: "+e.align+";"),this.border&&(r+="border: 1px solid #e7e7e8"),r},getClasses:function(e){var t="";return this.hover&&(t+="tr-hover "),this.stribe&&e%2===1&&(t+="table-background "),this.stribe2&&e%2===1&&(t+="table-background2 "),t}},computed:{getTableStyle:function(){var e="";return this.fontSize&&(_(this.fontSize)?e+="font-size: "+this.fontSize+"px;":e+="font-size: "+this.fontSize+";"),e}}},$S=FS,zS=(r("a750"),Object(u["a"])($S,RS,LS,!1,null,"5ec20143",null)),BS=zS.exports,US=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{ref:"tooltip",staticClass:"tooltip box-shadow",style:e.getTooltipStyle},[e._t("header"),e._t("content"),e._t("footer")],2)},GS=[],HS={props:{minWidth:Number,clientOffset:{type:Boolean,required:!1,default:!1}},mounted:function(){this.tooltip=this.$refs.tooltip},methods:{getComputedStyle:function(){return window.getComputedStyle(this.tooltip)},showToolTip:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=this.tooltip.style;a.zIndex=9999,a.display="block";var n=this.getComputedStyle(),i=parseInt(n.height,10),o=parseInt(n.width,10),s=this.clientOffset?t.clientX-r:t.pageX-r,c=this.clientOffset?t.clientY:t.pageY,l=s+10+o<e?s+10:s-10-o,u=c-10>i?c-(i+10):c+10;a.left=l+"px",a.top=u+"px"},removeToolTip:function(){var e=this.tooltip.style;e.zIndex=-9999,e.display="none",e.left="0",e.top="0"}},computed:{getTooltipStyle:function(){var e="";return _(this.minWidth)&&(e+="min-width: ".concat(this.minWidth,"px;")),e}}},WS=HS,XS=(r("5e5f"),Object(u["a"])(WS,US,GS,!1,null,"56377cb0",null)),qS=XS.exports,KS=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._l(e.data.list,(function(t,a){return r("div",{key:a,staticClass:"tree",style:e.marginLeft,on:{click:function(r){return r.stopPropagation(),e.toggle(t)}}},[r("div",{staticClass:"title",on:{mouseenter:function(r){return r.stopPropagation(),e.mousemove(t)},mouseleave:function(r){return r.stopPropagation(),e.mouseleave(t)}}},[r("div",{staticClass:"icon-translate"},[t.noChild?e._e():r("Icon",{ref:"dropIcon-"+t.id,refInFor:!0,staticClass:"icon-rotate",style:e.iconExpandStyle(t),attrs:{type:"md-arrow-dropright"}})],1),r("div",{domProps:{innerHTML:e._s(t.title)}}),r("div",{directives:[{name:"show",rawName:"v-show",value:t.showHidden,expression:"child.showHidden"}],domProps:{innerHTML:e._s(t.hiddenInfo)}})]),r("transition",{attrs:{name:"slide-tree"}},[t.expand?r("div",{staticClass:"child"},[r("x-tree",{attrs:{data:{list:t.children},depth:e.depth+1,parent:t.id},on:{expandNode:e.expandNode,showExtra:e.showExtra,hiddenExtra:e.hiddenExtra}}),t.more?r("div",{style:e.marginLeft,on:{click:function(r){return r.stopPropagation(),e.expandNode(t)}}},[r("Button",{staticClass:"remain",attrs:{size:"small",type:"primary",ghost:""}},[r("span",[e._v("加载更多 <"+e._s(t.left)+">")])])],1):e._e()],1):e._e()])],1)})),e.data.more?r("div",{staticClass:"first-more-btn",on:{click:function(t){return t.stopPropagation(),e.expandParent(e.data)}}},[r("Button",{staticClass:"remain",attrs:{size:"small",type:"primary",ghost:""}},[r("span",[e._v("加载更多 <"+e._s(e.data.left)+">")])])],1):e._e()],2)},YS=[],VS={props:{data:{type:Object,default:function(){return{list:[],more:!1,lastIndex:0,left:0}}},depth:{type:Number,default:0},parent:{type:Number,default:-1}},data:function(){return{inconDownStyle:"scaleX(1.2) scaleY(1.4) translateY(-1px) translateX(-2px) rotate(90deg)"}},methods:{toggle:function(e){if(!e.disabled){this.$set(e,"expand",!e.expand),this.expandNode(e);var t=this.$refs["dropIcon-".concat(e.id)];if(t){var r=t[0];r&&(e.expand?(r.$el.style.transform=this.inconDownStyle,r.$el.style.transition="transform 0.1s ease-out"):r.$el.style.transform="scaleY(1.2) scaleX(1.4)")}}},expandNode:function(e){this.$emit("expandNode",e)},expandParent:function(e){this.$emit("expandParent",e)},iconExpandStyle:function(e){return e.expand?"transform: ".concat(this.inconDownStyle):""},mousemove:function(e){-1!==this.parent&&this.$emit("showExtra",{parent:this.parent,child:e})},mouseleave:function(e){-1!==this.parent&&this.$emit("hiddenExtra",{child:e})},showExtra:function(e){this.$emit("showExtra",e)},hiddenExtra:function(e){this.$emit("hiddenExtra",e)}},computed:{marginLeft:function(){var e=5*this.depth;return"margin-left: ".concat(e,"px;")}}},QS=VS,ZS=(r("2d01"),Object(u["a"])(QS,KS,YS,!1,null,"206791c6",null)),JS=ZS.exports,eT=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{ref:"area"},[r("x-chartip",{ref:"chartip"},[r("div",{staticClass:"chartip-header",attrs:{slot:"header"},slot:"header"},[r("div",[e._v(e._s(e.chartipTitle))])]),r("div",{staticClass:"chartip-content",attrs:{slot:"content"},slot:"content"},[r("div",e._l(e.yAxis,(function(t,a){return r("div",{key:a},[e.pathWidthMap[t]?r("div",{staticClass:"chartip-content-group"},[r("div",{staticClass:"chartip-label",style:"background-color: "+e.getColor(t)}),r("div",{staticClass:"chartip-key"},[e._v(e._s(t)+":")])]):e._e()])})),0),r("div",{staticStyle:{"margin-left":"23px"}},e._l(e.yAxis,(function(t,a){return r("div",{key:a},[e.pathWidthMap[t]?r("div",{staticClass:"chartip-content-group"},[r("div",[e._v(e._s(e.formatValue(e.chartipData[t]))+e._s(e.yAxisUnit))])]):e._e()])})),0)])]),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.noData&&e.intersectionOffsetX,expression:"!noData && intersectionOffsetX"}],staticClass:"intersection-wrapper"},[e._l(e.intersections,(function(t,a){return r("div",{directives:[{name:"show",rawName:"v-show",value:!e.solid,expression:"!solid"}],key:a,staticClass:"intersection",style:e.getIntersectionStyle(t)})})),r("div",{directives:[{name:"show",rawName:"v-show",value:e.solid,expression:"solid"}],staticClass:"intersection",style:e.getIntersectionStyle()})],2),e.viewWidth?r("svg",{attrs:{width:"100%",height:e.viewHeight,viewBox:"0, 0, "+e.viewWidth+", "+e.viewHeight},on:{mousemove:e.mousemove,mouseleave:e.mouseleave,click:e.fixIntersection}},[r("g",[r("line",{staticClass:"axis",attrs:{x1:e.paddingLeft,y1:e.viewHeight-e.paddingBottom,x2:e.viewWidth-e.paddingRight,y2:e.viewHeight-e.paddingBottom}}),r("line",{staticClass:"axis",attrs:{x1:e.paddingLeft,y1:e.paddingTop,x2:e.paddingLeft,y2:e.viewHeight-e.paddingBottom}}),r("g",e._l(e.xAxisScale,(function(t,a){return r("rect",{key:a,staticClass:"bg-rect",attrs:{width:0===a?0:.5*e.xGridFullWidth,height:e.viewHeight-e.paddingTop-e.paddingBottom,x:e.getXGridBgInterval(a),y:e.paddingTop}})})),0),e._l(e.yAxisScale,(function(t,a){return r("g",{key:a},[r("text",{staticClass:"axisScale",staticStyle:{"text-anchor":"end"},attrs:{x:e.paddingLeft,y:e.getYAxisLabel(a),dx:"-0.5em",dy:"0.32em"}},[e._v(e._s(t.label))]),a!==e.yAxisScale.length-1?r("line",{staticClass:"axis",attrs:{x1:e.paddingLeft,y1:e.getYAxisLabel(a),x2:e.viewWidth-e.paddingRight,y2:e.getYAxisLabel(a)}}):e._e()])}))],2),r("g",e._l(e.xAxisScale,(function(t,a){return r("text",{key:a,staticClass:"axisScale",attrs:{"text-anchor":"middle",x:e.getXAxisLabel(a),y:e.viewHeight-e.paddingBottom,dy:"1.4em"}},[r("tspan",[e._v(e._s(t.value))]),t.showTimeSpan?r("tspan",{staticClass:"time-label",attrs:{x:e.getXAxisLabel(a),dy:"1.3em"}},[e._v(e._s(t.label))]):e._e()])})),0),r("g",[r("text",{staticClass:"axisUnit",attrs:{x:e.paddingLeft,y:e.paddingTop,dy:"-0.5em"}},[e._v(e._s(e.upperCaseLabel(e.yAxisUnit)))])]),e.noData?r("g",[r("text",{staticClass:"no-data-text",attrs:{x:e.paddingLeft+(e.viewWidth-e.paddingLeft-e.paddingRight)/2,y:e.paddingTop+.4*(e.viewHeight-e.paddingTop-e.paddingBottom),"text-anchor":"middle","dominant-baseline":"middle"}},[e._v(e._s(e.noDataText))])]):e._e(),r("g",e._l(e.yAxisData,(function(t,a){return r("g",{key:a},e._l(t,(function(t,a){return r("g",{key:a},[0===a?r("defs",[r("linearGradient",{attrs:{id:"color_bg_"+t.axis,gradientUnits:"userSpaceOnUse",x1:e.paddingLeft,y1:e.paddingTop,x2:e.paddingLeft,y2:e.viewHeight-e.paddingBottom}},[r("stop",{attrs:{offset:"0%","stop-opacity":"0.15","stop-color":t.bg}}),r("stop",{attrs:{offset:"50%","stop-opacity":"0.08","stop-color":t.bg}}),r("stop",{attrs:{offset:"100%","stop-opacity":"0.01","stop-color":t.bg}})],1)],1):e._e(),e.noFill?e._e():r("g",[e.solid?r("transition",{attrs:{name:"slide-chart"}},[r("path",{directives:[{name:"show",rawName:"v-show",value:e.pathWidthMap[t.axis],expression:"pathWidthMap[y.axis]"}],attrs:{d:t.path,fill:t.color,stroke:"none"}})]):r("transition",{attrs:{name:"slide-chart"}},[r("path",{directives:[{name:"show",rawName:"v-show",value:e.pathWidthMap[t.axis],expression:"pathWidthMap[y.axis]"}],attrs:{d:t.path,fill:"url(#color_bg_"+t.axis+")",stroke:"none"}})])],1),r("transition",{attrs:{name:"slide-chart"}},[r("polyline",{directives:[{name:"show",rawName:"v-show",value:e.pathWidthMap[t.axis],expression:"pathWidthMap[y.axis]"}],attrs:{"stroke-opacity":t.opacity,points:t.points,stroke:t.color,fill:"none","stroke-width":e.pathWidthMap[t.axis]}})])],1)})),0)})),0),r("g",{directives:[{name:"show",rawName:"v-show",value:!e.noData&&e.intersectionOffsetX,expression:"!noData && intersectionOffsetX"}]},e._l(e.dots,(function(t,a){return r("circle",{directives:[{name:"show",rawName:"v-show",value:e.pathWidthMap[t.axis],expression:"pathWidthMap[dot.axis]"}],key:a,attrs:{cx:t.xPosition,cy:t.yPosition,fill:t.color,stroke:"#fff",r:"4","stroke-width":"2"}})})),0)]):e._e(),e.data.length?r("div",{staticClass:"chart-label"},e._l(e.yAxis,(function(t,a){return r("div",{key:a,ref:e.labelKey+t,refInFor:!0,staticClass:"chart-label-group",style:0!==a?"margin-left: 25px;":"",on:{mouseover:function(r){return e.mouseoverLabel(t)},mouseleave:function(r){return e.mouseleaveLabel(t)},click:function(r){return e.choseLabel(t)}}},[r("div",{staticClass:"label-icon",style:"background-color: "+e.getColor(t)}),r("div",{staticClass:"label-value"},[e._v(e._s(t))])])})),0):e._e()],1)},tT=[];function rT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function aT(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rT(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rT(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var nT=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],iT={created:function(){this.setWidthMap()},mounted:function(){this.area=this.$refs.area,this.chartip=this.$refs.chartip,this.setViewBox(),window.addEventListener("resize",this.setViewBox.bind(this))},methods:aT({validData:function(e){var t=this.yAxis;Array.isArray(t)||(t=[t]);var r=this.data,a=r.length;if(e){var n=0,i=function(){var e=r[n];if(t.every((function(t){return _(e[t])})))return{v:e};n++};while(n<a){var o=i();if("object"===Object(Wo["a"])(o))return o.v}}else{var s=function(){a--;var e=r[a];if(t.every((function(t){return _(e[t])})))return{v:e}};while(a){var c=s();if("object"===Object(Wo["a"])(c))return c.v}}},formatValue:function(e){return _(e)&&this.fixedTip?e.toFixed(2):e},setWidthMap:function(e,t,r){if(e){this.pathWidthMap[e]=t;var a=!0,n=!1,i=void 0;try{for(var o,s=this.yAxis[Symbol.iterator]();!(a=(o=s.next()).done);a=!0){var c=o.value;c!==e&&(this.pathWidthMap[c]=r)}}catch(b){n=!0,i=b}finally{try{a||null==s.return||s.return()}finally{if(n)throw i}}}else{var l={},u=!0,d=!1,p=void 0;try{for(var f,h=this.yAxis[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var v=f.value;l[v]=1.2}}catch(b){d=!0,p=b}finally{try{u||null==h.return||h.return()}finally{if(d)throw p}}this.pathWidthMap=l}},setViewBox:function(){var e=parseInt(window.getComputedStyle(this.area).width,10);e&&(this.viewWidth=e,this.mouseleave(),this.intersectionFixed=!1)},upperCaseLabel:function(e){return e.toUpperCase()},formatXLabel:function(e){return Math.round(e)},getScale:function(e,t){if(!this.data.length)return[];var r=this.validData(!0);if(!r)return[];var a=t===this.yAxis&&this.yAxisZero,n=!1,i=this.data,o=a?0:r[t[0]],s=r[t[0]],c=!0,l=!1,u=void 0;try{for(var d,p=i[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var f=d.value;if(this.solid){var h=0,v=!0,b=!1,g=void 0;try{for(var y,m=t[Symbol.iterator]();!(v=(y=m.next()).done);v=!0){var O=y.value;h+=f[O]}}catch(M){b=!0,g=M}finally{try{v||null==m.return||m.return()}finally{if(b)throw g}}h>s&&(s=h),h<o&&(o=h)}else{var w=!0,j=!1,x=void 0;try{for(var P,k=t[Symbol.iterator]();!(w=(P=k.next()).done);w=!0){var D=P.value;_(f[D])&&f[D]>s&&(s=f[D]),_(f[D])&&f[D]<o&&(o=f[D])}}catch(M){j=!0,x=M}finally{try{w||null==k.return||k.return()}finally{if(j)throw x}}}}}catch(M){l=!0,u=M}finally{try{c||null==p.return||p.return()}finally{if(l)throw u}}if(0===s)return[];var S=(s-o)/e;if(0===S)return[{label:s,value:s}];for(var T=[],C=0;C<=e;C++){var A=s-S*C;T.push({label:s<2.5&&s>0?Number(A.toFixed(2)):Math.ceil(A),value:A,showTimeSpan:n})}return T},getTimeScale:function(e){var t=this.data;if(!Array.isArray(t)||!t.length)return[];for(var r=t[0].time,a=t[t.length-1].time,n=(a-r)/e,i=Vn().day(),o=[],s=i,c=0;c<=e;c++){var l=Vn(a).subtract(c*n,"ms"),u=l.hours();l.day()!==s?(s=l.day(),o.push({label:l.format("MM.DD"),value:nT[l.day()],showTimeSpan:!0})):o.push({label:u<12?"AM":"PM",value:u,showTimeSpan:!0})}return o},getXGridBgInterval:function(e){return this.paddingLeft-.75*this.xGridFullWidth+this.xGridFullWidth*e},getXAxisLabel:function(e){return this.paddingLeft+(this.viewWidth-this.paddingLeft-this.paddingRight)/this.xAxisScaleCountInner*e},getYAxisLabel:function(e){return this.paddingTop+(this.viewHeight-this.paddingTop-this.paddingBottom)/this.yAxisScaleCountInner*(this.yAxisScaleCountInner-e)},getPoints:function(e,t){var r=this,a=this.data,n=this.yAxisScale,i=this.xAxis,o=a[a.length-1]&&a[a.length-1][i],s=a[0]&&a[0][i],c=n[n.length-1]&&n[n.length-1].value;if(!o||!s||!c&&0!==c)return[];var l=this.xPointMap={},u=this.xValueMap={},d=this.xPoint=[],p={},f={},h=!0,v=!1,b=void 0;try{for(var g,y=e[Symbol.iterator]();!(h=(g=y.next()).done);h=!0){var m=g.value;p[m]=[],f[m]=[]}}catch(E){v=!0,b=E}finally{try{h||null==y.return||y.return()}finally{if(v)throw b}}var O=!0,w=!1,j=void 0;try{for(var x,P=function(){var t=x.value,a=t[i],n=0;o-s&&(n=(a-s)/(o-s)*(r.viewWidth-r.paddingLeft-r.paddingRight));var h=r.paddingLeft+n,v="time"===r.xAxis?Vn(a).format("YYYY-MM-DD HH:mm"):a;l[h]={data:t,dots:[]},u[v]={data:t,dots:[]},e.some((function(e){return t[e]||0===t[e]}))&&d.push(h);var b=0,g=!0,y=!1,m=void 0;try{for(var O,w=e[Symbol.iterator]();!(g=(O=w.next()).done);g=!0){var j=O.value,P=t[j];if(_(P)){var k=void 0;k=0===c?0:P/c*(r.viewHeight-r.paddingTop-r.paddingBottom),r.solid&&(k+=b,b=k);var D=r.viewHeight-r.paddingBottom-k;l[h].dots.push({axis:j,xPosition:h,yPosition:D,color:r.getColor(j),time:v}),u[v].dots.push({axis:j,xPosition:h,yPosition:D,color:r.getColor(j)}),f[j].push("".concat(h,",").concat(D))}else f[j].length&&p[j].push(f[j]),f[j]=[]}}catch(E){y=!0,m=E}finally{try{g||null==w.return||w.return()}finally{if(y)throw m}}},k=t[Symbol.iterator]();!(O=(x=k.next()).done);O=!0)P()}catch(E){w=!0,j=E}finally{try{O||null==k.return||k.return()}finally{if(w)throw j}}var D=!0,S=!1,T=void 0;try{for(var C,A=e[Symbol.iterator]();!(D=(C=A.next()).done);D=!0){var M=C.value;p[M].push(f[M])}}catch(E){S=!0,T=E}finally{try{D||null==A.return||A.return()}finally{if(S)throw T}}return p},getColor:function(e){var t=this.yAxis.indexOf(e);return this.colors[t%this.colors.length]},filterDot:function(e){var t=this;return e.filter((function(e){return t.pathWidthMap[e.axis]}))}},w("mouseover",(function(e){this.mousemove(e)})),{},w("mousemove",(function(e){if(!this.intersectionFixed&&!this.noData){var t=e.offsetX,r=e.offsetY,a=this.paddingLeft,n=this.viewWidth-this.paddingRight,i=this.paddingTop,o=this.viewHeight-this.paddingBottom;if(!(t<a||t>n))if(r<i||r>o)this.mouseleave();else{var s,c=this.xPointMap,l=H(this.xPoint,t),u=Object(O["a"])(l,2),d=u[0],p=u[1];if(s=Math.abs(t-d<Math.abs(t-p))?c[d]:c[p],s){var f=s.dots;this.solid||(this.dots=f);var h=f.length?f[0].xPosition:t;this.intersectionOffsetX=h,this.chartipData=s.data;var v={offsetX:h,offsetY:r};this.chartip.show(v,i,n,this.paddingRight),f.length&&this.$emit("linkage",{time:f[0].time,mouse:v}),this.showStatus&&this.$emit("status",s.data)}}}})),{},w("mouseleave",(function(){this.intersectionFixed||(this.intersectionOffsetX=0,this.dots=[],this.chartip.hidden(),this.$emit("hidden"))})),{showTip:function(e){var t=e.time,r=e.mouse,a=this.xValueMap[t]&&this.xValueMap[t].dots||[];if(a.length){var n=a[0].xPosition;if(n!==this.intersectionOffsetX){this.intersectionOffsetX=n;var i=this.viewWidth-this.paddingRight,o=this.paddingTop;if(this.chartipData=this.xValueMap[t].data,this.chartip.show({offsetX:n,offsetY:r.offsetY},o,i,this.paddingRight),this.solid||(this.dots=a),this.showStatus){var s=this.xValueMap[t]&&this.xValueMap[t].data||{};this.$emit("status",s)}}}},hiddenTip:function(){this.intersectionOffsetX=0,this.dots=[],this.chartip.hidden()},singleton:function(e){this.setWidthMap(e,2,0);var t=this.$refs[this.labelKey+e][0].style;t["transform"]="scale(1.2)"},restore:function(e){this.setWidthMap(e,1.2,1.2);var t=this.$refs[this.labelKey+e][0].style;t["transform"]="scale(1)"},mouseoverLabel:function(e){this.single||this.singleton(e)},mouseleaveLabel:function(e){this.single||this.restore(e)},choseLabel:function(e){var t=!0,r=!1,a=void 0;try{for(var n,i=this.yAxis[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var o=n.value;this.restore(o)}}catch(s){r=!0,a=s}finally{try{t||null==i.return||i.return()}finally{if(r)throw a}}e!==this.single&&(this.single=void 0),this.single?(this.restore(e),this.single=void 0):(this.singleton(e),this.single=e)},getIntersectionStyle:function(e){var t="";t+="background-color: "+(this.solid?"#e8eaec":"#adbcc9")+";";var r=e?e.height:this.viewHeight-this.paddingTop-this.paddingBottom;t+="height: "+r+"px;";var a=e?e.top:this.paddingTop;return t+="top: "+a+"px;",t+="left: "+this.intersectionOffsetX+"px;",t},fixIntersection:function(e){this.intersectionFixed=!this.intersectionFixed,this.$emit("broadcast",{intersectionFixed:this.intersectionFixed}),this.intersectionFixed||this.mousemove(e)},handleBroadcase:function(e){var t=e.intersectionFixed;this.intersectionFixed=t}}),computed:{xAxisScaleCountInner:function(){return this.xAxisScaleCount||this.defaultXAxisScaleCount},yAxisScaleCountInner:function(){return this.yAxisScaleCount||this.defaultYAxisScaleCount},xAxisScale:function(){var e=this,t=[];return"time"===this.xAxis?(t=this.getTimeScale(this.xAxisScaleCountInner),t.reverse()):(t=this.getScale(this.xAxisScaleCountInner,[this.xAxis]),t.reverse(),t.forEach((function(t){return t.value=e.formatXLabel(t.value)}))),t},yAxisScale:function(){var e=this.getScale(this.yAxisScaleCountInner,this.yAxis);return e.reverse(),e.length||e.push({label:0,value:0}),e},xGridFullWidth:function(){return(this.viewWidth-this.paddingLeft-this.paddingRight)/this.xAxisScaleCountInner},noData:function(){return!this.xAxisScale.length||!this.yAxisScale.length},yAxisData:function(){var e=this;if(this.noData)return[];var t=this.getPoints(this.yAxis,this.data),r=Object.entries(t).map((function(t,r,a){var n=Object(O["a"])(t,2),i=n[0],o=n[1];return o.map((function(t,n){var o={axis:i};if(o.points=t.join(" "),e.solid&&0!==r){var s=Object(O["a"])(a[r-1],2),c=s[1],l=c[n].reverse(),u=t.map((function(e,t){return t?"L".concat(e):"M".concat(e)})).join(" ");u+=l.map((function(e){return"L".concat(e)})).join(" "),u+=u?" Z":"",o.path=u}else{var d=t.shift(),p=t.pop(),f="";if(d&&p){t=t.map((function(e){return"L".concat(e)})),f+="M".concat(d," ")+t.join(" ")+" L".concat(p);var h=e.viewHeight-e.paddingBottom;f+=" L".concat(p.split(",")[0],",").concat(h),f+=" L".concat(d.split(",")[0],",").concat(h," Z")}d&&!p&&(t=t.map((function(e){return"L".concat(e)})),f+="M".concat(d," ")+t.join(" ")+" Z"),o.path=f}var v=e.getColor(i);return o.color=v,o.bg=v,e.solid?o.opacity=1:o.opacity=.75,o}))}));return r},chartipTitle:function(){var e=this.chartipData;return e.time?Vn(e.time).format("YYYY-MM-DD HH:mm:ss"):e.index?"追踪周期内第 ".concat(e.index," 次 GC ( ").concat(e.type," )"):void 0},colors:function(){return this.solid?this.defaultAreaColor:this.defaultColors},intersections:function(){var e=this,t=this.dots;if(t.length){var r=[],a=this.filterDot(t),n=a.map((function(e){return e.yPosition}));return n.sort((function(e,t){return e>t?1:-1})),n.forEach((function(t,a,n){if(0===a){var i=t-e.paddingTop-5;i=i<0?0:i,r.push({top:e.paddingTop,height:i})}var o=n[a+1];if(o){var s=o-t-10;s=s<0?0:s;var c=t>5?t+5:e.viewHeight-e.paddingBottom;r.push({top:c,height:s})}else{var l=e.viewHeight-e.paddingBottom-t-5;l=l<0?0:l;var u=t>5?t+5:e.viewHeight-e.paddingBottom;r.push({top:u,height:l})}})),r}},viewHeight:function(){return this.height||250},paddingLeft:function(){return this.left||46},paddingRight:function(){return this.right||35},paddingBottom:function(){return this.bottom||40}}};function oT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function sT(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oT(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oT(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var cT=sT({props:{xAxis:[String,Array],yAxis:Array,yAxisUnit:String,data:Array,xAxisScaleCount:Number,yAxisScaleCount:Number,noDataText:String,showStatus:Boolean,fixedTip:Boolean,solid:Boolean,height:Number,left:Number,right:Number,bottom:Number,yAxisZero:{type:Boolean,default:!0},noFill:Boolean},data:function(){return{defaultXAxisScaleCount:8,defaultYAxisScaleCount:4,viewWidth:0,paddingTop:20,intersectionOffsetX:0,pathWidthMap:{},xPointMap:{},xValueMap:{},xPoint:[],dots:[],chartipData:{},single:void 0,labelKey:"label-",defaultAreaColor:["#2b85e4","#5cadff","#2196f3","#6a5acd","#9083e0","#673ab7","#19be6b","#1e9652"],defaultColors:["#2db7f5","#5cadff","#2b85e4","#1e8449"],intersectionFixed:!1}}},iT),lT=cT,uT=(r("00f7"),Object(u["a"])(lT,eT,tT,!1,null,"259bd0b3",null)),dT=uT.exports,pT=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{ref:"histogram"},[r("x-chartip",{ref:"chartip",attrs:{"no-arrow":""}},[r("div",{staticClass:"chartip-header",style:"background-color: "+e.chartipData.color+";color: white",attrs:{slot:"header"},slot:"header"},[r("div",[e._v(e._s(e.chartipTitle))])]),r("div",{staticClass:"chartip-content",attrs:{slot:"content"},slot:"content"},[r("div",{staticStyle:{"margin-top":"2px"}},[r("div",{staticClass:"chartip-key"},[e._v("距离进程启动时间:")]),"pause"===e.yAxis?r("div",{staticClass:"chartip-key"},[e._v("本次 GC 暂停时间:")]):e._e(),"changeAbs"===e.yAxis?r("div",{staticClass:"chartip-key"},[e._v("堆内存大小变化:")]):e._e()]),r("div",{staticStyle:{margin:"2px 0 0 23px"}},[r("div",{staticClass:"chartip-value"},[e._v(e._s(e.formatChartipTime(e.chartipData.timeFromStart)))]),"pause"===e.yAxis?r("div",{staticClass:"chartip-value"},[e._v(e._s(e.chartipData.pause)+"ms")]):e._e(),"changeAbs"===e.yAxis?r("div",{staticClass:"chartip-value"},[e._v(e._s(e.chartipData.changeLabel)+"MB")]):e._e()])])]),e.viewWidth?r("svg",{attrs:{width:"100%",height:e.viewHeight,viewBox:"0, 0, "+e.viewWidth+", "+e.viewHeight}},[r("g",[r("line",{staticClass:"axis",attrs:{x1:e.paddingLeft,y1:e.viewHeight-e.paddingBottom,x2:e.viewWidth-e.paddingRight,y2:e.viewHeight-e.paddingBottom}}),r("line",{staticClass:"axis",attrs:{x1:e.paddingLeft,y1:e.paddingTop,x2:e.paddingLeft,y2:e.viewHeight-e.paddingBottom}}),r("g",e._l(e.xAxisScale,(function(t,a){return r("g",{key:a},[r("rect",{staticClass:"bg-rect",attrs:{width:0===a?0:.5*e.xGridFullWidth,height:e.viewHeight-e.paddingTop-e.paddingBottom,x:e.getXGridBgInterval(a),y:e.paddingTop}}),r("text",{staticClass:"axisScale",attrs:{"text-anchor":"middle",x:e.getXAxisLabel(a),y:e.viewHeight-e.paddingBottom,dy:"1.5em"}},[e._v(e._s(e.formatXLabel(t.value)))])])})),0),r("g",e._l(e.yAxisScale,(function(t,a){return r("g",{key:a},[r("text",{staticClass:"axisScale",staticStyle:{"text-anchor":"end"},attrs:{x:e.paddingLeft,y:e.getYAxisLabel(a),dx:"-0.5em",dy:"0.32em"}},[e._v(e._s(t.label))]),a!==e.yAxisScale.length-1?r("line",{staticClass:"axis",attrs:{x1:e.paddingLeft,y1:e.getYAxisLabel(a),x2:e.viewWidth-e.paddingRight,y2:e.getYAxisLabel(a)}}):e._e()])})),0),r("g",[r("text",{staticClass:"axisUnit",attrs:{x:e.paddingLeft,y:e.paddingTop,dy:"-0.5em"}},[e._v(e._s(e.upperCaseLabel(e.yAxisUnit)))])])]),r("g",e._l(e.data,(function(t,a){return r("rect",{key:a,ref:e.histogramLabel+"-"+t.index,refInFor:!0,staticClass:"histogram",attrs:{width:"2",opacity:e.needShow(t)?1:0,fill:e.getFill(t),stroke:e.getFill(t),"stroke-opacity":.7,"stroke-width":0,height:e.getRectHeight(t),x:e.getXPosition(t),y:e.viewHeight-e.paddingBottom-e.getRectHeight(t)},on:{mousemove:function(r){return e.mousemove(t,a,r)},mouseleave:e.mouseleave,click:function(r){return e.fixIntersection(t,a,r)}}})})),0)]):e._e(),e.data.length?r("div",{staticClass:"chart-label"},e._l(e.types,(function(t,a){return r("div",{key:a,ref:e.labelKey+t.type,refInFor:!0,staticClass:"chart-label-group",style:0!==a?"margin-left: 25px;":"",on:{mouseenter:function(r){return e.mouseoverLabel(t)},mouseleave:function(r){return e.mouseleaveLabel(t)},click:function(r){return e.choseLabel(t)}}},[r("div",{staticClass:"label-icon",style:"background-color: "+e.getFill(t)}),r("div",{staticClass:"label-value"},[e._v(e._s(t.label))])])})),0):e._e()],1)},fT=[];function hT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function vT(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hT(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hT(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var bT={created:function(){for(var e=0;e<this.data.length;e++){var t=this.data[e];this.xValueMap[t[this.xAxis]]=Object.assign({index:e,color:this.getFill(t)},t)}},mounted:function(){this.histogram=this.$refs.histogram,this.chartip=this.$refs.chartip,this.setViewBox(),window.addEventListener("resize",this.setViewBox.bind(this))},methods:vT({setViewBox:function(){var e=parseInt(window.getComputedStyle(this.histogram).width,10);e&&(this.viewWidth=e,this.intersectionFixed=!1)},formatChartipTime:function(e){return S(e,!1,!0,0)},formatXLabel:function(e){return Math.round(e)},upperCaseLabel:function(e){return e.toUpperCase()},getXGridBgInterval:function(e){return this.paddingLeft-.75*this.xGridFullWidth+this.xGridFullWidth*e},getXAxisLabel:function(e){return this.paddingLeft+(this.viewWidth-this.paddingLeft-this.paddingRight)/this.xAxisScaleCountInner*e},getYAxisLabel:function(e){return this.paddingTop+(this.viewHeight-this.paddingTop-this.paddingBottom)/this.yAxisScaleCountInner*(this.yAxisScaleCountInner-e)},getScale:function(e,t,r){var a=this,n=this.data;if(!Array.isArray(n))return[];if(r&&(n=n.filter((function(e){return a.needShow(e,r)}))),!n.length)return[];var i=t===this.yAxis&&this.yAxisZero;n=n.map((function(e){return e[t]}));var o=i?0:n[0],s=n[0],c=!0,l=!1,u=void 0;try{for(var d,p=n[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var f=d.value;f>s&&(s=f),f<o&&!i&&(o=f)}}catch(y){l=!0,u=y}finally{try{c||null==p.return||p.return()}finally{if(l)throw u}}var h=(s-o)/e;if(0===h)return[{label:s,value:s}];for(var v=[],b=0;b<=e;b++){var g=s-h*b;v.push({label:h<=1?Number(g.toFixed(2)):Math.ceil(g),value:g})}return v},getRectHeight:function(e){var t=e[this.yAxis],r=e.type,a=e.positive;if(!this.needShow({type:r,positive:a}))return 0;var n=this.yAxisScale[this.yAxisScale.length-1].value,i=this.yAxisScale[0].value,o=n-i?(t-i)/(n-i)*(this.viewHeight-this.paddingTop-this.paddingBottom):0;return o},getXPosition:function(e){var t=e[this.xAxis],r=this.xAxisScale[this.xAxisScale.length-1].value,a=this.xAxisScale[0].value,n=r-a?(t-a)/(r-a)*(this.viewWidth-this.paddingLeft-this.paddingRight):0,i=this.paddingLeft+n;return i},getFill:function(e){var t=e.type,r=e.positive,a="";if("pause"===this.yAxis)switch(t){case"scavenge":a="#3498db";break;case"marksweep":a="#ff9900";break;case"marking":a="#6a5acd";break;default:break}return"changeAbs"===this.yAxis&&(a=r||"increment"===t?"#c45a65":"#2a9446"),a},singleton:function(e){var t=e.type;this.filterType=t;var r=this.$refs[this.labelKey+t][0].style;r["transform"]="scale(1.2)"},restore:function(e){var t=e.type;this.filterType=void 0;var r=this.$refs[this.labelKey+t][0].style;r["transform"]="scale(1)"}},w("mouseoverLabel",(function(e){this.single||this.singleton(e)})),{},w("mouseleaveLabel",(function(e){this.single||this.restore(e)})),{choseLabel:function(e){var t=e.type,r=!0,a=!1,n=void 0;try{for(var i,o=this.types[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var s=i.value;this.restore(s)}}catch(c){a=!0,n=c}finally{try{r||null==o.return||o.return()}finally{if(a)throw n}}t!==this.single&&(this.single=void 0),this.single?(this.restore({type:t}),this.single=void 0):(this.singleton({type:t}),this.single=t)}},w("mousemove",(function(e,t,r){if(!this.intersectionFixed){var a=r.offsetX,n=r.offsetY,i=this.paddingLeft,o=this.viewWidth-this.paddingRight,s=this.paddingTop,c=this.viewHeight-this.paddingBottom;if(!(a<i||a>o))if(n<s||n>c)this.mouseleave();else{this.setRectStyle(this.chartipData,1,0),this.setRectStyle(e,.5,"5px"),this.chartipData=Object.assign({index:t,color:this.getFill(e)},e);var l={offsetX:a,offsetY:n};this.chartip.show(l,s,o,this.paddingRight),this.$emit("linkage",{time:e[this.xAxis],mouse:l})}}})),{},w("mouseleave",(function(){this.intersectionFixed||(this.chartip.hidden(),this.$emit("hidden"),this.setRectStyle(this.chartipData,1,0))})),{setRectStyle:function(e,t,r){var a=this.$refs["".concat(this.histogramLabel,"-").concat(e.index)];if(a&&a[0]){var n=a[0].style;n["stroke-opacity"]=t,n["stroke-width"]=r}}},w("showTip",(function(e){var t=e.time,r=e.mouse,a=this.viewWidth-this.paddingRight,n=this.paddingTop,i=this.xValueMap[t];this.setRectStyle(this.chartipData,1,0),this.needShow(i)?(this.setRectStyle(i,.5,"5px"),this.chartipData=i,this.chartip.show(r,n,a,this.paddingRight)):this.chartip.hidden()})),{},w("hiddenTip",(function(){this.chartip.hidden(),this.setRectStyle(this.chartipData,1,0)})),{needShow:function(e,t){var r=t||this.filterType;return!r||("pause"===this.yAxis?r===e.type:"changeAbs"===this.yAxis?e.positive===("increment"===r):void 0)},fixIntersection:function(e,t,r){this.intersectionFixed=!this.intersectionFixed,this.$emit("broadcast",{intersectionFixed:this.intersectionFixed}),this.intersectionFixed||this.mousemove(e,t,r)},handleBroadcase:function(e){var t=e.intersectionFixed;this.intersectionFixed=t}}),computed:{xAxisScaleCountInner:function(){return this.xAxisScaleCount||this.defaultXAxisScaleCount},yAxisScaleCountInner:function(){return this.yAxisScaleCount||this.defaultYAxisScaleCount},xGridFullWidth:function(){return(this.viewWidth-this.paddingLeft-this.paddingRight)/this.xAxisScaleCountInner},xAxisScale:function(){var e=this.getScale(this.xAxisScaleCountInner,this.xAxis);return e.reverse(),e},yAxisScale:function(){var e=this.getScale(this.yAxisScaleCountInner,this.yAxis,this.filterType);return e.reverse(),e},types:function(){var e={},t=[];return"pause"===this.yAxis&&(t=Array.from(new Set(this.data.map((function(t){var r=t.type;return e[r]?e[r]++:e[r]=1,r})))).map((function(e){return{type:e}})),t.sort((function(t,r){return e[t.type]<e[r.type]?1:-1})),t=t.map((function(e){var t=e.type;return{type:t,label:t}}))),"changeAbs"===this.yAxis&&(t=[{type:"reduce",label:"GC 后堆内存大小减少"},{type:"increment",label:"GC 后堆内存大小增加"}]),t},chartipTitle:function(){var e=this.chartipData,t=e.index,r=e.type;return"追踪周期内第 ".concat(t," 次 GC ( ").concat(r," )")}}};function gT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function yT(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gT(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gT(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var mT=yT({props:{data:Array,xAxisScaleCount:Number,yAxisScaleCount:Number,xAxis:String,yAxis:String,yAxisUnit:String,yAxisZero:Boolean},data:function(){return{defaultXAxisScaleCount:5,defaultYAxisScaleCount:4,viewWidth:0,viewHeight:250,paddingLeft:40,paddingRight:30,paddingTop:20,paddingBottom:27,labelKey:"label-",single:void 0,filterType:void 0,chartipData:{},xValueMap:{},histogramLabel:"histogram-label",intersectionFixed:!1}}},bT),OT=mT,wT=(r("85a8"),Object(u["a"])(OT,pT,fT,!1,null,"eac47852",null)),_T=wT.exports,jT=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{ref:"pie"},[r("x-chartip",{ref:"chartip"},[r("div",{staticClass:"chartip-content",attrs:{slot:"content"},slot:"content"},[r("div",{staticClass:"chartip-content-group"},[r("div",{staticClass:"chartip-label",style:"background-color: "+e.selectedData.color}),r("div",{staticClass:"chartip-key"},[e._v(e._s(e.selectedData.axis)+":")])]),r("div",{staticStyle:{"margin-left":"10px"}},[r("div",[e._v(e._s(e.formatValue(e.selectedData.value))+e._s(e.yAxisUnit))])])])]),r("div",{staticClass:"pie"},[e.viewWidth?r("svg",{attrs:{width:e.viewWidth,height:e.viewHeight,viewBox:"0, 0, "+e.viewWidth+", "+e.viewHeight}},e._l(e.list,(function(t,a){return r("circle",{key:a,ref:t.axis,refInFor:!0,staticClass:"circle",attrs:{r:e.radius,cx:e.cx,cy:e.cy,fill:"none",stroke:t.color,"stroke-width":e.pieStrokeWidth,"stroke-dasharray":t.occupy+" "+e.dashbase,"stroke-dashoffset":""+-t.offset},on:{mousemove:function(r){return e.mousemove(t,r)},mouseleave:e.mouseleave}})})),0):e._e(),r("div",{staticClass:"label",style:"padding-top: "+e.paddingTop+"px;"},e._l(e.yAxis,(function(t,a){return r("div",{key:a,staticClass:"label-group",on:{mousemove:function(t){return e.mousemoveLabel(a)},mouseleave:function(t){return e.mouseleaveLabel(a)}}},[r("div",{staticClass:"label-icon",style:"background-color: "+e.getColor(t)}),r("div",{staticClass:"label-value"},[e._v(e._s(t))])])})),0)])],1)},xT=[];function PT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function kT(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?PT(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PT(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var DT={props:{yAxis:Array,yAxisUnit:String,data:Object},data:function(){return{viewWidth:0,viewHeight:0,paddingLeft:0,paddingRight:30,paddingTop:20,paddingBottom:0,pieStrokeWidth:23,radius:60,pieWidth:0,selectedData:{},colors:["#2b85e4","#5cadff","#2196f3","#6a5acd","#9083e0","#673ab7","#19be6b","#1e9652"]}},mounted:function(){this.pie=this.$refs.pie,this.chartip=this.$refs.chartip,this.setViewBox(),this.setPieWidth(),window.addEventListener("resize",this.setPieWidth.bind(this))},methods:kT({setPieWidth:function(){var e=parseInt(window.getComputedStyle(this.pie).width,10);e&&(this.pieWidth=e)},formatValue:function(e){return _(e)?e.toFixed(2):e},setViewBox:function(){this.viewWidth=2*this.cx,this.viewHeight=this.viewWidth+this.paddingTop},getColor:function(e){var t=this.yAxis.indexOf(e);return this.colors[t%this.colors.length]}},w("mousemove",(function(e,t){this.selectedData=e;var r=this.paddingTop,a=this.pieWidth;this.chartip.show(t,r,a)})),{},w("mouseleave",(function(){this.chartip.hidden()})),{},w("mousemoveLabel",(function(e){var t=this.list[e],r=this.$refs[t.axis][0].style;r["opacity"]=.85})),{},w("mouseleaveLabel",(function(e){var t=this.list[e],r=this.$refs[t.axis][0].style;r["opacity"]=1}))),computed:{cx:function(){var e=this.radius+this.pieStrokeWidth/2;return e},cy:function(){var e=this.cx+this.paddingTop;return e},dashbase:function(){return 2*Math.PI*this.radius},list:function(){if(!this.data)return[];var e=this.yAxis,t=this.data,r=[],a=0,n=!0,i=!1,o=void 0;try{for(var s,c=e[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){var l=s.value,u=t[l]||0;a+=u}}catch(O){i=!0,o=O}finally{try{n||null==c.return||c.return()}finally{if(i)throw o}}if(!a)return r;for(var d=0;d<e.length;d++){var p=e[d],f={axis:p},h=t[p]||0;f.value=h,f.occupy=h/a*this.dashbase;for(var v=0,b=0;b<d;b++)v+=r[b].occupy;f.offset=v,f.color=this.getColor(p),r.push(f)}for(var g=0,y=r;g<y.length;g++){var m=y[g];m.occupy-=1,m.occupy<0&&(m.occupy=0)}return r}}},ST=DT,TT=(r("c979"),Object(u["a"])(ST,jT,xT,!1,null,"54423e3c",null)),CT=TT.exports,AT=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{ref:"pie",staticClass:"pie"},[r("div",{ref:"desc",staticClass:"desc",style:e.descStyle},[e._t("title",[r("div",{staticClass:"desc-title"},[e._v(e._s(e.title))])]),e._t("percentage",[r("div",{staticClass:"desc-percentage"},[e._v(e._s(e.percentage)+"%")])])],2),e.viewWidth?r("svg",{attrs:{width:e.viewWidth,height:e.viewHeight,viewBox:"0, 0, "+e.viewWidth+", "+e.viewHeight}},[r("circle",{attrs:{transform:"translate("+e.cx+","+e.cy+")rotate("+e.bgRotate+")",r:e.radius,fill:"none",stroke:"#ebedf1","stroke-width":e.pieStrokeWidth,"stroke-dasharray":e.bgOccupy+" "+e.dashbase}}),r("g",{attrs:{transform:"translate("+e.cx+","+e.cy+")rotate("+e.needleRotate+")"}},[r("circle",{attrs:{r:"4",fill:"none",stroke:e.needleColor,"stroke-width":"3"}}),r("path",{staticClass:"needle-body",attrs:{d:"M3.5,4 H-3.5 L-0.5,"+(e.cx-e.pieStrokeWidth-5)+" L0.5,"+(e.cx-e.pieStrokeWidth-5)+" Z",fill:e.needleColor}})]),r("circle",{attrs:{transform:"translate("+e.cx+","+e.cy+")rotate("+e.bgRotate+")",r:e.radius,fill:"none",stroke:e.contentColor,"stroke-width":e.pieStrokeWidth,"stroke-dasharray":e.contentOccupy+" "+e.dashbase}})]):e._e()])},MT=[],ET={props:{title:String,percentage:Number,radius:{type:Number,default:91},pieStrokeWidth:{type:Number,default:11},descTop:{type:Number,default:30}},mounted:function(){this.pie=this.$refs.pie,this.desc=this.$refs.desc,this.setViewBox(),this.setPieWidth(),window.addEventListener("resize",this.setPieWidth.bind(this))},data:function(){return{pie:void 0,viewWidth:0,viewHeight:0,paddingLeft:0,paddingRight:0,paddingTop:17,paddingBottom:0,bgPercentage:.725,pieWidth:0,descWidth:0,needleColor:"#2376b7"}},methods:{setViewBox:function(){this.viewWidth=2*this.cx,this.viewHeight=this.viewWidth+this.paddingTop},setPieWidth:function(){var e=parseInt(window.getComputedStyle(this.pie).width,10),t=parseInt(window.getComputedStyle(this.desc).width,10);e&&(this.pieWidth=e),t&&(this.descWidth=t)},getColor:function(e){var t="";return t=e<=60?"#2a9446":e<=85?"#f89501":"#e33900",t}},computed:{cx:function(){var e=this.radius+this.pieStrokeWidth/2;return e},cy:function(){var e=this.cx+this.paddingTop;return e},dashbase:function(){return 2*Math.PI*this.radius},bgOccupy:function(){return 2*Math.PI*this.radius*this.bgPercentage},bgRotate:function(){var e=360*(this.dashbase-this.bgOccupy)/this.dashbase;return 90+e/2},contentOccupy:function(){return this.bgOccupy*this.percentage/100},contentColor:function(){return this.getColor(this.percentage)},descStyle:function(){var e=this.pieWidth,t=this.descWidth,r="";return e&&t&&(r+="left: "+(e-t)/2+"px;",r+="top: "+(this.cy+this.descTop)+"px;"),r},needleRotate:function(){var e=this.percentage,t=360*(this.dashbase-this.bgOccupy)/this.dashbase,r=360-t,a=t/2;return _(e)?(a+=e/100*r,a):a}}},IT=ET,NT=(r("54ec"),Object(u["a"])(IT,AT,MT,!1,null,"8f616fca",null)),RT=NT.exports,LT=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{ref:"content"},[r("transition",{attrs:{name:"slide-rightward"}},[r("svg",{directives:[{name:"show",rawName:"v-show",value:e.display,expression:"display"}],attrs:{width:"100%",height:e.viewHeight,viewBox:"0, 0, "+e.viewWidth+", "+e.viewHeight}},[r("g",[r("line",{staticClass:"axis",attrs:{x1:e.paddingLeft,y1:e.viewHeight-e.paddingBottom,x2:e.viewWidth-e.paddingRight,y2:e.viewHeight-e.paddingBottom}}),r("line",{staticClass:"axis",attrs:{x1:e.paddingLeft,y1:e.paddingTop,x2:e.paddingLeft,y2:e.viewHeight-e.paddingBottom}}),r("g",e._l(e.xAxisScale,(function(t,a){return r("rect",{key:a,staticClass:"bg-rect",attrs:{width:0===a?0:.5*e.xGridFullWidth,height:e.viewHeight-e.paddingTop-e.paddingBottom,x:e.getXGridBgInterval(a),y:e.paddingTop}})})),0),e._l(e.yAxisScale,(function(t,a){return r("g",{key:a},[r("text",{directives:[{name:"show",rawName:"v-show",value:a===e.yAxisScale.length-1||0!==t.value,expression:"index === yAxisScale.length - 1 || yAxis.value !== 0"}],staticClass:"axisScale",staticStyle:{"text-anchor":"end"},attrs:{x:e.paddingLeft,y:e.paddingTop+(e.viewHeight-e.paddingTop-e.paddingBottom)/e.yAxisScaleCountInner*a,dx:"-0.5em",dy:"0.32em"}},[e._v(e._s(t.label))]),r("line",{staticClass:"axis",attrs:{x1:e.paddingLeft,y1:e.paddingTop+(e.viewHeight-e.paddingTop-e.paddingBottom)/e.yAxisScaleCountInner*a,x2:e.viewWidth-e.paddingRight,y2:e.paddingTop+(e.viewHeight-e.paddingTop-e.paddingBottom)/e.yAxisScaleCountInner*a}})])}))],2),r("g",e._l(e.xAxisScale,(function(t,a){return r("text",{directives:[{name:"show",rawName:"v-show",value:0===a||0!==t.value,expression:"index ===0 || xAxis.value !== 0"}],key:a,staticClass:"axisScale",staticStyle:{"text-anchor":"middle"},attrs:{x:e.paddingLeft+(e.viewWidth-e.paddingLeft-e.paddingRight)/e.xAxisScaleCountInner*a,y:e.viewHeight-e.paddingBottom,dy:"1.4em"}},[e._v(e._s(t.label))])})),0),r("g",[r("text",{staticClass:"axisUnit",attrs:{x:e.viewWidth-e.paddingRight,y:e.viewHeight-e.paddingBottom,dx:e.xAxisUnit[1],dy:"-0.7em"}},[e._v(e._s(e.fields[0])+"/"+e._s(e.xAxisUnit[0]))]),r("text",{staticClass:"axisUnit",attrs:{x:e.paddingLeft,y:e.paddingTop,dx:e.yAxisUnit[1],dy:"-0.7em"}},[e._v(e._s(e.fields[1])+"/"+e._s(e.yAxisUnit[0]))])]),e._l(e.data,(function(t,a){return r("g",{key:a},[r("circle",{class:"circle "+(t.selected?"selected":""),attrs:{cx:e.getCx(t),cy:e.getCy(t),r:(t.selected,6),stroke:t.color,fill:t.color},on:{click:function(t){return e.select(a)},mouseover:function(r){return e.mouseover(t,r)},mousemove:function(r){return e.mousemove(t,r)},mouseout:function(t){return e.mouseout()}}})])}))],2)]),r("x-tooltip",{ref:"tooltip"},[r("template",{slot:"header"},[e._t("header",null,{proc:e.selectedProc})],2),r("template",{slot:"content"},[e._t("content",null,{proc:e.selectedProc,fields:[e.fields[1],e.fields[0]],unit:[e.yAxisUnit[0],e.xAxisUnit[0]]})],2)],2)],1)},FT=[],$T={props:{fields:Array,data:Array,xAxisUnit:Array,yAxisUnit:Array,xAxisScaleCount:Number,yAxisScaleCount:Number,display:Boolean},data:function(){return{defaultXAxisScaleCount:6,defaultYAxisScaleCount:5,viewWidth:500,viewHeight:400,paddingLeft:30,paddingRight:20,paddingTop:20,paddingBottom:20,selectedProc:{}}},mounted:function(){this.tooltip=this.$refs.tooltip,this.content=this.$refs.content,this.setViewBox(),window.addEventListener("resize",this.setViewBox.bind(this))},methods:{setViewBox:function(){var e=parseInt(window.getComputedStyle(this.content).width,10);e&&(this.viewWidth=e,this.viewHeight=e/5*4)},getScale:function(e,t){var r=this;if(Array.isArray(this.data)&&Array.isArray(this.fields)){var a=this.data.map((function(t){return t[r.fields[e]]}));a.sort((function(e,t){return e<t?1:-1}));for(var n=Math.ceil(a[0]),i=n/t,o=[],s=0;s<=t;s++){var c=n-i*s;o.push({label:n<2.5&&n>0?Number(c.toFixed(2)):Math.ceil(c),value:c})}return o}},getCx:function(e){var t=e[this.fields[0]],r=this.xAxisScale[this.xAxisScale.length-1].value,a=r?t/r*(this.viewWidth-this.paddingLeft-this.paddingRight):0,n=this.paddingLeft+a;return n},getCy:function(e){var t=e[this.fields[1]],r=this.yAxisScale[0].value,a=r?t/r*(this.viewHeight-this.paddingTop-this.paddingBottom):0,n=this.viewHeight-this.paddingBottom-a;return n},getXGridBgInterval:function(e){return this.paddingLeft-.75*this.xGridFullWidth+this.xGridFullWidth*e},select:function(e){this.$emit("select",e)},mouseover:function(e,t){this.selectedProc=e,this.tooltip.showToolTip(2*this.viewWidth,t)},mousemove:function(e,t){this.selectedProc=e,this.tooltip.showToolTip(2*this.viewWidth,t)},mouseout:function(){this.tooltip.removeToolTip()}},computed:{xAxisScaleCountInner:function(){return this.xAxisScaleCount||this.defaultXAxisScaleCount},yAxisScaleCountInner:function(){return this.yAxisScaleCount||this.defaultYAxisScaleCount},xAxisScale:function(){var e=this.getScale(0,this.xAxisScaleCountInner);return e.reverse(),e},yAxisScale:function(){return this.getScale(1,this.yAxisScaleCountInner)},xGridFullWidth:function(){return(this.viewWidth-this.paddingLeft-this.paddingRight)/this.xAxisScaleCountInner}},watch:{data:function(){this.setViewBox()}}},zT=$T,BT=(r("d2bc"),Object(u["a"])(zT,LT,FT,!1,null,"5f8b1d4f",null)),UT=BT.exports,GT=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{ref:"mini-scatter"},[e.viewWidth?r("svg",{attrs:{width:"100%",height:e.viewHeight,viewBox:"0, 0, "+e.viewWidth+", "+e.viewHeight}},[r("g",[r("line",{staticClass:"axis mini-scatter-axis",attrs:{x1:e.paddingLeft,y1:e.viewHeight-e.paddingBottom,x2:e.viewWidth-e.paddingRight,y2:e.viewHeight-e.paddingBottom}}),r("line",{staticClass:"axis mini-scatter-axis",attrs:{x1:e.paddingLeft,y1:e.paddingTop,x2:e.paddingLeft,y2:e.viewHeight-e.paddingBottom}})]),e._l(e.xAxisScale,(function(t,a){return r("g",{key:a+"_"+t.label},[r("text",{staticClass:"axisScale",attrs:{"text-anchor":"middle",x:e.getXAxisLabel(a),y:e.viewHeight-e.paddingBottom,dy:"1.4em"}},[e._v(e._s(t.label))]),r("line",{staticClass:"axis mini-scatter-axis",attrs:{x1:e.getXAxisLabel(a),y1:e.paddingTop,x2:e.getXAxisLabel(a),y2:e.viewHeight-e.paddingBottom}})])})),e._l(e.data,(function(t,a){return r("g",{key:a},[r("circle",{attrs:{cx:e.getCx(t),cy:e.paddingTop-14,r:4.3,opacity:.3,fill:e.dotColor}})])}))],2):e._e()])},HT=[],WT={props:{xAxisScaleCount:Number,data:Array,dotColor:String},data:function(){return{defaultXAxisScaleCount:4,viewWidth:0,viewHeight:45,paddingLeft:16,paddingRight:16,paddingTop:20,paddingBottom:20}},mounted:function(){this.scatter=this.$refs["mini-scatter"],this.setViewBox(),window.addEventListener("resize",this.setViewBox.bind(this))},methods:{setViewBox:function(){var e=parseInt(window.getComputedStyle(this.scatter).width,10);e&&(this.viewWidth=e)},getScale:function(e){var t=this.data[0],r=this.data[0],a=!0,n=!1,i=void 0;try{for(var o,s=this.data[Symbol.iterator]();!(a=(o=s.next()).done);a=!0){var c=o.value;c>r&&(r=c),c<t&&(t=c)}}catch(D){n=!0,i=D}finally{try{a||null==s.return||s.return()}finally{if(n)throw i}}for(var l=(r-t)/e,u=[],d=0;d<=e;d++){var p=r-l*d,f={label:l<=.5?Number(p.toFixed(2)):Math.ceil(p),value:p};0===l&&0!=d||u.push(f)}if(r<=0||t>=0)return u;for(var h=void 0,v=void 0,b=0;b<u.length;b++){var g=u[b].value,y=Math.abs(g);(void 0===h||y<h)&&(h=g,v=b)}var m=[];if(void 0!==v&&0!==h){0===v&&v++,v===u.length-1&&v--;var O=Math.ceil(r/v),w=Math.ceil(t/(v-(u.length-1))),_=Math.max(O,w);m[v]={label:0,value:0};for(var j=v-1;j>=0;j--){var x=0+_*(v-j);m[j]={label:x,value:x}}for(var P=v+1;P<u.length;P++){var k=0-_*(P-v);m[P]={label:k,value:k}}}else m=u;return m},getXAxisLabel:function(e){return this.paddingLeft+(this.viewWidth-this.paddingLeft-this.paddingRight)/this.xAxisScaleCountInner*e},getCx:function(e){var t=this.xAxisScale[this.xAxisScale.length-1].value,r=this.xAxisScale[0].value,a=t&&t-r?(e-r)/(t-r)*(this.viewWidth-this.paddingLeft-this.paddingRight):0,n=this.paddingLeft+a;return n}},computed:{xAxisScaleCountInner:function(){return this.xAxisScaleCount||this.defaultXAxisScaleCount},xAxisScale:function(){var e=this.getScale(this.xAxisScaleCountInner);return e.reverse(),e}}},XT=WT,qT=(r("a8f1"),Object(u["a"])(XT,GT,HT,!1,null,"15275a54",null)),KT=qT.exports,YT=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{ref:"space-scatter"},[r("x-chartip",{ref:"chartip",attrs:{"no-arrow":""}},[r("div",{staticClass:"chartip-header",style:"background-color: "+e.chartipData.color+";color: white",attrs:{slot:"header"},slot:"header"},[r("div",[e._v(e._s(e.chartipTitle))])]),r("div",{staticClass:"chartip-content",attrs:{slot:"content"},slot:"content"},[r("div",{staticStyle:{"margin-top":"2px"}},[e.chartipData.showAll?r("div",e._l(e.chartipData.spaces,(function(t,a){return r("div",{key:a,staticClass:"chartip-content-group"},[r("div",{staticClass:"chartip-label",style:"margin-top: 2px;background-color: "+e.chartipData.colors[a]}),r("div",{staticClass:"chartip-key"},[e._v(e._s(t)+":")])])})),0):r("div",[r("div",{staticClass:"chartip-key"},[e._v("堆内存空间名称:")]),r("div",{staticClass:"chartip-key"},[e._v("堆内存大小变化:")])])]),r("div",{staticStyle:{margin:"2px 0 0 23px"}},[e.chartipData.showAll?r("div",e._l(e.chartipData.sizes,(function(t,a){return r("div",{key:a,staticClass:"chartip-value"},[e._v(e._s(t)+"MB")])})),0):r("div",[r("div",{staticClass:"chartip-value"},[e._v("@"+e._s(e.chartipData.axis))]),r("div",{staticClass:"chartip-value"},[e._v(e._s(e.chartipData.positive)+e._s(e.chartipData.change)+"MB")])])])])]),e.viewWidth?r("svg",{attrs:{width:"100%",height:e.viewHeight,viewBox:"0, 0, "+e.viewWidth+", "+e.viewHeight}},[r("g",[r("line",{staticClass:"axis",attrs:{x1:e.paddingLeft,y1:e.viewHeight-e.paddingBottom,x2:e.viewWidth-e.paddingRight,y2:e.viewHeight-e.paddingBottom}}),r("line",{staticClass:"axis",attrs:{x1:e.paddingLeft,y1:e.paddingTop,x2:e.paddingLeft,y2:e.viewHeight-e.paddingBottom}}),r("g",e._l(e.xAxisScale,(function(t,a){return r("g",{key:a},[r("rect",{staticClass:"bg-rect",attrs:{width:0===a?0:.5*e.xGridFullWidth,height:e.viewHeight-e.paddingTop-e.paddingBottom,x:e.getXGridBgInterval(a),y:e.paddingTop}}),r("text",{staticClass:"axisScale",attrs:{"text-anchor":"middle",x:e.getXAxisLabel(a),y:e.viewHeight-e.paddingBottom,dy:"1.5em"}},[e._v(e._s(e.formatXLabel(t.value)))])])})),0),r("g",e._l(e.yAxis,(function(t,a){return r("g",{key:a},[r("text",{staticClass:"axisScale",staticStyle:{"text-anchor":"end"},attrs:{x:e.paddingLeft,y:e.getYAxisLabel(a),dx:"-0.5em",dy:"0.32em"}},[e._v(e._s(t.label))]),a!==e.yAxis.length-1?r("line",{staticClass:"axis",attrs:{x1:e.paddingLeft,y1:e.getYAxisLabel(a),x2:e.viewWidth-e.paddingRight,y2:e.getYAxisLabel(a)}}):e._e()])})),0),r("g",[r("text",{staticClass:"axisUnit",attrs:{x:e.paddingLeft,y:e.paddingTop,dy:"-0.5em"}},[e._v(e._s(e.upperCaseLabel(e.yAxisUnit)))])])]),e._l(e.data,(function(t,a){return r("g",{key:a},e._l(e.yAxis,(function(n,i){return r("g",{key:i},[r("circle",{ref:e.circleLabel+"-"+t.index+"-"+n.value,refInFor:!0,staticClass:"circle",attrs:{cx:e.getCx(t),cy:e.getYAxisLabel(i),r:e.getRadius(t,n),opacity:e.circleOpacity,fill:e.getColor(t,n),stroke:e.getColor(t,n)},on:{mousemove:function(r){return r.stopPropagation(),e.mousemove(t,n,a,r)},mouseleave:e.mouseleave,click:function(r){return e.fixIntersection(t,n,a,r)}}})])})),0)}))],2):e._e(),e.data.length?r("div",{staticClass:"chart-label"},e._l(e.types,(function(t,a){return r("div",{key:a,ref:e.labelKey+t.type,refInFor:!0,staticClass:"chart-label-group",style:0!==a?"margin-left: 25px;":"",on:{mouseenter:function(r){return e.mouseoverLabel(t)},mouseleave:function(r){return e.mouseleaveLabel(t)},click:function(r){return e.choseLabel(t)}}},[r("div",{staticClass:"label-icon",style:"background-color: "+e.getColor(t)}),r("div",{staticClass:"label-value"},[e._v(e._s(t.label))])])})),0):e._e()],1)},VT=[];function QT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ZT(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?QT(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QT(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var JT={created:function(){for(var e=this,t=function(t){var r=e.yAxis.map((function(e){return"all_spaces"!==e.value&&e.value})).filter((function(e){return e})),a=e.data[t];r.sort((function(e,t){return a[e]<a[t]?1:-1}));var n=r.map((function(e){return"".concat(a["".concat(e,"_positive")]||0===a[e]?"+":"-").concat(Number(a[e].toFixed(2)))})),i=r.map((function(e){return a["".concat(e,"_positive")]?"#c45a65":"#2a9446"}));e.xValueMap[a[e.xAxis]]=Object.assign({index:t,showAll:!0,spaces:r,sizes:n,colors:i,color:e.getColor(a,{value:"all_spaces"})},a)},r=0;r<this.data.length;r++)t(r);var a=this.validDataMap,n=!0,i=!1,o=void 0;try{for(var s,c=this.data[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){var l=s.value,u=!0,d=!1,p=void 0;try{for(var f,h=this.yAxis[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var v=f.value.value;l[v]&&(a[v]?a[v]++:a[v]=1)}}catch(b){d=!0,p=b}finally{try{u||null==h.return||h.return()}finally{if(d)throw p}}}}catch(b){i=!0,o=b}finally{try{n||null==c.return||c.return()}finally{if(i)throw o}}},mounted:function(){this.scatter=this.$refs["space-scatter"],this.chartip=this.$refs.chartip,this.setViewBox(),window.addEventListener("resize",this.setViewBox.bind(this))},methods:ZT({setViewBox:function(){var e=parseInt(window.getComputedStyle(this.scatter).width,10);e&&(this.viewWidth=e)},formatChartipTime:function(e){return S(e,!1,!0,0)},formatXLabel:function(e){return Math.round(e)},upperCaseLabel:function(e){return e.toUpperCase()},getXGridBgInterval:function(e){return this.paddingLeft-.75*this.xGridFullWidth+this.xGridFullWidth*e},getYAxisLabel:function(e){return this.paddingTop+(this.viewHeight-this.paddingTop-this.paddingBottom)/this.yAxisScaleCountInner*(this.yAxisScaleCountInner-e-.5)},getXAxisLabel:function(e){return this.paddingLeft+(this.viewWidth-this.paddingLeft-this.paddingRight)/this.xAxisScaleCountInner*e},getScale:function(e,t,r){var a=this,n=this.data;if(!Array.isArray(n))return[];r&&(n=n.filter((function(e){return a.needShow(e,r)})));var i=t===this.yAxis&&this.yAxisZero;if(Array.isArray(t)){var o=[],s=!0,c=!1,l=void 0;try{for(var u,d=function(){var e=u.value;o=o.concat(n.map((function(t){return t[e]})))},p=t[Symbol.iterator]();!(s=(u=p.next()).done);s=!0)d()}catch(P){c=!0,l=P}finally{try{s||null==p.return||p.return()}finally{if(c)throw l}}n=o}else n=n.map((function(e){return e[t]}));var f=i?0:n[0],h=n[0],v=!0,b=!1,g=void 0;try{for(var y,m=n[Symbol.iterator]();!(v=(y=m.next()).done);v=!0){var O=y.value;O>h&&(h=O),O<f&&!i&&(f=O)}}catch(P){b=!0,g=P}finally{try{v||null==m.return||m.return()}finally{if(b)throw g}}var w=(h-f)/e;if(0===w)return[{label:h,value:h}];for(var _=[],j=0;j<=e;j++){var x=h-w*j;_.push({label:w<=.5?Number(x.toFixed(2)):Math.ceil(x),value:x})}return _},getCx:function(e){var t=e.index,r=this.xAxisScale[this.xAxisScale.length-1].value,a=this.xAxisScale[0].value,n=r&&r-a?(t-a)/(r-a)*(this.viewWidth-this.paddingLeft-this.paddingRight):0,i=this.paddingLeft+n;return i},needShow:function(e,t){if(!this.filterType)return!0;var r=e["".concat(t,"_positive")];return!("increment"!==this.filterType||!r)||"reduce"===this.filterType&&!r},needShowRadius:function(e,t){var r=100,a=this.validDataMap[t];if(a>r){var n=Math.round(a/r);return e%n===0}return!0},getRadius:function(e,t){var r=t.value,a=e[r];if(!a||!this.needShow(e,r))return 0;var n="".concat(e.index,"::").concat(r),i=this.radiusMap;if(_(i[n]))return i[n];var o=16,s=4,c=this.spacesInfo["total"],l=a/c*o;return l=l>o?o:l,l=l<s?this.needShowRadius(e.index,r)?s:0:l,i[n]=l,l},getColor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.value,a=e["".concat(r,"_positive")];return a||"increment"===e.type?"#c45a65":"#adbcc9"},singleton:function(e){var t=e.type;this.filterType=t;var r=this.$refs[this.labelKey+t][0].style;r["transform"]="scale(1.2)"},restore:function(e){var t=e.type;this.filterType=void 0;var r=this.$refs[this.labelKey+t][0].style;r["transform"]="scale(1)"}},w("mouseoverLabel",(function(e){this.single||this.singleton(e)})),{},w("mouseleaveLabel",(function(e){this.single||this.restore(e)})),{choseLabel:function(e){var t=e.type,r=!0,a=!1,n=void 0;try{for(var i,o=this.types[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var s=i.value;this.restore(s)}}catch(c){a=!0,n=c}finally{try{r||null==o.return||o.return()}finally{if(a)throw n}}t!==this.single&&(this.single=void 0),this.single?(this.restore({type:t}),this.single=void 0):(this.singleton({type:t}),this.single=t)},setCircleStyle:function(e,t,r,a,n){if(n=n||e.axis,n){var i;i=Array.isArray(n)?n:[n];var o=!0,s=!1,c=void 0;try{for(var l,u=i[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var d=l.value,p=this.$refs["".concat(this.circleLabel,"-").concat(e.index,"-").concat(d)];if(p&&p[0]){var f=p[0].style;f["stroke-opacity"]=t,f["stroke-width"]=r,f["opacity"]=a}}}catch(h){s=!0,c=h}finally{try{o||null==u.return||u.return()}finally{if(s)throw c}}}}},w("mousemove",(function(e,t,r,a){if(!this.intersectionFixed){var n=a.offsetX,i=a.offsetY,o=this.paddingLeft,s=this.viewWidth-this.paddingRight,c=this.paddingTop,l=this.viewHeight-this.paddingBottom;if(!(n<o||n>s))if(i<c||i>l)this.mouseleave();else{this.setCircleStyle(this.chartipData,1,0,this.circleOpacity),this.setCircleStyle(e,.5,"13px",1,t.value),this.chartipData=Object.assign({index:r,axis:t.value,change:Number(e[t.value].toFixed(2)),positive:e["".concat(t.value,"_positive")]?"+":"-",color:this.getColor(e,t)},e);var u={offsetX:n,offsetY:i};this.chartip.show(u,c,s,this.paddingRight),this.$emit("linkage",{time:e[this.xAxis],mouse:u})}}})),{},w("mouseleave",(function(){this.intersectionFixed||(this.chartip.hidden(),this.$emit("hidden"),this.setCircleStyle(this.chartipData,1,0,this.circleOpacity))})),{fixIntersection:function(e,t,r,a){this.intersectionFixed=!this.intersectionFixed,this.$emit("broadcast",{intersectionFixed:this.intersectionFixed}),this.intersectionFixed||this.mousemove(e,t,r,a)},handleBroadcase:function(e){var t=e.intersectionFixed;this.intersectionFixed=t}},w("showTip",(function(e){var t=e.time,r=e.mouse,a=this.viewWidth-this.paddingRight,n=this.paddingTop,i=this.xValueMap[t],o=this.yAxis.map((function(e){return e.value}));this.setCircleStyle(this.chartipData,1,0,this.circleOpacity,o),this.setCircleStyle(i,.5,"13px",1,o),this.chartipData=i;var s=r.offsetX,c=r.offsetY;this.chartip.show({offsetX:s+45,offsetY:c},n,a,this.paddingRight)})),{},w("hiddenTip",(function(){this.chartip.hidden();var e=this.yAxis.map((function(e){return e.value}));this.setCircleStyle(this.chartipData,1,0,this.circleOpacity,e)}))),computed:{xAxisScaleCountInner:function(){return this.xAxisScaleCount||this.defaultXAxisScaleCount},yAxisScaleCountInner:function(){return this.yAxis.length},xGridFullWidth:function(){return(this.viewWidth-this.paddingLeft-this.paddingRight)/this.xAxisScaleCountInner},xAxisScale:function(){var e=this.getScale(this.xAxisScaleCountInner,this.xAxis);return e.reverse(),e},spacesInfo:function(){var e={total:0},t=!0,r=!1,a=void 0;try{for(var n,i=this.data[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var o=n.value,s=!0,c=!1,l=void 0;try{for(var u,d=this.yAxis[Symbol.iterator]();!(s=(u=d.next()).done);s=!0){var p=u.value.value;void 0!==e[p]?e[p]<o[p]&&(e[p]=o[p]):e[p]=o[p],e.total<o[p]&&(e.total=o[p])}}catch(f){c=!0,l=f}finally{try{s||null==d.return||d.return()}finally{if(c)throw l}}}}catch(f){r=!0,a=f}finally{try{t||null==i.return||i.return()}finally{if(r)throw a}}return e},types:function(){return[{type:"reduce",label:"GC 后空间大小减少"},{type:"increment",label:"GC 后空间大小增加"}]},chartipTitle:function(){var e=this.chartipData,t=e.index,r=e.type;return"追踪周期内第 ".concat(t," 次 GC ( ").concat(r," )")}}};function eC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function tC(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eC(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eC(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var rC=tC({props:{data:Array,xAxisScaleCount:Number,yAxisScaleCount:Number,xAxis:String,yAxis:Array,yAxisUnit:String,yAxisZero:Boolean},data:function(){return{defaultXAxisScaleCount:5,defaultYAxisScaleCount:4,viewWidth:0,viewHeight:250,paddingLeft:116,paddingRight:30,paddingTop:20,paddingBottom:27,labelKey:"label-",filterType:void 0,chartipData:{},xValueMap:{},circleLabel:"scatter-label",intersectionFixed:!1,validDataMap:{},circleOpacity:.5,radiusMap:{}}}},JT),aC=rC,nC=(r("5269"),Object(u["a"])(aC,YT,VT,!1,null,"d0fbc3b2",null)),iC=nC.exports;a["default"].use(n["b"]),a["default"].use(i["a"]),a["default"].use(WD.a),a["default"].use(qD.a),a["default"].component("x-chartip",JD),a["default"].component("x-dashboard-title",iS),a["default"].component("x-drawer",dS),a["default"].component("x-dropdown",gS),a["default"].component("x-error-message",jS),a["default"].component("x-loading",TS),a["default"].component("x-modal",NS),a["default"].component("x-table",BS),a["default"].component("x-tooltip",qS),a["default"].component("x-tree",JS),a["default"].component("x-area",dT),a["default"].component("x-histogram",_T),a["default"].component("x-pie",CT),a["default"].component("x-pie2",RT),a["default"].component("x-scatter",UT),a["default"].component("x-mini-scatter",KT),a["default"].component("x-space-scatter",iC);var oC=new n["b"].Store(Mr),sC={routes:GD},cC=new i["a"](sC);new a["default"]({store:oC,router:cC,render:function(e){return e(p)}}).$mount("#app")},"56df":function(e,t,r){},"57cf":function(e,t,r){},"5e3e":function(e,t,r){},"5e53":function(e,t,r){"use strict";var a=r("36e0"),n=r.n(a);n.a},"5e5f":function(e,t,r){"use strict";var a=r("63b3"),n=r.n(a);n.a},6067:function(e,t,r){"use strict";var a=r("924f"),n=r.n(a);n.a},"619d":function(e,t,r){},6384:function(e,t,r){},"63b3":function(e,t,r){},"63ef":function(e,t,r){},"64e7":function(e,t,r){"use strict";var a=r("e519"),n=r.n(a);n.a},"64ee":function(e,t,r){},"65f6":function(e,t,r){},"6a2d":function(e,t,r){},"6b98":function(e,t,r){},"6f7b":function(e,t,r){},"71d5":function(e,t,r){"use strict";var a=r("c54f"),n=r.n(a);n.a},"71fd":function(e,t,r){},7826:function(e,t,r){},7893:function(e,t,r){},"7b62":function(e,t,r){"use strict";var a=r("9feb"),n=r.n(a);n.a},"7bf3":function(e,t,r){},"7eea":function(e,t,r){},"7f39":function(e,t,r){},"7fbd":function(e,t,r){"use strict";var a=r("a3e6"),n=r.n(a);n.a},8018:function(e,t,r){"use strict";var a=r("4996"),n=r.n(a);n.a},"82b1":function(e,t,r){"use strict";var a=r("65f6"),n=r.n(a);n.a},"858e":function(e,t,r){"use strict";var a=r("1ba1"),n=r.n(a);n.a},"85a8":function(e,t,r){"use strict";var a=r("f801"),n=r.n(a);n.a},"85ec":function(e,t,r){},"8d63":function(e,t,r){"use strict";var a=r("51e2"),n=r.n(a);n.a},"8fa2":function(e,t,r){"use strict";var a=r("5381"),n=r.n(a);n.a},"924f":function(e,t,r){},"925a":function(e,t,r){"use strict";var a=r("e988"),n=r.n(a);n.a},9554:function(e,t,r){},9679:function(e,t,r){"use strict";var a=r("227c"),n=r.n(a);n.a},"975e":function(e,t,r){},"98bf":function(e,t,r){},"9ad4":function(e,t,r){"use strict";var a=r("e8ac"),n=r.n(a);n.a},"9ba8":function(e,t,r){"use strict";var a=r("6f7b"),n=r.n(a);n.a},"9be8":function(e,t,r){"use strict";var a=r("57cf"),n=r.n(a);n.a},"9d30":function(e,t,r){},"9da7":function(e,t,r){},"9f6d":function(e,t,r){"use strict";var a=r("4433"),n=r.n(a);n.a},"9feb":function(e,t,r){},a0ae:function(e,t,r){},a17d:function(e,t,r){},a2a8:function(e,t,r){},a2ba:function(e,t,r){"use strict";var a=r("63ef"),n=r.n(a);n.a},a2cb:function(e,t,r){"use strict";var a=r("f4e1"),n=r.n(a);n.a},a350:function(e,t,r){"use strict";var a=r("b6ae"),n=r.n(a);n.a},a3e6:function(e,t,r){},a4342:function(e,t,r){"use strict";var a=r("ed99"),n=r.n(a);n.a},a750:function(e,t,r){"use strict";var a=r("0367"),n=r.n(a);n.a},a778:function(e,t,r){},a77c:function(e,t,r){},a7a0:function(e,t,r){"use strict";var a=r("d8e1"),n=r.n(a);n.a},a8f1:function(e,t,r){"use strict";var a=r("619d"),n=r.n(a);n.a},aa76:function(e,t,r){},ab6a:function(e,t,r){"use strict";var a=r("71fd"),n=r.n(a);n.a},ac6e:function(e,t,r){"use strict";var a=r("5e3e"),n=r.n(a);n.a},adc9:function(e,t,r){"use strict";var a=r("090a"),n=r.n(a);n.a},addb:function(e,t,r){"use strict";var a=r("a778"),n=r.n(a);n.a},ae92:function(e,t,r){"use strict";var a=r("98bf"),n=r.n(a);n.a},af1a:function(e,t,r){},b0c4:function(e,t,r){"use strict";var a=r("153f"),n=r.n(a);n.a},b28f:function(e,t,r){"use strict";var a=r("c357"),n=r.n(a);n.a},b652:function(e,t,r){"use strict";var a=r("f745"),n=r.n(a);n.a},b6ae:function(e,t,r){},b78c:function(e,t,r){},bc4f:function(e,t,r){"use strict";var a=r("2082"),n=r.n(a);n.a},bf21:function(e,t,r){},bf70:function(e,t,r){},bff7:function(e,t,r){"use strict";var a=r("36c2"),n=r.n(a);n.a},c165:function(e,t,r){"use strict";var a=r("7bf3"),n=r.n(a);n.a},c357:function(e,t,r){},c54f:function(e,t,r){},c5ff:function(e,t,r){},c755:function(e,t,r){"use strict";var a=r("cf97"),n=r.n(a);n.a},c95c:function(e,t,r){"use strict";var a=r("3bf0"),n=r.n(a);n.a},c979:function(e,t,r){"use strict";var a=r("7826"),n=r.n(a);n.a},cb41:function(e,t,r){"use strict";var a=r("7893"),n=r.n(a);n.a},cec2:function(e,t,r){},cf97:function(e,t,r){},cfbd:function(e,t,r){},d215:function(e,t,r){"use strict";var a=r("cfbd"),n=r.n(a);n.a},d2bc:function(e,t,r){"use strict";var a=r("35df"),n=r.n(a);n.a},d617:function(e,t,r){"use strict";var a=r("aa76"),n=r.n(a);n.a},d641:function(e,t,r){"use strict";var a=r("b78c"),n=r.n(a);n.a},d8e1:function(e,t,r){},dd11:function(e,t,r){"use strict";var a=r("056f"),n=r.n(a);n.a},de46:function(e,t,r){},dfbb:function(e,t,r){"use strict";var a=r("a17d"),n=r.n(a);n.a},e2ff:function(e,t,r){"use strict";var a=r("0570"),n=r.n(a);n.a},e423:function(e,t,r){"use strict";var a=r("25a9"),n=r.n(a);n.a},e42b:function(e,t,r){"use strict";var a=r("6a2d"),n=r.n(a);n.a},e519:function(e,t,r){},e6ca:function(e,t,r){},e765:function(e,t,r){"use strict";var a=r("af1a"),n=r.n(a);n.a},e8ac:function(e,t,r){},e988:function(e,t,r){},ebc1:function(e,t,r){},ec97:function(e,t,r){},ecf3:function(e,t,r){"use strict";var a=r("55fc"),n=r.n(a);n.a},ed99:function(e,t,r){},f342:function(e,t,r){"use strict";var a=r("a2a8"),n=r.n(a);n.a},f4e1:function(e,t,r){},f568:function(e,t,r){},f5b7:function(e,t,r){"use strict";var a=r("2ea7"),n=r.n(a);n.a},f745:function(e,t,r){},f801:function(e,t,r){},f893:function(e,t,r){"use strict";var a=r("1a0c"),n=r.n(a);n.a},fa60:function(e,t,r){"use strict";var a=r("1e10"),n=r.n(a);n.a},fba0:function(e,t,r){"use strict";var a=r("3c08"),n=r.n(a);n.a},fbb9:function(e,t,r){"use strict";var a=r("a77c"),n=r.n(a);n.a},fca7:function(e,t,r){"use strict";var a=r("09a8"),n=r.n(a);n.a},ff4a:function(e,t,r){"use strict";var a=r("975e"),n=r.n(a);n.a}});